(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{254:function(e,n){},256:function(e,n){},272:function(e,n){},283:function(e,n){},401:function(e,n,t){"use strict";t.r(n);var a=t(206),r=t(482),i=t(0),o=t.n(i),c=t(57),s=t.n(c),u=t(17),l=t(18),f=t.n(l),m=t(27),d=t(3),h=t(500),p=t(449),g=t(450),j=t(486),b=t(484),v=t(490),x=t(481),O=t(483),w=t(448),A=t(485),C=t(1),y=function(e){var n=e.name;return Object(C.jsx)(O.a,{children:n})},S=function(e){var n=e.mainEle,t=e.children,a=o.a.useState(!0),r=Object(d.a)(a,2),i=r[0],c=r[1];return Object(C.jsx)(w.a,{onClickAway:function(){return c(!0)},children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)(b.a,{variant:"text",onClick:function(){return c(!i)},style:{color:"black"},size:"small",children:Object(C.jsxs)(p.a,{direction:"row",alignItems:"center",spacing:4,children:[Object(C.jsx)("div",{children:n}),Object(C.jsx)(y,{name:i?"add":"remove"})]})}),Object(C.jsx)(A.a,{in:!i,children:t})]})})},k=function(){return Object(C.jsx)(S,{mainEle:Object(C.jsx)(j.a,{variant:"h5",children:"Click here for Help"}),children:Object(C.jsxs)(I,{children:[Object(C.jsx)(S,{mainEle:Object(C.jsx)(j.a,{variant:"h6",children:"Getting Started"}),children:Object(C.jsxs)(V,{children:[Object(C.jsx)(M,{children:"Start by importing an image from your device"}),Object(C.jsx)(E,{children:"You may choose a png, jpg, or gif"}),Object(C.jsx)(E,{children:"The frames per second controls how fast the final gif will animate"})]})}),Object(C.jsx)(S,{mainEle:Object(C.jsx)(j.a,{variant:"h6",children:"Adding Effects"}),children:Object(C.jsxs)(I,{children:[Object(C.jsx)(V,{children:Object(C.jsxs)(V,{children:[Object(C.jsx)(M,{children:"Effects are applied to an image to manipulate it"}),Object(C.jsx)(E,{children:"Some may adjust the basic attributes of an image, such as size, or number of animation frames."}),Object(C.jsx)(E,{children:"Others may apply animated effects, such as making the image spin, or cycle through colors."})]})}),Object(C.jsx)(g.a,{}),Object(C.jsxs)(V,{children:[Object(C.jsx)(M,{children:"Animation effects require multiple animaion frames"}),Object(C.jsx)(E,{children:'The "Adjust Image" effect has a "Frame Count" paramter.'}),Object(C.jsx)(E,{children:"This controls how many frames are in the animation. Typically this is between 10 and 20."}),Object(C.jsx)(E,{children:"More frames will increase both the time to compute the image, and the final file size."}),Object(C.jsx)(E,{children:"Remember that some places (like Slack and Discord) have strict limits on the size of emojis."})]}),Object(C.jsx)(g.a,{}),Object(C.jsxs)(V,{children:[Object(C.jsx)(M,{children:"The order of effects matters"}),Object(C.jsx)(E,{children:"The result of each effect is send to the next effect."}),Object(C.jsx)(E,{children:"Because of this, the order of effects matter."}),Object(C.jsx)(E,{children:"Experiment with moving effects around to see different effects."}),Object(C.jsx)(E,{children:"For instance, applying a background color before rotating the image will have a very different effect than rotating before setting a background color."})]})]})}),Object(C.jsx)(S,{mainEle:Object(C.jsx)(j.a,{variant:"h6",children:"Creating Gifs"}),children:Object(C.jsxs)(I,{children:[Object(C.jsxs)(V,{children:[Object(C.jsx)(M,{children:"Gifs will compute automatically"}),Object(C.jsx)(E,{children:"Whenever you add or change an effect, it will compute a new gif directly below that effect."}),Object(C.jsx)(E,{children:"The gif below to each effect shows the results of that effect on the previous gif."})]}),Object(C.jsx)(g.a,{}),Object(C.jsxs)(V,{children:[Object(C.jsx)(M,{children:"Creating a GIF"}),Object(C.jsx)(E,{children:'To export a gif, just right click on the gif itself, and click "Save Image As...".'})]})]})})]})})},I=function(e){var n=e.children;return Object(C.jsx)(p.a,{spacing:2,children:n})},V=function(e){var n=e.children;return Object(C.jsx)(p.a,{width:"sm",spacing:1,children:n})},M=function(e){var n=e.children;return Object(C.jsx)(j.a,{variant:"body1",paddingLeft:"0.5rem",children:n})},E=function(e){var n=e.children;return Object(C.jsxs)(j.a,{variant:"body2",paddingLeft:"1.0rem",children:[Object(C.jsx)(O.a,{sx:{fontSize:8,marginRight:1},children:"circle"})," ",n]})},F=t(468),P=t(494),B=function(){var e=Object(m.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var n=document.createElement("canvas");n.width=a.width,n.height=a.height;var t=n.getContext("2d");if(!t)throw new Error("Canvas not supported");t.drawImage(a,0,0),e(n.toDataURL())},a.onerror=function(){t(new Error("Error loading url"))},a.src=n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=t(199),R=t.n(T),N=t(200),D=t.n(N),z=t(106),Q=t.n(z),H=t(15),W=t(459),U=t(462),Y=t(501);function G(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new Error("AssertionFailure: ".concat(n))}var q=function(e,n,t){return e.map((function(e,a){return n===a?t(e):e}))},L=function(e){return"function"===typeof e?e:function(){return e}},X=function(e){var n;return{name:e.name,params:e.params,description:e.description,secondaryDescription:e.secondaryDescription,fn:e.fn,disabled:null!==(n=e.disabled)&&void 0!==n&&n}},J="undefined"===typeof window,Z=function(e){var n=Object(d.a)(e,2),t=n[0],a=n[1];if(J){var r=new OffscreenCanvas(t,a),i=r.getContext("2d");return G(i,"Canvas not supported"),{canvas:r,ctx:i}}var o=document.createElement("canvas");o.width=t,o.height=a;var c=o.getContext("2d");return G(c,"Canvas not supported"),{canvas:o,ctx:c}},K=function(e){var n=e.dimensions,t=e.frame,a=Object(d.a)(n,2),r=a[0],i=a[1],o=Z(n),c=o.canvas,s=o.ctx,u=new ImageData(t,r,i);return s.putImageData(u,0,0),{canvas:c,ctx:s}},_=function(e){return e.ctx.getImageData(0,0,e.canvas.width,e.canvas.height).data},$=function(e){var n=e.dimensions,t=e.frame,a=e.preEffect,r=e.postEffect,i=Z(n);return i.ctx.save(),null===a||void 0===a||a(i),i.ctx.drawImage(K({dimensions:n,frame:t}).canvas,0,0),i.ctx.restore(),null===r||void 0===r||r(i),i.ctx.getImageData(0,0,n[0],n[1]).data},ee=function(e){var n=e.dimensions,t=e.background,a=e.foreground,r="canvas"in t?t:K({dimensions:n,frame:t}),i="canvas"in a?a:K({dimensions:n,frame:a});return r.ctx.drawImage(i.canvas,0,0),_(r)},ne=function(e,n){var t=n.blur,a=n.brightness,r=n.contrast,i=n.opacity,o=n.saturation,c=[null==t?"":"blur(".concat(t,"px)"),null==a?"":"brightness(".concat(a,"%)"),null==r?"":"contrast(".concat(r,"%)"),null==i?"":"opacity(".concat(i,"%)"),null==o?"":"saturate(".concat(o,"%)")].filter((function(e){return e.length>0}));return e.ctx.filter=c.join(" "),e},te=function(e,n){var t=n.horizontalScale,a=n.verticalScale,r=n.horizontalSkew,i=n.verticalSkew,o=n.horizontalTranslation,c=n.verticalTranslation;return e.ctx.transform(null!==t&&void 0!==t?t:1,null!==i&&void 0!==i?i:0,null!==r&&void 0!==r?r:0,null!==a&&void 0!==a?a:1,null!==o&&void 0!==o?o:0,null!==c&&void 0!==c?c:0),e},ae=function(e,n){var t=e.canvas.width/2,a=e.canvas.height/2;te(e,{horizontalTranslation:t,verticalTranslation:a});var r=-n*Math.PI/180;return e.ctx.rotate(r),te(e,{horizontalTranslation:-t,verticalTranslation:-a}),e},re=t(451),ie=t(33),oe=function(e,n,t){return(1-e/100)*n+e/100*t},ce=function(e){var n=Object(d.a)(e,3),t=n[0],a=n[1],r=n[2],i=function(e){var n=e.toString(16).toUpperCase();return 2===n.length?n:"0"+n};return"#".concat(i(t)).concat(i(a)).concat(i(r))},se=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},ue=function(e){return e[3]<64},le=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},fe=function(e,n,t){return Math.max(Math.min(e,t),n)},me=function(e){var n=Object(d.a)(e,4),t=n[0],a=n[1],r=n[2],i=n[3];return[fe(t,0,255),fe(a,0,255),fe(r,0,255),fe(i,0,255)]},de=[0,0,0,0],he=function(e,n,t){var a=Object(d.a)(e,4),r=a[0],i=a[1],o=a[2],c=a[3],s=ie.rgb.hsl([r,i,o]),u=Object(d.a)(s,3),l=u[1],f=u[2],m=ie.hsl.rgb([n,oe(t,l,100),f]),h=Object(d.a)(m,3),p=h[0],g=h[1],j=h[2];return[oe(t,r,p),oe(t,i,g),oe(t,o,j),c]},pe=function(e,n){var t=Object(d.a)(e,4),a=t[0],r=t[1],i=t[2],o=t[3],c=ie.rgb.hsl([a,r,i]),s=Object(d.a)(c,3),u=s[0],l=s[1],f=s[2],m=ie.hsl.rgb([(u+n)%360,l,f]),h=Object(d.a)(m,3);return[h[0],h[1],h[2],o]},ge=function(e,n){var t=n[0]-e[0],a=n[1]-e[1];return(360+180*Math.atan2(a,t)/Math.PI)%360},je=function(e){return[].concat(Object(H.a)(ie.hsl.rgb([e,100,50])),[255])},be=function(e,n){var t=e[0]-n[0],a=e[1]-n[1],r=e[2]-n[2],i=(e[0]+n[0])/2,o=(2+i/256)*t*t,c=(2+(255-i)/256)*a*a,s=4*r*r;return Math.sqrt(o+c+s)/765},ve=function(e,n,t){var a=Object(d.a)(e,2),r=a[0],i=a[1],o=Object(d.a)(t,2),c=o[0],s=o[1];if(c<0||c>=r||s<0||s>=i)return de;var u=Ce(e,c,s);return[n[u],n[u+1],n[u+2],n[u+3]]},xe=function(e,n){return{dimensions:e.dimensions,frames:e.frames.map((function(t,a){return n(t,a,e.frames.length)}))}},Oe=function(e,n){for(var t=Object(d.a)(e,2),a=t[0],r=t[1],i=new Uint8ClampedArray(a*r*4),o=0;o<r;o+=1)for(var c=0;c<a;c+=1){var s=me(n([c,o])),u=Ce(e,c,o);i[u]=s[0],i[u+1]=s[1],i[u+2]=s[2],i[u+3]=s[3]}return i},we=function(e){return function(n){var t=n.image,a=n.random,r=n.parameters;return xe(t,(function(n,i,o){return Oe(t.dimensions,(function(c){return e({image:t,dimensions:t.dimensions,random:a,parameters:r,coord:c,frameCount:o,frameIndex:i,animationProgress:i/o,getSrcPixel:function(e){return ve(t.dimensions,n,e)}})}))}))}},Ae=function(e,n){return function(t){var a=t.image,r=t.random,i=t.parameters;return xe(a,(function(t,o,c){var s=o/c,u=e({image:a,dimensions:a.dimensions,random:r,parameters:i,frameCount:c,frameIndex:o,animationProgress:s});return Oe(a.dimensions,(function(e){return n({computed:u,image:a,dimensions:a.dimensions,random:r,parameters:i,coord:e,frameCount:c,frameIndex:o,animationProgress:s,getSrcPixel:function(e){return ve(a.dimensions,t,e)}})}))}))}},Ce=function(e,n,t){return 4*(n+t*Object(d.a)(e,1)[0])},ye=function(e){var n=e.image,t=e.newWidth,a=e.newHeight,r=e.keepScale,i=xe(n,(function(e){var i=Z([t,a]),o=K({dimensions:n.dimensions,frame:e});if(r)i.ctx.drawImage(o.canvas,0,0,t,a);else{var c=t/2-n.dimensions[0]/2,s=a/2-n.dimensions[1]/2;i.ctx.drawImage(o.canvas,c,s,n.dimensions[0],n.dimensions[1])}return _(i)}));return{dimensions:[t,a],frames:i.frames}},Se=function(e){var n=Ce(e.image.dimensions,e.coord[0],e.coord[1]),t=e.image.frames[e.frameIndex];t[n]=e.color[0],t[n+1]=e.color[1],t[n+2]=e.color[2],t[n+3]=e.color[3]},ke=t(474),Ie=t(491),Ve=t(487),Me=function(e){var n=e.description;return n?Object(C.jsx)(Ve.a,{title:n,children:Object(C.jsx)(O.a,{fontSize:"small",color:"action",children:"help"})}):null},Ee=function(e){var n=e.name,t=e.value,a=e.description,r=e.parse,i=e.onChange,c=o.a.useState(t.toString()),s=Object(d.a)(c,2),u=s[0],l=s[1],f=o.a.useState(""),m=Object(d.a)(f,2),h=m[0],g=m[1];return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:a})]}),Object(C.jsxs)(ke.a,{children:[Object(C.jsx)(F.a,{error:!!h,value:u,onBlur:function(){if(u!==t.toString()){var e=r(u);e.valid?(g(""),i(e.value)):g(e.reason)}},onChange:function(e){l(e.target.value)}}),h&&Object(C.jsx)(Ie.a,{children:h})]})]})},Fe=function(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){var t=e.min,a=e.max;return Object(C.jsx)(Ee,{name:e.name,description:e.description,parse:function(e){var n=parseInt(e,10);return isNaN(n)||n.toString()!==e?{valid:!1,reason:"Must be an integer"}:void 0!==t&&n<t?{valid:!1,reason:"Must be greater than or equal to ".concat(t)}:void 0!==a&&n>a?{valid:!1,reason:"Must be less than or equal to ".concat(a)}:{valid:!0,value:n}},onChange:n.onChange,value:n.value})}}},Pe=t(472),Be=t(208);var Te=function(e){var n=e.name,t=e.value,a=e.min,r=e.max,i=e.step,c=e.description,s=function(e){var n=e.initial,t=e.callback,a=e.waitMillis,r=o.a.useState(n),i=Object(d.a)(r,2),c=i[0],s=i[1],u=Object(Be.a)(t,null!==a&&void 0!==a?a:750);return[c,o.a.useCallback((function(e){s(e),u(e)}),[u]),o.a.useCallback((function(e){s(e),t(e)}),[t])]}({initial:t,callback:e.onChange}),u=Object(d.a)(s,2),l=u[0],f=u[1];return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:c})]}),Object(C.jsxs)(p.a,{direction:"row",spacing:2,sx:{paddingLeft:"8px",paddingRight:"8px"},children:[Object(C.jsx)(Pe.a,{"aria-label":n,value:l,step:i,valueLabelDisplay:"off",getAriaValueText:function(e){return e.toString()},min:a,max:r,onChange:function(e,n){f(n)}}),Object(C.jsx)(j.a,{variant:"body2",children:l})]})]})};function Re(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(Te,{name:e.name,value:n.value,onChange:n.onChange,min:e.min,max:e.max,step:e.step,description:e.description})}}}var Ne=X({name:"Adjust Image",description:"Change the dimensions, brightness, contrast etc.",params:[Fe({name:"Width",description:"Set to 0 to not change the width. If height is changed, the image will keep the same aspect ratio.",defaultValue:function(e){return e?e.dimensions[0]:0},min:0}),Fe({name:"Height",description:"Set to 0 to not change the height. If width is changed, the image will keep the same aspect ratio.",defaultValue:function(e){return e?e.dimensions[1]:0},min:0}),Re({name:"Brightness",min:-100,max:100,step:5,defaultValue:0}),Re({name:"Contrast",min:-100,max:100,step:5,defaultValue:0}),Re({name:"Saturation",min:-100,max:100,step:5,defaultValue:0})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,5),a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=Object(d.a)(n.dimensions,2),u=s[0],l=s[1],f=a>0||r>0,m=f&&0===a?Math.ceil(u/l*r):a,h=f&&0===r?Math.ceil(l/u*a):r,p=m*h>u*l,g=n;return f&&!p&&(g=ye({image:g,newWidth:m,newHeight:h,keepScale:!1})),g=xe(g,(function(e){return $({dimensions:g.dimensions,frame:e,preEffect:function(e){return ne(e,{brightness:i+100,contrast:o+100,saturation:c+100})}})})),f&&p&&(g=ye({image:g,newWidth:m,newHeight:h,keepScale:!1})),g}}),De=t(118),ze=function(e){var n=e.color;return Object(C.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:ce(n)}})},Qe=function(e){var n=e.name,t=e.value,a=e.description,r=e.onChange;return Object(C.jsx)(S,{mainEle:Object(C.jsxs)(p.a,{direction:"row",spacing:4,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:a}),t&&Object(C.jsx)(ze,{color:t})]}),children:Object(C.jsx)(De.b,{disableAlpha:!0,presetColors:[],color:ce(t),onChangeComplete:function(e){r(se(e.hex))}})})};function He(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(Qe,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}var We=X({name:"Background Color",description:"Change all transparent pixles to the given color",params:[He({name:"Color",defaultValue:se("#000000")}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,2),a=t[0],r=t[1];return xe(n,(function(e){var t=100===r?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:r})}});return ee({dimensions:n.dimensions,background:Oe(n.dimensions,(function(){return a})),foreground:t})}))}}),Ue=t(473),Ye=function(e){var n=e.name,t=e.value,a=e.description,r=e.onChange;return Object(C.jsx)(p.a,{spacing:1,children:Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",paddingTop:"0.5rem",children:n}),Object(C.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(C.jsx)(Me,{description:a})}),Object(C.jsx)(Ue.a,{"aria-label":n,checked:t,onChange:function(e){return r(e.target.checked)}})]})})};function Ge(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(Ye,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}var qe={gif:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAAQABAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAgEBAgICAgICAwICAgIDBAMDAwMDBAUEBAQEBAQFBQUFBQUFBQYGBgYGBgcHBwcHCAgICAgICAgICP/bAEMBAQEBAgICAwICAwgFBAUICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICP/dAAQAAf/aAAwDAQACEQMRAD8A/wA/+iiigD//2Q==",image:{dimensions:[1,1],frames:[new Uint8ClampedArray([0,0,0,255])]}};var Le=t(480),Xe=t(492),Je=t(467),Ze=function(e){var n=e.name,t=e.options,a=e.value,r=e.description,i=e.onChange;return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:r})]}),Object(C.jsx)(ke.a,{component:"fieldset",children:Object(C.jsx)(Le.a,{"aria-label":n,defaultValue:a,onChange:function(e){return i(e.target.value)},children:t.map((function(e){return Object(C.jsx)(Xe.a,{value:e.value,control:Object(C.jsx)(Je.a,{}),label:e.name},e.value)}))})})]})};function Ke(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(Ze,{name:e.name,value:n.value,options:e.options,description:e.description,onChange:function(e){return n.onChange(e)}})}}}var _e,$e=X({name:"Background Image",description:"Select another image to be used as a background or foreground",secondaryDescription:"If the selected image is animated, this will speed up/slow down the animation to match the original image",params:[(_e={name:"Image"},{name:_e.name,defaultValue:function(){return qe},fn:function(e){return Object(C.jsx)(It,{currentImage:e.value,width:64,height:64,onChange:e.onChange})}}),Ke({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),Ge({name:"Scale Image",defaultValue:!1,description:"If true, the new image will be scaled to fit the dimensions of the original image"})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,3),a=t[0],r=t[1],i=t[2],o=ye({image:a.image,newWidth:n.dimensions[0],newHeight:n.dimensions[1],keepScale:i});return xe(n,(function(e,t,a){var i=t/a,c=K({dimensions:n.dimensions,frame:e}),s=Math.floor(i*o.frames.length),u=K({dimensions:o.dimensions,frame:o.frames[s]});return ee({dimensions:n.dimensions,background:"background"===r?u:c,foreground:"background"===r?c:u})}))}}),en=X({name:"Blur",description:"Blurs the image",params:[Re({name:"Amount",defaultValue:2,min:0,max:20})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return xe(n,(function(e){return $({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{blur:t})}})}))}}),nn=X({name:"Bounce",description:"Make the image bounce up and down",params:[Fe({name:"Bounce Speed",description:"Positive number",defaultValue:function(e){return e?Math.floor(e.dimensions[1]/10):10},min:0})],fn:Ae((function(e){var n=e.animationProgress,t=Object(d.a)(e.parameters,1)[0];return{yOffset:Math.round(t*Math.sin(2*n*Math.PI))}}),(function(e){var n=e.computed.yOffset,t=Object(d.a)(e.coord,2),a=t[0],r=t[1];return(0,e.getSrcPixel)([a,r+n])}))}),tn=t(458),an=t(460),rn=t(461),on=X({name:"Bounce Animation",description:"When the animation finishes, it will be replayed in reverse",secondaryDescription:"This doubles the number of animation frames.",params:[],fn:function(e){var n=e.image;return{dimensions:n.dimensions,frames:Object(tn.a)(n.frames,Object(W.a)(n.frames,Object(an.a)(1),Object(rn.a)(),Object(an.a)(1)))}}}),cn=X({name:"Circle",description:"Make the image move in a circular pattern",params:[Fe({name:"Radius",description:"Positive number",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/10):10},min:0})],fn:Ae((function(e){var n=e.animationProgress,t=Object(d.a)(e.parameters,1)[0];return{xOffset:Math.round(t*Math.sin(-2*Math.PI*n)),yOffset:Math.round(t*Math.cos(-2*Math.PI*n))}}),(function(e){var n=e.computed,t=n.xOffset,a=n.yOffset,r=Object(d.a)(e.coord,2),i=r[0],o=r[1];return(0,e.getSrcPixel)([i+t,o+a])}))}),sn=t(493),un=function(e){var n=e.name,t=e.newParamText,a=e.createNewParam,r=e.value,i=e.description,c=e.onChange,s=o.a.useState(r.map((function(e){return{param:a(),pValue:e}}))),u=Object(d.a)(s,2),l=u[0],f=u[1];return Object(C.jsx)(v.a,{children:Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:i})]}),l.map((function(e,t){var a=e.param,r=e.pValue,i=a.fn({value:r,onChange:function(e){var n=l.map((function(n,r){return t===r?{param:a,pValue:e}:n}));f(n),c(n.map((function(e){return e.pValue})))}});return Object(C.jsxs)(p.a,{direction:"row",children:[Object(C.jsx)(sn.a,{onClick:function(){var e=l.filter((function(e,n){return n!==t}));f(e),c(e.map((function(e){return e.pValue})))},style:{visibility:0===t?"hidden":void 0},children:Object(C.jsx)(O.a,{children:"delete"})}),i]},"".concat(n,"-").concat(t))})),Object(C.jsx)(b.a,{variant:"contained",onClick:function(){var e=a(),n=[].concat(Object(H.a)(l),[{param:e,pValue:e.defaultValue()}]);f(n);var t=n.map((function(e){return e.pValue}));c(t)},children:t})]})})};function ln(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(un,{name:e.name,newParamText:e.newParamText,value:n.value,createNewParam:e.createNewParam,description:e.description,onChange:n.onChange})}}}var fn=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(se),mn=X({name:"Colors",description:"Make the image flash different colors of your choosing",secondaryDescription:"Increase the brightness to increase the effect",params:[Re({name:"Brightness Increase",defaultValue:0,min:0,max:100,step:5}),ln({name:"Colors",newParamText:"New Color",defaultValue:fn,createNewParam:function(){return He({name:"Color",defaultValue:fn[0]})}})],fn:Ae((function(e){var n=e.animationProgress,t=Object(d.a)(e.parameters,2),a=t[0],r=t[1];return{brightnessIncrease:a,chosenColor:r[Math.floor(n*r.length)]}}),(function(e){var n=e.computed,t=n.brightnessIncrease,a=n.chosenColor,r=e.coord,i=(0,e.getSrcPixel)(r);if(ue(i))return[0,0,0,0];var o=function(e){var n=Object(d.a)(e,3),t=n[0],a=n[1],r=n[2];return Math.round((t+a+r)/3)}(t>0?function(e,n){var t=n/100*128,a=Object(d.a)(e,4),r=a[0],i=a[1],o=a[2],c=a[3];return me([r+t,i+t,o+t,c])}(i,t):i);return[o*a[0]/255,o*a[1]/255,o*a[2]/255,255]}))}),dn=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(se),hn=X({name:"Colors Background",description:"Transparent pixels will flash different colors of your choosing",params:[ln({name:"Colors",newParamText:"New Color",defaultValue:dn,createNewParam:function(){return He({name:"Color",defaultValue:dn[0]})}}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,2),a=t[0],r=t[1];return xe(n,(function(e,t,i){var o=t/i,c=a[Math.floor(o*a.length)],s=100===r?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:r})}});return ee({dimensions:n.dimensions,background:Oe(n.dimensions,(function(){return c})),foreground:s})}))}}),pn=function(e){var n=e.name,t=e.value,a=e.description,r=e.parse,i=e.onChange,c=o.a.useState(t.toString()),s=Object(d.a)(c,2),u=s[0],l=s[1],f=o.a.useState(""),m=Object(d.a)(f,2),h=m[0],g=m[1];return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:a})]}),Object(C.jsxs)(ke.a,{children:[Object(C.jsx)(F.a,{error:!!h,value:u,onBlur:function(){if(u!==t.toString()){var e=r(u);e.valid?(g(""),i(e.value)):g(e.reason)}},onChange:function(e){l(e.target.value)}}),h&&Object(C.jsx)(Ie.a,{children:h})]})]})},gn=function(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){var t=e.min,a=e.max;return Object(C.jsx)(pn,{name:e.name,description:e.description,parse:function(e){var n=parseFloat(e);return isNaN(n)||n.toString()!==e?{valid:!1,reason:"Must be a number"}:void 0!==t&&n<t?{valid:!1,reason:"Must be greater than or equal to ".concat(t)}:void 0!==a&&n>a?{valid:!1,reason:"Must be less than or equal to ".concat(a)}:{valid:!0,value:n}},onChange:n.onChange,value:n.value})}}},jn=X({name:"Double Vision",description:"See double",params:[gn({name:"Amplitude",defaultValue:10,min:0})],fn:Ae((function(e){var n=e.animationProgress;return{xOffset:Object(d.a)(e.parameters,1)[0]*Math.sin(-2*Math.PI*n)}}),(function(e){var n=e.computed.xOffset,t=Object(d.a)(e.coord,2),a=t[0],r=t[1],i=a%2===0?-1:1;return(0,e.getSrcPixel)([a+Math.round(i*n),r])}))}),bn=X({name:"Expand",description:"Make the image grow and shrink",params:[Fe({name:"Radius",description:"Positive number",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/6):10},min:0})],fn:Ae((function(e){var n=Object(d.a)(e.dimensions,2),t=n[0],a=n[1],r=e.animationProgress,i=Object(d.a)(e.parameters,1)[0];return{dist:Math.cos(2*r*Math.PI)*i,centerX:t/2,centerY:a/2}}),(function(e){var n=e.computed,t=n.centerX,a=n.centerY,r=n.dist,i=Object(d.a)(e.dimensions,2),o=i[0],c=i[1],s=Object(d.a)(e.coord,2),u=s[0],l=s[1],f=(u-t)/o,m=(l-a)/c;return(0,e.getSrcPixel)([u-Math.floor(r*f),l-Math.round(r*m)])}))}),vn=X({disabled:!0,name:"Fill Transparent",description:"Makes transparent all pixels of similar color surrounding a point",params:[He({name:"Color to Make Transparent",defaultValue:[0,0,0,255]}),Re({name:"Tolerance",defaultValue:10,min:0,max:100})],fn:function(e){for(var n=e.image,t=Object(d.a)(e.parameters,2),a=t[0],r=t[1],i=function(e){return{dimensions:e.dimensions,frames:e.frames.map((function(e){return new Uint8ClampedArray(e)}))}}(n),o=0;o<i.frames.length;o+=1)xn({image:i,frameIndex:o,colorToReplace:a,newColor:de,tolerance:r});return i}}),xn=function(e){for(var n=e.image,t=e.frameIndex,a=e.colorToReplace,r=e.newColor,i=e.tolerance,o=function(){var e=new Set;return{add:function(n){var t=Object(d.a)(n,2),a=t[0],r=t[1];e.add("".concat(a,"-").concat(r))},has:function(n){var t=Object(d.a)(n,2),a=t[0],r=t[1];return e.has("".concat(a,"-").concat(r))}}}(),c=[[0,n.dimensions[1]-1]],s=function(e){o.has(e)||(o.add(e),c.push(e))};c.length>0;){var u=c.pop(),l=Object(d.a)(u,2),f=l[0],m=l[1];if(!(f<0||f>=n.dimensions[0]||m<0||m>=n.dimensions[1])){var h=ve(n.dimensions,n.frames[t],u);100*be(h,a)>i||(Se({image:n,frameIndex:t,color:r,coord:u}),s([f+1,m]),s([f-1,m]),s([f,m+m]),s([f,m-1]))}}},On=X({name:"Fisheye",description:"Make the image grow and shrink in a distorted fashion",params:[Fe({name:"Radius",description:"Positive Number",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/6):10},min:0})],fn:Ae((function(e){var n=e.animationProgress,t=Object(d.a)(e.dimensions,2),a=t[0],r=t[1];return{dist:(n<.5?n:1-n)*Object(d.a)(e.parameters,1)[0],centerX:a/2,centerY:r/2}}),(function(e){var n=e.computed,t=n.dist,a=n.centerX,r=n.centerY,i=Object(d.a)(e.coord,2),o=i[0],c=i[1],s=e.getSrcPixel,u=Math.atan2(r-c,a-o);return s([o+Math.round(t*Math.cos(u)),c+Math.round(t*Math.sin(u))])}))}),wn=X({name:"Grid",description:"Removes the color from all pixels not aligned with a grid",params:[Re({name:"Grid Size",description:"The length of each square in the grid",defaultValue:24,min:2,max:64,step:2}),Re({name:"Grid Angle",defaultValue:45,min:0,max:90})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=Object(d.a)(e.parameters,2),r=a[0],i=a[1],o=t(n),c=Object(d.a)(n,2),s=c[0],u=c[1],l=!1;if(i%90===0)l=s%r===0||u%r===0;else{var f=(64-r)/64*.1+.03,m=function(e){var n=1/r*(u-Math.tan(An(e))*s);return Math.abs(Math.round(n)-n)<f};l=m(i)||m(i+90)}return l?o:function(e,n){var t=Object(d.a)(e,4),a=t[0],r=t[1],i=t[2],o=t[3],c=ie.rgb.hsl(a,r,i),s=Object(d.a)(c,3),u=s[0],l=s[1],f=s[2],m=oe(Math.abs(n),l,n>=0?100:0),h=ie.hsl.rgb([u,m,f]),p=Object(d.a)(h,3);return[p[0],p[1],p[2],o]}(o,-100)}))}),An=function(e){return e*Math.PI/180},Cn=function(e){var n=e.name,t=e.value,a=e.description,r=e.onChange,i=o.a.useMemo((function(){return void 0===t?void 0:ce([].concat(Object(H.a)(ie.hsl.rgb([t,100,50])),[255]))}),[t]);return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:a})]}),Object(C.jsx)(De.a,{color:i,onChangeComplete:function(e){var n=e.hsl;return r(n.h)}})]})};function yn(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(Cn,{name:e.name,value:n.value,onChange:n.onChange})}}}var Sn=X({name:"Hue Change",description:"Change the hue of each pixel towards some other color",params:[yn({name:"Hue",defaultValue:180}),Re({name:"Amount",description:"How strong the effect is.",min:0,max:100,step:5,defaultValue:75})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=Object(d.a)(e.parameters,2),r=a[0],i=a[1];return he(t(n),r,i)}))}),kn=X({name:"Hue Shift",description:"Shift the hue of each pixel in the image by some amount",params:[Re({name:"Amount",description:"How much to shift the hue of each pixel",min:0,max:100,step:5,defaultValue:50})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=Object(d.a)(e.parameters,1)[0];return pe(t(n),a/100*360)}))}),In=X({name:"Hue Shift Pulse",description:"Shift the hue to the given value in a pulsating manner",params:[yn({name:"Hue",defaultValue:180})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=e.frameCount,r=e.frameIndex,i=Object(d.a)(e.parameters,1)[0],o=Math.abs(Math.sin(Math.PI*(r/a)));return he(t(n),i,360*o)}))}),Vn=X({name:"Hue Wave",description:"Shifts the hue of pixels in the image in a wave motion",params:[Re({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the hue shift effect should be"}),Re({name:"Period",defaultValue:1,min:1,max:20,description:"How many waves you want"})],fn:Ae((function(e){return{shift:-1*e.animationProgress*2*Math.PI}}),(function(e){var n=e.computed.shift,t=e.coord,a=Object(d.a)(e.dimensions,2)[1],r=Object(d.a)(e.parameters,2),i=r[0],o=r[1],c=e.getSrcPixel,s=Object(d.a)(t,2)[1],u=Math.round(i*Math.sin(s/a*o*Math.PI+n));return pe(c(t),u/100*360)}))}),Mn=function(e){var n=e.name,t=e.value,a=e.description,r=e.onChange,i=o.a.useState(t),c=Object(d.a)(i,2),s=c[0],u=c[1];return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:a})]}),Object(C.jsx)(ke.a,{children:Object(C.jsx)(F.a,{value:s,onChange:function(e){return u(e.target.value)},onBlur:function(){s.length>0&&r(s)}})})]})},En=function(e){return{name:e.name,defaultValue:L(e.defaultValue),fn:function(n){return Object(C.jsx)(Mn,{name:e.name,description:e.description,onChange:n.onChange,value:n.value})}}},Fn=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],Pn=X({name:"Lightning",description:"Make the background look like a thunderstorm",params:[En({name:"Random Seed",description:"Can be anything. Will determine the randomness of the lightning.",defaultValue:"lightning"})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0],a=Q()(t);return xe(n,(function(e){var t=a(),r=t<.9?0:t<.95?1:t<.98?2:3;return Oe(n.dimensions,(function(t){var a=ve(n.dimensions,e,t);if(ue(a))return Fn[r];if(r>0){var i=1.02*r;return[a[0]*i,a[1]*i,a[2]*i,a[3]]}return a}))}))}}),Bn=X({name:"Mirror",description:"Mirrors the image",params:[],fn:function(e){var n=e.image;return xe(n,(function(e){return $({dimensions:n.dimensions,frame:e,preEffect:function(e){return te(e,{horizontalScale:-1,horizontalTranslation:n.dimensions[0]})}})}))}}),Tn=X({name:"Nuke",description:"Oh no...",params:[],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=100*e.animationProgress,r=t(n),i=Object(d.a)(r,4),o=i[0],c=i[1],s=i[2],u=i[3],l=ie.rgb.hsl(o,c,s),f=Object(d.a)(l,3),m=f[0],h=f[1],p=f[2],g=ie.hsl.rgb([m,h,p>a?p:0]),j=Object(d.a)(g,3);return[j[0],j[1],j[2],p>a?u:0]}))}),Rn=X({name:"Opacity",description:"Sets the opacity of the image",secondaryDescription:"Because gifs do not support transparency, the preview below will not reflect the transparency accurately. It will apply to subsequent effects though.",params:[Re({name:"Amount",defaultValue:50,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return xe(n,(function(e){return $({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:t})}})}))}}),Nn=X({name:"Party",description:"Shift the hue of the image over the course of the animation",params:[Re({name:"Amount",description:"How strong the effect is",min:0,max:100,step:5,defaultValue:50}),Re({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=e.animationProgress,r=Object(d.a)(e.parameters,2),i=r[0],o=a*r[1]*360%360,c=t(n);return he(c,o,i)}))}),Dn=X({name:"Party Background",description:"Smoothly cycles through background colors over the course of the animation",params:[Re({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,2),a=t[0],r=t[1];return xe(n,(function(e,t,i){var o=je(t/i*a*360%360),c=100===r?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:r})}});return ee({dimensions:n.dimensions,background:Oe(n.dimensions,(function(){return o})),foreground:c})}))}}),zn=X({name:"Party Harder",description:"Shift the hue of each individual pixel over the course of the animation",params:[],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=e.animationProgress;return pe(t(n),360*a)}))}),Qn=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(se),Hn=X({name:"Pinwheel Colors",description:"Create a background pinwheel of colors of your choosing",params:[Re({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),ln({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:Qn,createNewParam:function(){return He({name:"Color",defaultValue:Qn[0]})}}),Fe({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),Fe({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){for(var n=e.image,t=Object(d.a)(e.parameters,5),a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=Object(d.a)(n.dimensions,2),u=s[0],l=s[1],f=r.length*a,m=Math.round(360/f),h=r.length;"00"!==(f/h).toFixed(2).slice(-2);)h-=1;var p=[u/2+i,l/2-o];return xe(n,(function(e,t,a){var i=t/a,o=Oe(n.dimensions,(function(e){var n=ge(e,p),t=Math.floor(n/m)%h,a=(Math.floor(i*h)+t)%h;return r[a]})),s=100===c?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:c})}});return ee({dimensions:n.dimensions,background:o,foreground:s})}))}}),Wn=X({name:"Pinwheel Rainbow",description:"Make the image look like a pinwheel rainbow",params:[Re({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Re({name:"Strength",min:0,max:100,step:5,defaultValue:75}),Fe({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),Fe({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:Ae((function(e){var n=Object(d.a)(e.dimensions,2),t=n[0],a=n[1],r=Object(d.a)(e.parameters,4);r[0],r[1];return{center:[t/2+r[2],a/2-r[3]]}}),(function(e){var n=e.computed.center,t=e.coord,a=e.animationProgress,r=e.getSrcPixel,i=Object(d.a)(e.parameters,2),o=i[0],c=i[1],s=r(t),u=ge(t,n);return he(s,(u*o+360*a)%360,c)}))}),Un=X({name:"Pinwheel Rainbow Background",description:"Create a background pinwheel of rainbow colors",params:[Re({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Fe({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),Fe({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,4),a=t[0],r=t[1],i=t[2],o=t[3];return xe(n,(function(e,t,c){var s=t/c,u=Object(d.a)(n.dimensions,2),l=u[0],f=u[1],m=[l/2+r,f/2-i],h=Oe(n.dimensions,(function(e){var n=ge(e,m);return je((n*a+360*s)%360)})),p=100===o?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:o})}});return ee({dimensions:n.dimensions,background:h,foreground:p})}))}}),Yn=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(se),Gn=X({name:"Radiance Colors",description:"Radiate background colors of your choosing out in rings",params:[Re({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),ln({name:"Colors",newParamText:"New Color",description:"The colors that make up each ring",defaultValue:Yn,createNewParam:function(){return He({name:"Color",defaultValue:Yn[0]})}}),Fe({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),Fe({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,5),a=t[0],r=t[1],i=t[2],o=t[3],c=t[4];return xe(n,(function(e,t,s){var u=t/s,l=Object(d.a)(n.dimensions,2),f=l[0],m=l[1],h=Object(re.a)(0,a).flatMap((function(){return r})),p=f/2,g=m/2,j=Oe(n.dimensions,(function(e){var n=Object(d.a)(e,2),t=n[0],a=n[1],r=t-p-i,c=a-g+o,s=Math.sqrt(f/2*(f/2)+m/2*(m/2)),l=Math.sqrt(c*c+r*r),j=Math.floor((1-l/s)*h.length)%h.length,b=(Math.floor(u*h.length)+j)%h.length;return h[b]})),b=100===c?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:c})}});return ee({dimensions:n.dimensions,background:j,foreground:b})}))}}),qn=X({name:"Radiance Rainbow",description:"Radiate rainbow colors out in rings",params:[Re({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Re({name:"Strength",min:0,max:100,step:5,defaultValue:75}),Fe({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),Fe({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:Ae((function(e){var n=Object(d.a)(e.dimensions,2),t=n[0],a=n[1];return{centerX:t/2,centerY:a/2,maxDist:Math.sqrt(t/2*(t/2)+a/2*(a/2))}}),(function(e){var n=e.computed,t=n.centerX,a=n.centerY,r=n.maxDist,i=e.coord,o=e.animationProgress,c=Object(d.a)(e.parameters,4),s=c[0],u=c[1],l=c[2],f=c[3],m=(0,e.getSrcPixel)(i),h=Object(d.a)(i,2),p=h[0]-t-l,g=h[1]-a+f,j=Math.sqrt(g*g+p*p);return he(m,(360*(1-j/r)*s+360*o)%360,u)}))}),Ln=X({name:"Radiance Rainbow Background",description:"Radiate rainbow colors out in rings",params:[Re({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Fe({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),Fe({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0}),Re({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,4),a=t[0],r=t[1],i=t[2],o=t[3];return xe(n,(function(e,t,c){var s=t/c,u=Object(d.a)(n.dimensions,2),l=u[0],f=u[1],m=l/2,h=f/2,p=Math.sqrt(l/2*(l/2)+f/2*(f/2)),g=Oe(n.dimensions,(function(e){var n=Object(d.a)(e,2),t=n[0],o=n[1],c=t-m-r,u=o-h+i,l=Math.sqrt(u*u+c*c);return je((360*(1-l/p)*a+360*s)%360)})),j=100===o?e:$({dimensions:n.dimensions,frame:e,preEffect:function(e){return ne(e,{opacity:o})}});return ee({dimensions:n.dimensions,background:g,foreground:j})}))}}),Xn=t(463),Jn=X({name:"Reduce Color Palette",description:"Reduce the number of unique colors in the gif, to reduce the file size.",secondaryDescription:"This can be a slow operation depending on the number of final colors",params:[Re({name:"Percent Reduction",description:"0% will have no effect, 100% will result in just one unique color in the result",defaultValue:70,min:0,max:100})],fn:Ae((function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0],a=new Set;xe(n,(function(e){return Oe(n.dimensions,(function(t){var r=ve(n.dimensions,e,t);return a.add(ce(r)),de}))}));for(var r=Array.from(a).map(se),i=Math.max(Math.floor(r.length*(100-t)/100),1),o=r.map((function(e){return{color:e,numClosestColors:0}})),c=1;c<r.length;c+=1){for(var s=0,u=be(r[c],r[s]),l=0;l<r.length;l+=1)if(l!==c){var f=be(r[l],r[c]);f<u&&(s=l,u=f)}o[s].numClosestColors+=1}return{colorPalette:Object(U.a)(o,[function(e){return e.numClosestColors},"desc"]).slice(0,i).map((function(e){return e.color}))}}),(function(e){var n=e.coord,t=e.getSrcPixel,a=e.computed.colorPalette,r=t(n);return Object(Xn.a)(a,(function(e){return be(e,r)}))}))}),Zn=X({name:"Repeat Animation",description:"Repeats the current animation some number of times",secondaryDescription:"This can greatly increase the final file size!",params:[Re({name:"Number of Repeats",defaultValue:1,min:1,max:50})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return{dimensions:n.dimensions,frames:Object(re.a)(0,n.frames.length*(t+1)).map((function(e){return n.frames[e%n.frames.length]}))}}}),Kn=X({name:"Resize Image",description:"Change the absolute dimensions of the image.",params:[Fe({name:"Width",description:"Set to 0 when height is set to non-zero to keep the same aspect ratio",defaultValue:function(e){return e?e.dimensions[0]:0},min:0}),Fe({name:"Height",description:"Set to 0 when width is set to non-zero to keep the same aspect ratio",defaultValue:function(e){return e?e.dimensions[1]:0},min:0}),Ge({name:"Keep scale",description:"If checked, the image will be stretched to fit the new dimensions",defaultValue:!1})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,3),a=t[0],r=t[1],i=t[2],o=Object(d.a)(n.dimensions,2),c=o[0],s=o[1],u=0===a?Math.ceil(c/s*r):a,l=0===r?Math.ceil(s/c*a):r;return ye({image:n,newWidth:u,newHeight:l,keepScale:i})}}),_n=X({name:"Reverse Animation",description:"Reverses the animation",params:[],fn:function(e){var n=e.image;return{dimensions:n.dimensions,frames:Object(rn.a)(n.frames)}}}),$n=X({name:"Ripple",description:"Create a ripple effect, like water",params:[Re({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the ripple effect should be"}),Re({name:"Period",defaultValue:1,min:1,max:20,description:"How many ripples you want"})],fn:Ae((function(e){return{shift:2*e.animationProgress*Math.PI}}),(function(e){var n=e.computed.shift,t=Object(d.a)(e.coord,2),a=t[0],r=t[1],i=Object(d.a)(e.dimensions,2)[1],o=Object(d.a)(e.parameters,2),c=o[0],s=o[1];return(0,e.getSrcPixel)([a+Math.round(c*Math.sin(r/i*s*Math.PI+n)),r])}))}),et=X({name:"Rotate",description:"Rotes the image to a given angle",params:[Re({name:"Angle",defaultValue:0,min:0,max:360,step:5,description:"The angle in degrees. 0 degrees points to the right, 90 degrees points up."})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return xe(n,(function(e){return $({dimensions:n.dimensions,frame:e,preEffect:function(e){return ae(e,t)}})}))}}),nt=X({name:"Roxbury",description:"Baby, don't hurt me",params:[],fn:Ae((function(e){var n=Object(d.a)(e.dimensions,2),t=n[0],a=n[1],r=e.animationProgress,i=Math.floor(4*r),o=4*(r-i/4),c=Math.PI/2*.2,s=0===i?0:1===i?o*c:2===i?c:(1-o)*c;return{angle:s,cos:Math.cos(1.35*-s),sin:Math.sin(1.35*-s),rotatePointX:.25*t,rotatePointY:.7*a}}),(function(e){var n=e.computed,t=n.angle,a=n.cos,r=n.sin,i=n.rotatePointX,o=n.rotatePointY,c=Object(d.a)(e.coord,2),s=c[0],u=c[1],l=e.getSrcPixel,f=Math.floor(s-i+8*Math.sin(t)),m=Math.floor(u-o+8*Math.cos(t));return l([Math.round(i+f*a-m*r),Math.round(o+m*a+f*r)])}))}),tt=X({name:"Scale Image",description:"Scale the image without changing the dimensions",params:[Re({name:"Scale",min:.1,max:3,step:.1,defaultValue:1})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return function(e){var n=e.image,t=e.horizontalScale,a=e.verticalScale,r=Object(d.a)(n.dimensions,2),i=r[0],o=r[1],c=i/2*(null!==t&&void 0!==t?t:1)-i/2,s=o/2*(null!==a&&void 0!==a?a:1)-o/2;return xe(n,(function(e){return $({dimensions:n.dimensions,frame:e,preEffect:function(e){return te(e,{horizontalScale:t,verticalScale:a,horizontalTranslation:-c,verticalTranslation:-s})}})}))}({image:n,horizontalScale:t,verticalScale:t})}}),at=X({name:"Set Animation Length",description:"Change the length of the animation.",params:[Re({name:"Number of Frames",description:"Set how many frames of animation there will be.",defaultValue:function(e){return e?e.frames.length:1},min:1,max:60})],fn:function(e){return function(e,n){var t=e.frames;return{dimensions:e.dimensions,frames:Object(re.a)(0,n).map((function(e){var a=Math.floor(e/n*t.length);return t[a]}))}}(e.image,Object(d.a)(e.parameters,1)[0])}}),rt=X({name:"Shake",description:"Make the image shake left and right",params:[gn({name:"Amplitude",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/10):10},min:0})],fn:Ae((function(e){var n=e.animationProgress,t=Object(d.a)(e.parameters,1)[0];return{xOffset:Math.round(t*Math.cos(2*n*Math.PI))}}),(function(e){var n=e.computed.xOffset,t=Object(d.a)(e.coord,2),a=t[0],r=t[1];return(0,e.getSrcPixel)([a+n,r])}))}),it=X({name:"Slow Animation",description:"Attempts to slow the animation by adding intermediate frames",secondaryDescription:"This will make the final filze size larger",params:[Ke({name:"Interpolation Type",options:[{name:"Basic",value:"basic"},{name:"Smooth",value:"smooth"}],defaultValue:"basic",description:"With basic interpolation, frames are simply duplicated. With smooth interpolation, intermediate frames are the average of their surrounding frames."})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return{dimensions:n.dimensions,frames:Object(re.a)(0,2*n.frames.length-1).map((function(e){if(e%2===0)return n.frames[e/2];var a=(e-1)/2;return"basic"===t?n.frames[a]:Oe(n.dimensions,(function(e){var t=ve(n.dimensions,n.frames[a],e),r=Object(d.a)(t,4),i=r[0],o=r[1],c=r[2],s=r[3],u=ve(n.dimensions,n.frames[a+1],e),l=Object(d.a)(u,4);return[(i+l[0])/2,(o+l[1])/2,(c+l[2])/2,(s+l[3])/2]}))}))}}}),ot=X({name:"Spin",description:"Make the image rotate about the center point in an animation",params:[Ke({name:"Direction",defaultValue:"clockwise",options:[{name:"Clockwise",value:"clockwise"},{name:"Counter-Clockwise",value:"counter"}]})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,1)[0];return xe(n,(function(e,a,r){var i=("counter"===t?1:-1)*a/r*360;return $({dimensions:n.dimensions,frame:e,preEffect:function(e){return ae(e,i)}})}))}}),ct=X({name:"Static",description:"Adds random static to each frame the image",params:[Ke({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),Re({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=Object(d.a)(e.parameters,2),r=a[0],i=a[1],o=e.random,c=t(n),s=ue(c);if("foreground"===r?s:!s)return c;if(s&&"background"===r){var u=Math.ceil(100*o())<i,l=Math.ceil(255*o());return u?[l,l,l,255]:c}var f=Math.ceil(100*o())<i,m=Math.ceil(255*o());return f?[m,m,m,c[3]]:c}))}),st=t(470),ut=t(475),lt=function(e){var n=e.name,t=e.options,a=e.value,r=e.description,i=e.onChange;return Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsxs)(p.a,{direction:"row",spacing:1,children:[Object(C.jsx)(j.a,{variant:"body2",children:n}),Object(C.jsx)(Me,{description:r})]}),Object(C.jsx)(ke.a,{children:Object(C.jsx)(st.a,{autoWidth:!0,value:a,onChange:function(e){return i(e.target.value)},children:t.map((function(e){return Object(C.jsx)(ut.a,{value:e.value,children:e.name},e.value)}))})})]})};var ft,mt=["Arial","Verdana","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"],dt=X({name:"Text",description:"Puts text on the image",params:[En({name:"Text",description:"The text to put on the image",defaultValue:""}),(ft={name:"Font",defaultValue:mt[0],options:mt.map((function(e){return{name:e,value:e}}))},{name:ft.name,defaultValue:L(ft.defaultValue),fn:function(e){return Object(C.jsx)(lt,{name:ft.name,value:e.value,options:ft.options,description:ft.description,onChange:e.onChange})}}),Fe({name:"X",defaultValue:0}),Fe({name:"Y",defaultValue:0}),Fe({name:"Size",defaultValue:12,min:8}),He({name:"Color",defaultValue:se("#000000")})],fn:function(e){var n=e.image,t=Object(d.a)(e.parameters,6),a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5];return xe(n,(function(e){return $({dimensions:n.dimensions,frame:e,postEffect:function(e){var n=e.ctx;n.font="".concat(c,"px ").concat(r),n.fillStyle=ce(s),n.fillText(a,i,o)}})}))}}),ht=X({name:"Transparency",description:"Set certain pixels to be transparent",params:[Ge({name:"Matches are Transparent",description:"If checked, then pixels matching this color will be made transparent. If not checked, non-matching pixels are transparent.",defaultValue:!0}),He({name:"Color",defaultValue:se("#000000")}),Re({name:"Tolerance",description:'A higher number will mean colors that are "close" to the chosen color will be transparent. (0 - 100)',defaultValue:10,min:0,max:100})],fn:we((function(e){var n=e.coord,t=e.getSrcPixel,a=Object(d.a)(e.parameters,3),r=a[0],i=a[1],o=a[2],c=t(n),s=100*be(c,i)<=o;return(r?s:!s)?[c[0],c[1],c[2],0]:c}))}),pt=X({name:"Transpose",description:"Move the image left or right, up or down",params:[Fe({name:"X",defaultValue:0}),Fe({name:"Y",defaultValue:0})],fn:we((function(e){var n=Object(d.a)(e.coord,2),t=n[0],a=n[1],r=e.getSrcPixel,i=Object(d.a)(e.parameters,2);return r([t+i[0],a+i[1]])}))}),gt=Object(W.a)([We,$e,en,nn,on,cn,mn,hn,jn,bn,vn,On,wn,Sn,kn,In,Vn,Pn,Bn,Tn,Rn,Nn,Dn,zn,Hn,Wn,Un,Gn,qn,Ln,Jn,Zn,Kn,_n,$n,et,nt,tt,rt,it,ot,ct,dt,ht,pt],Object(U.a)((function(e){return e.name})),Object(Y.a)((function(e){return e.disabled}))),jt=[at,Ne].concat(Object(H.a)(gt)),bt=function(e){var n=jt.find((function(n){return n.name===e}));return G(n,"Could not find matching effect: ".concat(e)),n},vt=function(){var e=Object(m.a)(f.a.mark((function e(n){var t,a,r,i,o,c,s,u,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.image,a=n.effectInput,r=n.randomSeed,i=n.fps,o=Q()(r),c=bt(a.effectName),e.next=5,c.fn({image:t,parameters:a.params,random:o});case 5:return s=e.sent,u=At(s,o),e.next=9,Ot({image:xt(s,u),transparentColor:u,fps:i});case 9:return l=e.sent,e.abrupt("return",{gif:l,image:s});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),xt=function(e,n){var t=e.frames.map((function(e){for(var t=new Uint8ClampedArray(e.length),a=0;a<e.length;a+=4)n&&e[a+3]<128?(t[a]=n[0],t[a+1]=n[1],t[a+2]=n[2],t[a+3]=0):(t[a]=e[a],t[a+1]=e[a+1],t[a+2]=e[a+2],t[a+3]=0);return t}));return{dimensions:e.dimensions,frames:t}},Ot=function(){var e=Object(m.a)(f.a.mark((function e(n){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.image,a=n.transparentColor,r=n.fps,e.abrupt("return",new Promise((function(e){var n=Object(d.a)(t.dimensions,2),i=n[0],o=n[1],c=new D.a(i,o);if(c.setFrameRate(r),c.setRepeat(0),c.writeHeader(),a){var s=ce(a).slice(1);c.setTransparent("0x".concat(s))}var u=[];c.on("data",(function(e){u.push(e)})),c.on("end",Object(m.a)(f.a.mark((function n(){var t,a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new Blob(u,{type:"image/gif"}),n.next=3,yt(t);case 3:a=n.sent,e(a);case 5:case"end":return n.stop()}}),n)})))),t.frames.forEach((function(e){c.addFrame(e)})),c.finish()})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),wt=function(e){return new Promise((function(n,t){return R()(e,(function(e,a){if(e)return t(e);if(3===a.shape.length){var r=Object(d.a)(a.shape,2),i=r[0],o=r[1];return n({frames:[Uint8ClampedArray.from(a.data)],dimensions:[i,o]})}for(var c=Object(d.a)(a.shape,3),s=c[0],u=c[1],l=c[2],f=u*l*4,m=[],h=0;h<s;h+=1){var p=a.data.subarray(h*f,(h+1)*f);m.push(Uint8ClampedArray.from(p))}return n({frames:m,dimensions:[u,l]})}))}))},At=function(e,n){var t=!1,a=new Set,r=Object(d.a)(e.dimensions,2),i=r[0],o=r[1],c=ce([0,255,0,255]);return e.frames.forEach((function(r){for(var s=0;s<o;s+=1)for(var u=0;u<i;u+=1){var l=ve(e.dimensions,r,[u,s]);if(ue(l))t=!0;else{var f=ce(l);a.add(f),f===c&&(c=Ct(n,a))}}})),t?se(c):void 0},Ct=function e(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=ce(le(n));return a>2e3?r:t.has(r)?e(n,t,a+1):r},yt=function(e){return new Promise((function(n){var t=new FileReader;t.onload=function(){return n(t.result)},t.readAsDataURL(e)}))},St=function(e){if(null==e)return{maxWidth:"300px",maxHeight:"300px"};var n=Object(d.a)(e,2),t=n[0],a=n[1],r=a/t;if(t>a){var i=300*r;return{maxWidth:"".concat(300,"px"),maxHeight:"".concat(i,"px")}}var o=1/r*300;return{maxHeight:"".concat(300,"px"),maxWidth:"".concat(o,"px")}},kt=function(e){var n=e.src,t=e.alt,a=e.dimensions;return Object(C.jsx)("img",{src:n,alt:"gif-".concat(t),style:St(a)})},It=function(e){var n=e.currentImage,t=e.onChange,a=o.a.useState(),r=Object(d.a)(a,2),i=r[0],c=r[1];return Object(C.jsxs)(p.a,{spacing:2,children:[Object(C.jsx)(p.a,{direction:"row",children:Object(C.jsx)(F.a,{label:"URL",variant:"outlined",error:!!i,helperText:null!==i&&void 0!==i?i:"Only supports static images",onBlur:function(){var e=Object(m.a)(f.a.mark((function e(n){var a,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.value,e.prev=1,c(void 0),/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(a)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,B(a);case 7:return r=e.sent,e.next=10,wt(r);case 10:i=e.sent,t({gif:r,image:i}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),c("Error importing url");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}()})}),Object(C.jsx)(P.a,{children:"OR"}),Object(C.jsxs)(b.a,{startIcon:Object(C.jsx)(O.a,{children:"image"}),sx:{maxWidth:"300px"},variant:"contained",component:"label",children:["Upload an Image",Object(C.jsx)("input",{type:"file",hidden:!0,accept:"image/png,image/jpg,image/jpeg,image/gif",name:"source-png",onChange:function(){var e=Object(m.a)(f.a.mark((function e(n){var a,r,i,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.from(null!==(a=n.target.files)&&void 0!==a?a:[]),!(i=r[0])){e.next=10;break}return e.next=5,yt(i);case 5:return o=e.sent,e.next=8,wt(o);case 8:c=e.sent,t({gif:o,image:c});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),n&&Object(C.jsx)(kt,{src:n.gif,dimensions:n.image.dimensions,alt:"Source"})]})},Vt=t(498),Mt=t(207),Et=t(153),Ft=t(47),Pt=(t(399),t(400),t(495)),Bt=t(496),Tt=t(466),Rt=t(497),Nt=t(499),Dt=t(205),zt=null!=new(t.n(Dt).a)(window.navigator.userAgent).mobile(),Qt=window.ENV,Ht="DEV"===Qt?console.log:function(){};function Wt(){return new Worker(t.p+"static/js/effect.worker.531aab8b.worker.js")}var Ut=new Map,Yt=function(e){return function(n){var t=Ut.get(e);t&&(t.reject(n),Ut.delete(e))}},Gt=zt||"DEV"===Qt?vt:function(e){return new Promise((function(n,t){var a=new Wt,r="".concat(Date.now(),"-").concat(Math.floor(1e5*Math.random()));Ut.set(r,{resolve:n,reject:t}),a.addEventListener("error",Yt(r)),a.addEventListener("messageerror",Yt(r)),a.onmessage=function(e){var n=e.data;"complete"===n.status&&function(e,n){var t=Ut.get(e);t&&(t.resolve(n),Ut.delete(e))}(r,n.result)},a.postMessage(e)}))},qt=function(){var e=Object(m.a)(f.a.mark((function e(n){var t,a,r,i,o,c,s,u,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state,a=n.startEffectIndex,r=n.onCompute,G(t.baseImage,"No source image, this button should be disabled!"),0===a?i=t.baseImage.image:(G("done"===(o=t.effects[a-1].state).status,"We should not be starting with this effect if the previous is not done computing"),i=o.image.image),c=a;case 4:if(!(c<t.effects.length)){e.next=16;break}return s=Date.now(),u=t.effects[c],e.next=9,Gt({randomSeed:t.baseImage.gif,image:i,effectInput:{effectName:u.effectName,params:u.paramsValues},fps:t.fps});case 9:l=e.sent,ga("send",{hitType:"timing",timingCategory:"computeStep",timingVar:u.effectName,timingValue:Math.ceil((Date.now()-s)/1e3)}),i=l.image,r(l,c);case 13:c+=1,e.next=4;break;case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Lt=o.a.createContext({latestRunIdRef:null}),Xt=function(e){var n=e.children,t=o.a.useRef(0);return Object(C.jsx)(Lt.Provider,{value:{latestRunIdRef:t},children:n})};function Jt(e){var n=e.onComplete,t=e.onError,a=o.a.useContext(Lt).latestRunIdRef,r=o.a.useCallback((function(e,t){Ht("Finished",{runId:e,latestRunIdRef:a}),e===a.current?n(t):Ht("Throwing away an old compute")}),[n,a]);return o.a.useCallback((function(e){var n=Math.floor(1e5*Math.random());Ht("Computing: ",{runId:n,args:e}),a.current=n,Gt(e).then((function(e){return r(n,e)})).catch(t)}),[t,r,a])}var Zt=function(e){var n=e.open,t=e.initialImage,a=e.currentEffect,r=e.possibleEffects,i=e.currFps,c=e.currRandomSeed,s=e.onChangeEffect,l=e.onCancel,f=o.a.useState({computing:!0}),m=Object(d.a)(f,2),h=m[0],v=m[1],x=Jt({onComplete:function(e){v({computing:!1,results:e})}}),O=o.a.useState(!1),w=Object(d.a)(O,2),A=w[0],y=w[1],S=o.a.useState(void 0),k=Object(d.a)(S,2),I=k[0],V=k[1],M=o.a.useState(!1),E=Object(d.a)(M,2),P=E[0],B=E[1];o.a.useEffect((function(){a&&V({effectName:a.effectName,params:Object(H.a)(a.params)})}),[a]),o.a.useEffect((function(){n||(y(!1),V(void 0),v({computing:!0}))}),[n]),o.a.useEffect((function(){if(t)return A?void 0:(Ht("Initial loading"),v({computing:!1,results:t}),void y(!0))}),[t]),o.a.useEffect((function(){t&&I&&(v({computing:!0}),x({fps:i,randomSeed:c,image:t.image,effectInput:I}))}),[t,I,i,c]);var T=function(e){e.save&&I?(s(I,h.computing?void 0:h.results),B(!1)):l()},R=null==I?void 0:bt(I.effectName);return Object(C.jsx)(Pt.a,{fullWidth:!0,maxWidth:"sm",open:n,children:I&&R&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Bt.a,{children:Object(C.jsx)(p.a,{direction:"row",spacing:4,marginTop:2,children:Object(C.jsx)(ke.a,{fullWidth:!0,children:Object(C.jsx)(Tt.a,{disableClearable:!0,value:I.effectName,options:r.map((function(e){return e.name})),onChange:function(e,n){var a=bt(n);V({effectName:a.name,params:a.params.map((function(e){var n;return e.defaultValue(null!==(n=null===t||void 0===t?void 0:t.image)&&void 0!==n?n:void 0)}))}),B(!0)},renderOption:function(e,n){return Object(C.jsx)("li",Object(u.a)(Object(u.a)({},e),{},{children:Object(C.jsxs)(p.a,{marginLeft:2,marginRight:2,children:[Object(C.jsx)(j.a,{variant:"body1",children:n}),Object(C.jsx)(j.a,{variant:"caption",marginLeft:2,children:bt(n).description})]})}))},renderInput:function(e){return Object(C.jsx)(F.a,Object(u.a)(Object(u.a)({},e),{},{label:"Effect"}))}})})})}),Object(C.jsx)(Rt.a,{children:Object(C.jsxs)(p.a,{divider:Object(C.jsx)(g.a,{}),spacing:2,children:[Object(C.jsxs)(j.a,{variant:"body2",children:[R.description,Object(C.jsx)("div",{children:R.secondaryDescription&&Object(C.jsx)(j.a,{variant:"caption",marginLeft:2,children:R.secondaryDescription})})]}),R.params.map((function(e,n){var t=e.fn({value:I.params[n],onChange:function(e){B(!0),V(Object(u.a)(Object(u.a)({},I),{},{params:q(I.params,n,(function(){return e}))}))}});return Object(C.jsx)(o.a.Fragment,{children:t},"".concat(I.effectName,"-").concat(e.name))})),Object(C.jsx)(p.a,{sx:{height:300},children:h.computing?Object(C.jsx)(Vt.a,{size:100}):Object(C.jsx)(kt,{src:h.results.gif,alt:"effect-".concat(I.effectName),dimensions:h.results.image.dimensions})})]})}),Object(C.jsxs)(Nt.a,{children:[Object(C.jsx)(b.a,{variant:"outlined",autoFocus:!0,onClick:function(){T({save:!1})},children:"Cancel"}),Object(C.jsx)(b.a,{variant:"contained",autoFocus:!0,disabled:!P,onClick:function(){T({save:!0})},children:"Save and Close"})]})]})})},Kt=function(e){var n=e.effect,t=e.index,a=e.totalEffects,r=e.onEdit,i=e.onDelete,c=e.onMoveBefore,s=e.onMoveAfter,u=e.onAddBefore,l=o.a.useState(null),f=Object(d.a)(l,2),m=f[0],h=f[1],g=null!=m,v=function(){h(null)};return Object(C.jsxs)(p.a,{alignItems:"center",margin:2,children:[Object(C.jsx)(p.a,{children:Object(C.jsx)(j.a,{variant:"subtitle1",fontWeight:"bold",marginLeft:2,marginBottom:1,children:n.effectName})}),"done"===n.state.status?Object(C.jsx)(p.a,{sx:{width:250},children:Object(C.jsx)(kt,{src:n.state.image.gif,alt:"".concat(n.effectName,"-").concat(t),dimensions:n.state.image.image.dimensions})}):Object(C.jsx)(Vt.a,{size:100}),Object(C.jsx)(b.a,{startIcon:Object(C.jsx)(y,{name:"list"}),onClick:function(e){h(e.currentTarget)},variant:"contained",style:{marginTop:12},children:"Edit"}),Object(C.jsxs)(Mt.a,{open:g,anchorEl:m,onClose:v,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:[Object(C.jsx)(ut.a,{onClick:function(){v(),r()},children:"Edit effect"}),t>0&&Object(C.jsx)(ut.a,{onClick:function(){v(),c()},children:"Move effect to the left"}),t<a-1&&Object(C.jsx)(ut.a,{onClick:function(){v(),s()},children:"Move effect to the right"}),Object(C.jsx)(ut.a,{onClick:function(){v(),u()},children:"Insert new effect before"}),Object(C.jsx)(ut.a,{onClick:function(){v(),i()},children:"Delete Effect"})]})]})},_t=function(e){var n=e.appState,t=e.possibleEffects,a=e.onEffectsChange,r=n.effects,i=o.a.useState({open:!1}),c=Object(d.a)(i,2),s=c[0],u=c[1],l=o.a.useState(),f=Object(d.a)(l,2),m=f[0],h=f[1],g=o.a.useState(),v=Object(d.a)(g,2),x=v[0],O=v[1];o.a.useEffect((function(){n.baseImage&&(null===x||void 0===x?void 0:x.gif)!==n.baseImage.gif&&O(x)}),[n,x]);var w=o.a.useMemo((function(){if(s.open){var e=r[s.idx-1];return e?"done"===e.state.status?e.state.image:void 0:n.baseImage}}),[n,r,s]),A=o.a.useMemo((function(){if(s.open){var e=r[s.idx];return{effectName:e.effectName,params:e.paramsValues}}}),[s,r]);return Object(C.jsxs)(p.a,{spacing:4,children:[Object(C.jsx)(Zt,{open:s.open,possibleEffects:t,onChangeEffect:function(e,n){s.open&&(a(q(r,s.idx,(function(){return{effectName:e.effectName,paramsValues:e.params,state:n?{status:"done",image:n}:{status:"init"}}}))),u({open:!1}))},onCancel:function(){s.open&&s.isNew&&a(r.slice(0,r.length-1)),u({open:!1})},initialImage:w,currentEffect:A,currFps:n.fps,currRandomSeed:"partymoji"}),Object(C.jsx)(j.a,{variant:"h5",children:"Image Effects"}),Object(C.jsx)(p.a,{direction:"row",children:Object(C.jsx)(Et.a,{navigation:!0,modules:[Ft.b,Ft.a],controller:{control:m},onSwiper:h,children:r.map((function(e,n){return Object(C.jsxs)(Et.b,{children:[n+1," of ",r.length,Object(C.jsx)(Kt,{effect:e,index:n,totalEffects:r.length,onDelete:function(){return e=n,a(r.filter((function(n,t){return t!==e})));var e},onEdit:function(){return u({open:!0,idx:n,isNew:!1})},onAddBefore:function(){a([{effectName:t[0].name,paramsValues:t[0].params.map((function(e){var t=void 0;if(0===n)t=null===x||void 0===x?void 0:x.image;else{var a=r[n-1];"done"===a.state.status&&(t=a.state.image.image)}return e.defaultValue(t)})),state:{status:"init"}}].concat(Object(H.a)(r))),u({open:!0,idx:n,isNew:!0})},onMoveBefore:function(){return e=n,a(r.map((function(n,t){return t===e-1?r[t+1]:e===t?r[e-1]:n})));var e},onMoveAfter:function(){return e=n,a(r.map((function(n,t){return t===e+1?r[t-1]:e===t?r[e+1]:n})));var e}})]},function(e,n){return"".concat(e.effectName,"-").concat(n,"-").concat("done"===e.state.status?e.state.image.gif.substring(0,10):"pending")}(e,n))}))})}),Object(C.jsx)(b.a,{variant:"contained",startIcon:Object(C.jsx)(y,{name:"add"}),size:"large",onClick:function(){a([].concat(Object(H.a)(r),[{effectName:t[0].name,paramsValues:t[0].params.map((function(e){var n=void 0;if(0===r.length)n=null===x||void 0===x?void 0:x.image;else{var t=r[r.length-1];"done"===t.state.status&&(n=t.state.image.image)}return e.defaultValue(n)})),state:{status:"init"}}])),setTimeout((function(){return null===m||void 0===m?void 0:m.slideTo(r.length+1)}),50),u({open:!0,idx:r.length,isNew:!0})},children:"Append New Effect"})]})},$t="partymoji-state",ea=function(){var e=Object(m.a)(f.a.mark((function e(){var n,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=window.localStorage.getItem($t))){e.next=20;break}if(t=JSON.parse(n),!Array.isArray(t.effects)){e.next=20;break}if(e.t0=u.a,e.t1=Object(u.a)({},t),e.t2={},"string"!==typeof t.baseImage){e.next=16;break}return e.t4=t.baseImage,e.next=12,wt(t.baseImage);case 12:e.t5=e.sent,e.t3={gif:e.t4,image:e.t5},e.next=17;break;case 16:e.t3=void 0;case 17:return e.t6=e.t3,e.t7={baseImage:e.t6},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t7));case 20:e.next=25;break;case 22:e.prev=22,e.t8=e.catch(0),console.error("Error loading state from local storage",e.t8.stack||e.t8);case 25:return e.abrupt("return",void 0);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),na=function(e){try{window.localStorage.setItem($t,aa(e))}catch(n){console.error("Error saving state to local storage",n.stack||n)}},ta=function(){try{window.localStorage.removeItem($t)}catch(e){console.error("Error clearing state from local storage",e.stack||e)}},aa=function(e){var n,t=Object(u.a)(Object(u.a)({},e),{},{baseImage:null===(n=e.baseImage)||void 0===n?void 0:n.gif,effects:e.effects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{state:{status:"init"}})}))});return JSON.stringify(t)},ra=t(476),ia=t(469),oa=o.a.createContext({alert:null,setAlert:function(){throw new Error("Context not initialized")}}),ca=function(e){var n=e.children,t=o.a.useState(null),a=Object(d.a)(t,2),r=a[0],i=a[1];return Object(C.jsx)(oa.Provider,{value:{alert:r,setAlert:i},children:n})},sa=function(){var e=o.a.useContext(oa),n=e.alert,t=e.setAlert;return Object(C.jsx)(ra.a,{open:null!=n,children:null==n?void 0:Object(C.jsx)(ia.a,{severity:n.severity,onClose:function(){return t(null)},children:n.message})})},ua=Re({name:"Final Gif Frames per Second",defaultValue:20,min:1,max:60}),la={version:5,effects:[],baseImage:void 0,fps:20},fa=function(){var e=o.a.useState(la),n=Object(d.a)(e,2),t=n[0],a=n[1],r=o.a.useState({compute:!1}),i=Object(d.a)(r,2),c=i[0],s=i[1],l=o.a.useState(null),v=Object(d.a)(l,2),O=v[0],w=v[1],A=o.a.useContext(oa).setAlert;o.a.useEffect((function(){zt&&A({severity:"warning",message:"This app is not well optimized for mobile. Your experience may not be great."})}),[A]),o.a.useEffect((function(){Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea();case 2:(n=e.sent)&&(5===n.version?(a(n),s({compute:!0,startIndex:0})):ta());case 4:case"end":return e.stop()}}),e)})))()}),[]);var S=o.a.useCallback((function(e,n){var t=n.compute;a((function(n){var a=e(n);if(na(a),"DEV"===Qt&&(window.STATE=a),"no"!==t&&null!=a.baseImage){O&&(clearTimeout(O),w(null));var r=function(e){var n=e.currState,t=e.prevState;if(n.fps!==t.fps||n.baseImage!==t.baseImage)return Ht("FPS or base image is different"),{diff:!0,index:0};for(var a=n.effects,r=t.effects,i=0;i<a.length;i+=1){var o=a[i],c=r[i];if(!c)return Ht("No prevE, index ",i),{diff:!0,index:i};if("done"!==c.state.status)return Ht("PrevE not done ",i),{diff:!0,index:i};if(o.effectName!==c.effectName)return Ht("Different effect name ",i),{diff:!0,index:i};for(var s=0;s<o.paramsValues.length;s+=1){var u=o.paramsValues[s],l=c.paramsValues[s];if(JSON.stringify(u)!==JSON.stringify(l))return Ht("Param different",i,s),{diff:!0,index:i}}}return Ht("No diff"),{diff:!1}}({prevState:n,currState:a});r.diff&&("now"===t?s({compute:!0,startIndex:r.index}):(s({compute:!1}),w(setTimeout((function(){w(null),s({compute:!0,startIndex:r.index})}),1e3))))}return a}))}),[]);return o.a.useEffect((function(){Ht("UseEffect, doCompute",c),!1!==c.compute&&(s({compute:!1}),Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S((function(e){return Object(u.a)(Object(u.a)({},e),{},{effects:e.effects.map((function(e,n){return n<c.startIndex?e:Object(u.a)(Object(u.a)({},e),{},{state:{status:"computing"}})}))})}),{compute:"no"}),e.next=3,qt({state:t,onCompute:function(e,n){S((function(t){return Object(u.a)(Object(u.a)({},t),{},{effects:q(t.effects,n,(function(n){return Object(u.a)(Object(u.a)({},n),{},{state:{status:"done",image:e}})}))})}),{compute:"no"})},startEffectIndex:c.startIndex});case 3:case"end":return e.stop()}}),e)})))())}),[c]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(x.a,{}),Object(C.jsx)(h.a,{maxWidth:"sm",children:Object(C.jsxs)(p.a,{spacing:4,justifyContent:"space-evenly",alignItems:"center",width:"sm",divider:Object(C.jsx)(g.a,{}),children:[Object(C.jsx)(j.a,{variant:"h2",pt:4,children:"Partymoji"}),Object(C.jsxs)(p.a,{spacing:4,divider:Object(C.jsx)(g.a,{}),alignItems:"center",children:[Object(C.jsx)(ma,{children:Object(C.jsx)(k,{})}),Object(C.jsx)(ma,{children:Object(C.jsxs)(p.a,{spacing:1,alignItems:"center",children:[Object(C.jsx)(j.a,{variant:"h5",children:"Source Image"}),Object(C.jsx)(It,{name:"Upload a source image",currentImage:t.baseImage,onChange:function(e){S((function(n){return Object(u.a)(Object(u.a)({},n),{},{baseImage:e})}),{compute:"now"})}}),Object(C.jsx)("div",{style:{maxWidth:"300px"},children:ua.fn({value:t.fps,onChange:function(e){return S((function(n){return Object(u.a)(Object(u.a)({},n),{},{fps:e})}),{compute:"later"})}})})]})}),Object(C.jsx)(ma,{children:Object(C.jsx)(_t,{appState:t,possibleEffects:jt,onEffectsChange:function(e){return S((function(n){return Object(u.a)(Object(u.a)({},n),{},{effects:e})}),{compute:"now"})}})}),Object(C.jsx)(ma,{children:Object(C.jsxs)(p.a,{spacing:3,children:[Object(C.jsx)(j.a,{variant:"h5",children:"Clear Effects"}),Object(C.jsx)(j.a,{variant:"body1",children:"Clicking this button will clear all effects for the image"}),Object(C.jsx)(b.a,{startIcon:Object(C.jsx)(y,{name:"clear"}),sx:{maxWidth:"300px"},variant:"contained",color:"warning",onClick:function(){var e=Object(u.a)(Object(u.a)({},la),{},{baseImage:t.baseImage});a(e),na(e)},children:"Clear Effects"})]})}),Object(C.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(C.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:64,height:64,alt:"Github Link"})})]})]})}),Object(C.jsx)(sa,{})]})},ma=function(e){var n=e.children;return Object(C.jsx)(v.a,{style:{padding:16},sx:{width:300},children:n})},da=function(){return Object(C.jsx)(Xt,{children:Object(C.jsx)(ca,{children:Object(C.jsx)(fa,{})})})},ha=t(56),pa=t(70),ja=t(113),ba=t(114),va=function(e){Object(ja.a)(t,e);var n=Object(ba.a)(t);function t(){var e;Object(ha.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).state={hasError:!1},e}return Object(pa.a)(t,[{key:"componentDidCatch",value:function(e,n){console.error("Uncaught error:",e,n)}},{key:"render",value:function(){return this.state.hasError?Object(C.jsxs)(p.a,{spacing:1,children:[Object(C.jsx)(j.a,{variant:"h2",children:"Oh no!"}),Object(C.jsx)(j.a,{variant:"body1",children:"There seems to have been an issue"}),Object(C.jsx)(j.a,{variant:"body2",children:"If refreshing the page doesn't fix things, click the below button to clear local storage"}),Object(C.jsx)(b.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:Object(C.jsx)(O.a,{children:"priority_high"}),startIcon:Object(C.jsx)(O.a,{children:"priority_high"}),onClick:this.props.onClearLocalStorage,children:"Clear storage and reload"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),t}(o.a.Component),xa=Object(a.a)({typography:{fontFamily:"Raleway, Arial"}});s.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(r.a,{theme:xa,children:Object(C.jsx)(va,{onClearLocalStorage:function(){ta(),window.location.reload()},children:Object(C.jsx)(da,{})})})}),document.getElementById("root"))}},[[401,1,2]]]);
//# sourceMappingURL=main.87acfdb4.chunk.js.map