(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{350:function(e,a){},352:function(e,a){},365:function(e,a){},376:function(e,a){},377:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),i=n(52),o=n.n(i),c=n(19),s=n(5),u=n(443),l=n(459),d=n(428),m=n(431),f=n(448),h=n(451),p=n(454),j=n(447),v=n(460),b=function(e){return{name:e.name,params:e.params,description:e.description,fn:e.fn}},g=n(15),x=n(133),O=n(29),C=function(e){var a=Object(s.a)(e,3),n=a[0],t=a[1],r=a[2],i=function(e){var a=e.toString(16).toUpperCase();return 2===a.length?a:"0"+a};return"#".concat(i(n)).concat(i(t)).concat(i(r))},w=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},y=function(e){return e[3]<64},V=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},M=function(e,a,n){return Math.max(Math.min(e,n),a)},F=function(e){var a=Object(s.a)(e,4),n=a[0],t=a[1],r=a[2],i=a[3];return[M(n,0,255),M(t,0,255),M(r,0,255),M(i,0,255)]},k=[0,0,0,0],I=function(e,a,n){var t=Object(s.a)(e,2),r=t[0],i=t[1],o=Object(s.a)(n,2),c=o[0],u=o[1];if(c<0||c>=r||u<0||u>=i)return k;var l=B(e,c,u);return[a[l],a[l+1],a[l+2],a[l+3]]};function S(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new x.AssertionError({message:a,actual:e})}var P=function(e,a){return{dimensions:e.dimensions,frames:e.frames.map((function(n,t){return a(n,t,e.frames.length)}))}},T=function(e,a){for(var n=Object(s.a)(e,2),t=n[0],r=n[1],i=new Uint8Array(t*r*4),o=0;o<r;o+=1)for(var c=0;c<t;c+=1){var u=F(a([c,o])),l=B(e,c,o);i[l]=u[0],i[l+1]=u[1],i[l+2]=u[2],i[l+3]=u[3]}return i},N=function(e){return function(a){var n=a.image,t=a.random,r=a.parameters;return P(n,(function(a,i,o){return T(n.dimensions,(function(c){return e({image:n,dimensions:n.dimensions,random:t,parameters:r,coord:c,frameCount:o,frameIndex:i,getSrcPixel:function(e){return I(n.dimensions,a,e)}})}))}))}},B=function(e,a,n){return 4*(a+n*Object(s.a)(e,1)[0])},W=function(e){for(var a=e.image,n=e.newWidth,t=e.newHeight,r=Object(s.a)(a.dimensions,2),i=r[0]/n,o=r[1]/t,c=H({dimensions:[n,t],frameCount:a.frames.length}),u=0;u<c.frames.length;u+=1)for(var l=0;l<t;l+=1)for(var d=0;d<n;d+=1){var m=Math.floor(d*i),f=Math.floor(l*o),h=E({image:a,frameIndex:u,coord:[m,f]});R({image:c,frameIndex:u,color:h,coord:[d,l]})}return c},A=function(e){for(var a=e.image,n=e.newWidth,t=e.newHeight,r=Object(s.a)(a.dimensions,2),i=r[0],o=r[1],c=Math.round((n-i)/2),u=Math.round((t-o)/2),l=H({dimensions:[n,t],frameCount:a.frames.length}),d=0;d<l.frames.length;d+=1)for(var m=0;m<t;m+=1)for(var f=0;f<n;f+=1){var h=f>c&&f<n-c&&m>u&&m<t-u?E({image:a,frameIndex:d,coord:[f-c,m-u]}):k;R({image:l,frameIndex:d,coord:[f,m],color:h})}return l},H=function(e){return{dimensions:e.dimensions,frames:Object(v.a)(0,e.frameCount).map((function(){return new Uint8Array(e.dimensions[0]*e.dimensions[1]*4)}))}},E=function(e){return I(e.image.dimensions,e.image.frames[e.frameIndex],e.coord)},R=function(e){var a=B(e.image.dimensions,e.coord[0],e.coord[1]),n=e.image.frames[e.frameIndex];n[a]=e.color[0],n[a+1]=e.color[1],n[a+2]=e.color[2],n[a+3]=e.color[3]},U=function(e,a,n){return(1-e/100)*a+e/100*n},D=function(e,a,n){var t=Object(s.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3],u=O.rgb.hsl([r,i,o]),l=Object(s.a)(u,3),d=l[1],m=l[2],f=O.hsl.rgb([a,U(n,d,100),m]),h=Object(s.a)(f,3),p=h[0],j=h[1],v=h[2];return[U(n,r,p),U(n,i,j),U(n,o,v),c]},L=function(e,a){var n=a[0]-e[0],t=a[1]-e[1];return(360+180*Math.atan2(t,n)/Math.PI)%360},q=function(e){return[].concat(Object(g.a)(O.hsl.rgb([e,100,50])),[255])},_=function(e,a){var n=Object(s.a)(e,4),t=n[0],r=n[1],i=n[2],o=n[3],c=O.rgb.hsl(t,r,i),u=Object(s.a)(c,3),l=u[0],d=u[1],m=u[2],f=U(Math.abs(a),d,a>=0?100:0),h=O.hsl.rgb([l,f,m]),p=Object(s.a)(h,3);return[p[0],p[1],p[2],o]},G=n(439),z=n(444),J=n(1),X=function(e){var a=e.description;return a?Object(J.jsx)(z.a,{title:a,children:Object(J.jsx)(j.a,{fontSize:"small",color:"action",children:"help"})}):null},Y=function(e){var a=e.name,n=e.value,t=e.min,r=e.max,i=e.step,o=e.description,c=e.onChange;return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:o})]}),Object(J.jsxs)(d.a,{direction:"row",spacing:2,sx:{paddingLeft:"8px",paddingRight:"8px"},children:[Object(J.jsx)(G.a,{"aria-label":a,value:n,step:i,valueLabelDisplay:"off",getAriaValueText:function(e){return e.toString()},min:t,max:r,onChange:function(e,a){return c({valid:!0,value:a})}}),Object(J.jsx)(f.a,{variant:"body2",children:n})]})]})};function K(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(J.jsx)(Y,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange,min:e.min,max:e.max,step:e.step,description:e.description})}}}var Q=n(440),Z=n(437),$=n(452),ee=function(e){var a=e.name,n=e.value,t=e.description,i=e.parse,o=e.onChange,c=r.a.useState(void 0===n?void 0:n.toString()),u=Object(s.a)(c,2),l=u[0],m=u[1],h=r.a.useState(""),p=Object(s.a)(h,2),j=p[0],v=p[1];return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:t})]}),Object(J.jsxs)(Q.a,{children:[Object(J.jsx)(Z.a,{error:!!j,value:l,onBlur:function(){if(void 0!==l&&(!n||l!==n.toString())){var e=i(l);e.valid?v(""):v(e.reason),o(e)}},onChange:function(e){m(e.target.value)}}),j&&Object(J.jsx)($.a,{children:j})]})]})},ae=function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){var n=e.min,t=e.max;return Object(J.jsx)(ee,{name:e.name,description:e.description,parse:function(e){var a=parseInt(e,10);return isNaN(a)||a.toString()!==e?{valid:!1,reason:"Must be an integer"}:void 0!==n&&a<n?{valid:!1,reason:"Must be greater than or equal to ".concat(n)}:void 0!==t&&a>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:a}},onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}},ne=b({name:"Adjust Image",description:"Leave a parameter at 0 if you want to not change it",params:[K({name:"Number of Frames",description:"Set how many frames of animation there will be. Leave at 0 to not change the current frame count.",defaultValue:0,min:0,max:60}),ae({name:"Width",description:"Leave at 0 to not change the width. If height is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),ae({name:"Height",description:"Leave at 0 to not change the height. If width is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),K({name:"Brightness",min:-100,max:100,step:5,defaultValue:0}),K({name:"Contrast",min:-100,max:100,step:5,defaultValue:0}),K({name:"Saturation",min:-100,max:100,step:5,defaultValue:0})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,6),t=n[0],r=n[1],i=n[2],o=n[3],c=n[4],u=n[5],l=0!==t,d=Object(s.a)(a.dimensions,2),m=d[0],f=d[1],h=r>0||i>0,p=h&&0===r?Math.ceil(m/f*i):r,j=h&&0===i?Math.ceil(f/m*r):i;console.log({oldWidth:m,oldHeight:f,newWidth:p,newHeight:j});var v=p*j>m*f,b=0!==c?re(a):0,g=a;return l&&t<a.frames.length&&(g=te(g,t)),h&&!v&&(g=W({image:g,newWidth:p,newHeight:j})),g=P(g,(function(e){return T(g.dimensions,(function(a){var n=I(g.dimensions,e,a);return 0!==o&&(n=function(e,a){var n=a/100*255;return F([e[0]+n,e[1]+n,e[2]+n,e[3]])}(n,o)),0!==c&&(n=ie(n,b,c)),0!==u&&(n=_(n,u)),n}))})),h&&v&&(g=W({image:g,newWidth:p,newHeight:j})),l&&t>a.frames.length&&(g=te(g,t)),g}}),te=function(e,a){var n=e.frames;return{dimensions:e.dimensions,frames:Object(v.a)(0,a).map((function(e){return n[e]?n[e]:n[n.length-1]}))}},re=function(e){for(var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1],r=0,i=0,o=0;o<e.frames.length;o+=1)for(var c=0;c<n;c+=1)for(var u=0;u<t;u+=1){var l=I(e.dimensions,e.frames[o],[c,u]);if(!y(l)){var d=Object(s.a)(l,3),m=d[0],f=d[1],h=d[2],p=O.rgb.hsl(m,f,h);r+=Object(s.a)(p,3)[2],i+=1}}return r/i},ie=function(e,a,n){var t=Object(s.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3],u=O.rgb.hsl(r,i,o),l=Object(s.a)(u,3),d=l[0],m=l[1],f=l[2],h=f+(f-a)*(n/100),p=O.hsl.rgb([d,m,h]),j=Object(s.a)(p,3);return[j[0],j[1],j[2],c]},oe=n(102),ce=n(430),se=n(453),ue=n(455),le=function(e){var a=e.mainEle,n=e.children,t=r.a.useState(!0),i=Object(s.a)(t,2),o=i[0],c=i[1];return Object(J.jsx)(ce.a,{onClickAway:function(){return c(!0)},children:Object(J.jsxs)(se.a,{children:[Object(J.jsx)(p.a,{onClick:function(){return c(!o)},style:{textTransform:"none",color:"black"},children:Object(J.jsxs)(d.a,{direction:"row",spacing:4,children:[Object(J.jsx)("div",{children:a}),Object(J.jsx)(j.a,{children:o?"expand_less":"expand_more"})]})}),Object(J.jsx)(ue.a,{in:!o,children:n})]})})},de=function(e){var a=e.color;return Object(J.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:C(a)}})},me=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange;return Object(J.jsx)(le,{mainEle:Object(J.jsxs)(d.a,{direction:"row",spacing:4,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:t}),n&&Object(J.jsx)(de,{color:n})]}),children:Object(J.jsx)(oe.b,{disableAlpha:!0,presetColors:[],color:n?C(n):void 0,onChangeComplete:function(e){return r({valid:!0,value:w(e.hex)})}})})};function fe(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(J.jsx)(me,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange,description:e.description})}}}var he=b({name:"Background Color",description:"Change all transparent pixles to the given color",params:[fe({name:"Color",defaultValue:w("#000000")})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=Object(s.a)(t,1)[0],i=n(a);return y(i)?r:i}))}),pe=n(433),je=n(441),ve=function(e){var a=e.name,n=e.options,t=e.value,r=e.description,i=e.onChange;return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:r})]}),Object(J.jsx)(Q.a,{children:Object(J.jsx)(pe.a,{autoWidth:!0,value:t,onChange:function(e){return i({valid:!0,value:e.target.value})},children:n.map((function(e){return Object(J.jsx)(je.a,{value:e.value,children:e.name},e.value)}))})})]})};function be(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(J.jsx)(ve,{name:e.name,value:a.value.valid?a.value.value:void 0,options:e.options,description:e.description,onChange:a.onChange})}}}var ge=n(21),xe=n.n(ge),Oe=n(34),Ce=n(188),we=n(189),ye=n.n(we),Ve=n(190),Me=n.n(Ve),Fe=n(100),ke=n.n(Fe),Ie=function(){var e=Object(Oe.a)(xe.a.mark((function e(a){var n,t,r,i,o,c,s,u,l,d,m,f,h,p,j;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.transformList,t=a.inputDataUrl,r=a.fps,i=a.onImageFinished,o=ke()(t),e.next=4,Te(t);case 4:c=e.sent,s=[],u=c,l=Object(Ce.a)(n),e.prev=8,l.s();case 10:if((d=l.n()).done){e.next=23;break}return m=d.value,f=m.transform.fn({image:u,parameters:m.params,random:o}),h=Ne(f,o),p=Se(f.frames,h),e.next=17,Pe(f.dimensions,p,h,r);case 17:j=e.sent,i(),u=f,s.push({gif:j,width:f.dimensions[0],height:f.dimensions[1]});case 21:e.next=10;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(8),l.e(e.t0);case 28:return e.prev=28,l.f(),e.finish(28);case 31:return e.abrupt("return",s);case 32:case"end":return e.stop()}}),e,null,[[8,25,28,31]])})));return function(a){return e.apply(this,arguments)}}(),Se=function(e,a){return e.map((function(e){for(var n=new Uint8Array(e.length),t=0;t<e.length;t+=4)a&&e[t+3]<128?(n[t]=a[0],n[t+1]=a[1],n[t+2]=a[2],n[t+3]=a[3]):(n[t]=e[t],n[t+1]=e[t+1],n[t+2]=e[t+2],n[t+3]=255);return n}))},Pe=function(){var e=Object(Oe.a)(xe.a.mark((function e(a,n,t,r){return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var i=Object(s.a)(a,2),o=i[0],c=i[1],u=new Me.a(o,c);if(u.setFrameRate(r),u.setRepeat(0),t){var l=C(t).slice(1);u.setTransparent("0x".concat(l))}u.writeHeader();var d=[];u.on("data",(function(e){d.push(e)})),u.on("end",(function(){var a=URL.createObjectURL(new Blob(d,{type:"image/gif"}));e(a)})),n.forEach((function(e){u.addFrame(e)})),u.finish()})));case 1:case"end":return e.stop()}}),e)})));return function(a,n,t,r){return e.apply(this,arguments)}}(),Te=function(e){return new Promise((function(a,n){return ye()(e,(function(e,t){if(e)return n(e);if(3===t.shape.length)return a({frames:[Uint8Array.from(t.data)],dimensions:[t.shape[0],t.shape[1]]});for(var r=Object(s.a)(t.shape,3),i=r[0],o=r[1],c=r[2],u=o*c*4,l=[],d=0;d<i;d+=1)l.push(t.data.subarray(d*u,(d+1)*u));return a({frames:l,dimensions:[o,c]})}))}))},Ne=function(e,a){var n=!1,t=new Set,r=Object(s.a)(e.dimensions,2),i=r[0],o=r[1],c=C([0,255,0,255]);return e.frames.forEach((function(r){for(var s=0;s<o;s+=1)for(var u=0;u<i;u+=1){var l=I(e.dimensions,r,[u,s]);if(y(l))n=!0;else{var d=C(l);t.add(d),d===c&&(c=Be(a,t))}}})),n?w(c):void 0},Be=function e(a,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=C(V(a));return t>2e3?r:n.has(r)?e(a,n,t+1):r},We=function(e){var a=e.currentImageUrl,n=e.name,t=e.onChange;return Object(J.jsxs)(d.a,{spacing:4,children:[Object(J.jsxs)(p.a,{startIcon:Object(J.jsx)(j.a,{children:"image"}),sx:{maxWidth:"300px"},variant:"contained",component:"label",children:[n,Object(J.jsx)("input",{type:"file",hidden:!0,accept:"image/png,image/jpg,image/gif",name:"source-png",onChange:function(){var e=Object(Oe.a)(xe.a.mark((function e(a){var n,r,i,o;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.from(null!==(n=a.target.files)&&void 0!==n?n:[]),!(i=r[0])){e.next=7;break}return e.next=5,Ae(i);case 5:o=e.sent,t(o);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]}),a&&Object(J.jsx)("img",{style:{maxWidth:"300px",maxHeight:"auto"},src:a,alt:"Source"})]})},Ae=function(e){return new Promise((function(a){var n=new FileReader;n.onload=function(){return a(n.result)},n.readAsDataURL(e)}))};var He=b({name:"Background Image",description:"Select another image to be used as a background or foreground",params:[function(e){var a=e.name;return{name:a,defaultValue:{valid:!1},fn:function(e){return Object(J.jsx)(We,{currentImageUrl:e.value.valid?e.value.value.dataUrl:void 0,name:a,width:64,height:64,onChange:function(){var a=Object(Oe.a)(xe.a.mark((function a(n){var t;return xe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Te(n);case 2:t=a.sent,e.onChange({valid:!0,value:{dataUrl:n,image:t}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()})}}}({name:"Image"}),be({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]})],fn:function(e){var a=e.image,n=e.parameters,t=A({image:n[0].image,newWidth:a.dimensions[0],newHeight:a.dimensions[1]}),r=n[1];return P(a,(function(e,n){return T(a.dimensions,(function(e){var i=n/a.frames.length,o=Math.floor(i*t.frames.length),c=E({image:t,frameIndex:o,coord:e}),s=E({image:a,frameIndex:n,coord:e});return"background"===r?y(s)?c:s:y(c)?s:c}))}))}}),Ee=b({name:"Bounce",description:"Make the image bounce up and down",params:[ae({name:"Bounce Speed",description:"Positive number",defaultValue:5,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,o=Object(s.a)(a,2);return r([o[0],o[1]+Math.round(i[0]*Math.sin(t/n*2*Math.PI))])}))}),Re=b({name:"Circle",description:"Make the image move in a circular pattern",params:[ae({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,o=Object(s.a)(i,1)[0],c=Object(s.a)(a,2),u=c[0],l=c[1];return r([u+Math.round(o*Math.sin(-2*Math.PI*(t/n))),l+Math.round(o*Math.cos(-2*Math.PI*(t/n)))])}))}),Ue=n(456),De=function(e){var a=e.name,n=e.newParamText,t=e.createNewParam,i=e.value,o=e.description,c=e.onChange,u=r.a.useState(void 0===i?[]:i.map((function(e,a){return{param:t(),pValue:e}}))),l=Object(s.a)(u,2),m=l[0],v=l[1];return Object(J.jsx)(h.a,{children:Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:o})]}),m.map((function(e,n){var t=e.param,r=e.pValue,i=t.fn({value:{valid:!0,value:r},onChange:function(e){if(e.valid){var a=m.map((function(a,r){return n===r?{param:t,pValue:e.value}:a}));v(a),c({valid:!0,value:a.map((function(e){return e.pValue}))})}}});return Object(J.jsxs)(d.a,{direction:"row",children:[Object(J.jsx)(Ue.a,{onClick:function(){var e=m.filter((function(e,a){return a!==n}));v(e),c({valid:!0,value:e.map((function(e){return e.pValue}))})},children:Object(J.jsx)(j.a,{children:"delete"})}),i]},"".concat(a,"-").concat(n))})),Object(J.jsx)(p.a,{variant:"contained",onClick:function(){var e=t(),a=[].concat(Object(g.a)(m),[{param:e,pValue:e.defaultValue.valid?e.defaultValue.value:void 0}]);v(a),e.defaultValue.valid&&c({valid:!0,value:a.map((function(e){return e.pValue}))})},children:n})]})})};function Le(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(J.jsx)(De,{name:e.name,newParamText:e.newParamText,value:a.value.valid?a.value.value:void 0,createNewParam:e.createNewParam,description:e.description,onChange:a.onChange})}}}var qe=b({name:"Colors",description:"Make the image flash different colors",params:[Le({name:"Colors",newParamText:"New Color",defaultValue:["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(w),createNewParam:function(){return fe({name:"Color"})}})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,o=r(a),c=Object(s.a)(i,1)[0];if(y(o))return[0,0,0,0];var u=c[Math.floor(t/n*c.length)],l=function(e){var a=Object(s.a)(e,3),n=a[0],t=a[1],r=a[2];return Math.round((n+t+r)/3)}(o);return[l*u[0]/255,l*u[1]/255,l*u[2]/255,255]}))}),_e=b({name:"Colors Background",description:"Transparent pixels will flash different colors",params:[Le({name:"Colors",newParamText:"New Color",defaultValue:["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(w),createNewParam:function(){return fe({name:"Color"})}})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,o=r(a),c=Object(s.a)(i,1)[0];return y(o)?c[Math.floor(t/n*c.length)]:o}))}),Ge=function(e){var a=e.name,n=e.value,t=e.description,i=e.parse,o=e.onChange,c=r.a.useState(void 0===n?void 0:n.toString()),u=Object(s.a)(c,2),l=u[0],m=u[1],h=r.a.useState(""),p=Object(s.a)(h,2),j=p[0],v=p[1];return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:t})]}),Object(J.jsxs)(Q.a,{children:[Object(J.jsx)(Z.a,{error:!!j,value:l,onBlur:function(){if(void 0!==l&&(!n||l!==n.toString())){var e=i(l);e.valid?v(""):v(e.reason),o(e)}},onChange:function(e){m(e.target.value)}}),j&&Object(J.jsx)($.a,{children:j})]})]})},ze=function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){var n=e.min,t=e.max;return Object(J.jsx)(Ge,{name:e.name,description:e.description,parse:function(e){var a=parseFloat(e);return isNaN(a)||a.toString()!==e?{valid:!1,reason:"Must be a number"}:void 0!==n&&a<n?{valid:!1,reason:"Must be greater than or equal to ".concat(n)}:void 0!==t&&a>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:a}},onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}},Je=b({name:"Double Vision",description:"See the image in double",params:[ze({name:"Amplitude",defaultValue:10,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,o=Object(s.a)(i,1)[0],c=Object(s.a)(a,2),u=c[0],l=c[1],d=u%2===0?-1:1;return r([u+Math.round(d*o*Math.sin(-2*Math.PI*(t/n))),l])}))}),Xe=b({name:"Expand",description:"Make the image grow and shrink",params:[ae({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:N((function(e){var a=e.dimensions,n=e.coord,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,o=e.parameters,c=r/t,u=Math.cos(2*c*Math.PI)*o[0],l=Object(s.a)(a,2),d=l[0],m=l[1],f=d/2,h=m/2,p=Object(s.a)(n,2),j=p[0],v=p[1],b=(j-f)/d,g=(v-h)/m;return i([j-Math.floor(u*b),v-Math.round(u*g)])}))}),Ye=b({name:"Fisheye",description:"Make the image grow and shrink in a distorted fashion",params:[ae({name:"Radius",description:"Positive Number",defaultValue:10,min:0})],fn:N((function(e){var a=e.dimensions,n=e.coord,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,o=e.parameters,c=r/t,u=c<.5,l=Object(s.a)(a,2),d=l[0],m=l[1],f=(u?c:1-c)*o[0],h=d/2,p=m/2,j=Object(s.a)(n,2),v=j[0],b=j[1],g=Math.atan2(p-b,h-v);return i([v+Math.round(f*Math.cos(g)),b+Math.round(f*Math.sin(g))])}))}),Ke=b({name:"Grid",description:"Removes the color from all pixels not aligned with a grid",params:[K({name:"Grid Size",description:"The length of each square in the grid",defaultValue:24,min:2,max:64,step:2}),K({name:"Grid Angle",defaultValue:45,min:0,max:90})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,2),r=t[0],i=t[1],o=(e.dimensions,n(a)),c=Object(s.a)(a,2),u=c[0],l=c[1];if(i%90===0)return u%r===0||l%r===0?o:_(o,-100);var d=(64-r)/64*.1+.03,m=function(e){var a=1/r*(l-Math.tan(Qe(e))*u);return Math.abs(Math.round(a)-a)<d};return m(i)||m(i+90)?o:_(o,-100)}))}),Qe=function(e){return e*Math.PI/180},Ze=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange,i=void 0===n?void 0:C([].concat(Object(g.a)(O.hsl.rgb([n,255,255])),[255]));return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:t})]}),Object(J.jsx)(oe.a,{color:i,onChangeComplete:function(e){var a=e.hsl;return r({valid:!0,value:a.h})}})]})};var $e,ea=b({name:"Hue Shift",description:"Shift the hue to some other color",params:[($e={name:"Hue",defaultValue:180},{name:$e.name,defaultValue:$e.defaultValue?{valid:!0,value:$e.defaultValue}:{valid:!1},fn:function(e){return Object(J.jsx)(Ze,{name:$e.name,value:e.value.valid?e.value.value:void 0,onChange:e.onChange})}}),K({name:"Amount",description:"How strong the effect is.",min:0,max:100,step:5,defaultValue:75})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,2),r=t[0],i=t[1];return D(n(a),r,i)}))}),aa=function(e){var a=e.name,n=e.value,t=e.description,i=e.onChange,o=r.a.useState(n),c=Object(s.a)(o,2),u=c[0],l=c[1];return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",children:a}),Object(J.jsx)(X,{description:t})]}),Object(J.jsx)(Q.a,{children:Object(J.jsx)(Z.a,{value:u,onChange:function(e){return l(e.target.value)},onBlur:function(){return i(u?{valid:!0,value:u}:{valid:!1})}})})]})},na=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],ta=b({name:"Lightning",description:"Make the background look like a thunderstorm",params:[function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(J.jsx)(aa,{name:e.name,description:e.description,onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}}({name:"Random Seed",description:"Can be anything. Will determine the randomness of the lightning.",defaultValue:"lightning"})],fn:function(e){var a=e.image,n=e.parameters,t=ke()(n[0]);return P(a,(function(e){var n=t(),r=n<.9?0:n<.95?1:n<.98?2:3;return T(a.dimensions,(function(n){var t=I(a.dimensions,e,n);if(y(t))return na[r];if(r>0){var i=1.02*r;return[t[0]*i,t[1]*i,t[2]*i,t[3]]}return t}))}))}}),ra=b({name:"Nuke",description:"Oh no...",params:[],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.frameCount,r=e.frameIndex/t*255,i=n(a),o=Object(s.a)(i,4),c=o[0],u=o[1],l=o[2],d=o[3],m=O.rgb.hsl(c,u,l),f=Object(s.a)(m,3),h=f[0],p=f[1],j=f[2],v=O.hsl.rgb([h,p,j>r?j:0]),b=Object(s.a)(v,3);return[b[0],b[1],b[2],j>r?d:0]}))}),ia=b({name:"Party",description:"Party time!",params:[be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),K({name:"Amount",description:"How strong the effect is",min:0,max:100,step:5,defaultValue:50}),K({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.frameCount,r=e.frameIndex,i=Object(s.a)(e.parameters,3),o=i[0],c=i[1],u=i[2],l=n(a),d=y(l),m=r/t*u*360%360;return d&&"background"===o?q(m):d||"foreground"!==o?l:D(l,m,c)}))}),oa=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(w),ca=b({name:"Pinwheel",description:"Create a pinwheel of colors",params:[K({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),Le({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:oa,createNewParam:function(){return fe({name:"Color"})}}),ae({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),ae({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:N((function(e){for(var a=e.coord,n=e.dimensions,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,o=Object(s.a)(e.parameters,4),c=o[0],u=o[1],l=o[2],d=o[3],m=i(a),f=u.length*c,h=Math.round(360/f),p=u.length;"00"!==(f/p).toFixed(2).slice(-2);)p-=1;if(y(m)){var j=[n[0]/2+l,n[1]/2-d],v=L(a,j),b=Math.floor(v/h)%p,g=r/t;return u[(Math.floor(g*p)+b)%p]}return m}))}),sa=b({name:"Pinwheel Party",description:"Create a pinwheel of party colors",params:[K({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),K({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),ae({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),ae({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:N((function(e){var a=e.coord,n=e.dimensions,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,o=Object(s.a)(e.parameters,5),c=o[0],u=o[1],l=o[2],d=o[3],m=o[4],f=i(a),h=y(f);if("foreground"===u?h:!h)return f;var p=[n[0]/2+d,n[1]/2-m],j=(L(a,p)*c+360*(r/t))%360;return h?q(j):D(f,j,l)}))}),ua=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(w),la=b({name:"Radiance",description:"Radiate colors out in rings",params:[K({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),Le({name:"Colors",newParamText:"New Color",description:"The colors that make up each ring",defaultValue:ua,createNewParam:function(){return fe({name:"Color"})}}),ae({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),ae({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,4),t=n[0],r=n[1],i=n[2],o=n[3],c=Object(v.a)(0,t).flatMap((function(){return r})),u=Object(s.a)(a.dimensions,2),l=u[0],d=u[1],m=l/2,f=d/2;return P(a,(function(e,n,t){return T(a.dimensions,(function(r){var u=I(a.dimensions,e,r);if(y(u)){var h=Object(s.a)(r,2),p=h[0],j=h[1],v=p-m-i,b=j-f+o,g=Math.sqrt(l/2*(l/2)+d/2*(d/2)),x=Math.sqrt(b*b+v*v),O=Math.floor((1-x/g)*c.length)%c.length,C=n/t,w=(Math.floor(C*c.length)+O)%c.length;return c[w]}return u}))}))}}),da=b({name:"Radiance Party",description:"Radiate party colors out in rings",params:[K({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),K({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),ae({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),ae({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,5),t=n[0],r=n[1],i=n[2],o=n[3],c=n[4],u=Object(s.a)(a.dimensions,2),l=u[0],d=u[1],m=l/2,f=d/2,h=Math.sqrt(l/2*(l/2)+d/2*(d/2));return P(a,(function(e,n,u){return T(a.dimensions,(function(l){var d=Object(s.a)(l,2),p=d[0],j=d[1],v=I(a.dimensions,e,l),b=y(v);if("foreground"===r?b:!b)return v;var g=p-m-o,x=j-f+c,O=(360*(1-Math.sqrt(x*x+g*g)/h)*t+360*(n/u))%360;return b?q(O):D(v,O,i)}))}))}}),ma=b({name:"Resize Image",description:"Change the dimensions of the image. If bigger than original, the extra space will be transparent. If smaller, the image will be cropped. ",params:[ae({name:"Width",description:"Set to 0 when height is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0}),ae({name:"Height",description:"Set to 0 when width is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,2),t=n[0],r=n[1],i=Object(s.a)(a.dimensions,2),o=i[0],c=i[1],u=0===t?Math.ceil(o/c*r):t,l=0===r?Math.ceil(c/o*t):r;return A({image:a,newWidth:u,newHeight:l})}}),fa=b({name:"Ripple",description:"Create a ripple effect, like water",params:[ze({name:"Amplitude",defaultValue:10,description:"How strong the ripple effect should be"}),ae({name:"Period",defaultValue:2,min:0,description:"How many ripples you want. Positive number."})],fn:function(e){var a=e.image,n=e.parameters;return P(a,(function(e,t,r){var i=Object(s.a)(n,2),o=i[0],c=i[1],u=a.dimensions[1],l=t/r*2*Math.PI;return T(a.dimensions,(function(n){var t=Object(s.a)(n,2),r=t[0],i=t[1],d=Math.round(o*Math.sin(i/u*c*Math.PI+l));return I(a.dimensions,e,[r+d,i])}))}))}}),ha=b({name:"Rotate",description:"Make the image rotate about the center point",params:[be({name:"Direction",defaultValue:-1,options:[{name:"Clockwise",value:-1},{name:"Counter-Clockwise",value:1}]})],fn:N((function(e){var a=e.dimensions,n=e.coord,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,o=e.parameters,c=Object(s.a)(o,1)[0],u=a[0]/2,l=a[1]/2,d=Object(s.a)(n,2),m=d[0]-u,f=d[1]-l,h=r/t*(c||1),p=Math.cos(2*Math.PI*h),j=Math.sin(2*Math.PI*h);return i([Math.round(u+m*p-f*j),Math.round(l+f*p+m*j)])}))}),pa=b({name:"Roxbury",description:"Baby, don't hurt me",params:[],fn:function(e){var a=e.image;return P(a,(function(e,n,t){var r=n/t,i=Math.floor(4*r),o=4*(r-i/4),c=Math.PI/2*.2,u=0===i?0:1===i?o*c:2===i?c:(1-o)*c,l=Math.cos(1.35*-u),d=Math.sin(1.35*-u),m=.25*a.dimensions[0],f=.7*a.dimensions[1];return T(a.dimensions,(function(n){var t=Object(s.a)(n,2),r=t[0],i=t[1],o=Math.floor(r-m+8*Math.sin(u)),c=Math.floor(i-f+8*Math.cos(u)),h=[Math.round(m+o*l-c*d),Math.round(f+c*l+o*d)];return I(a.dimensions,e,h)}))}))}}),ja=b({name:"Shake",description:"Make the image shake back and forth",params:[ze({name:"Amplitude",defaultValue:10,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,o=Object(s.a)(i,1)[0],c=Object(s.a)(a,2),u=c[0],l=c[1];return r([u+Math.round(o*Math.cos(t/n*2*Math.PI)),l])}))}),va=b({name:"Static",description:"Adds random static to the image",params:[K({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=e.random,i=Object(s.a)(t,1)[0],o=n(a);if(y(o))return[0,0,0,0];var c=Math.ceil(100*r())<i,u=Math.ceil(255*r());return c?[u,u,u,o[3]]:o}))}),ba=b({name:"Static Background",description:"Adds random static to the background",params:[K({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=e.random,i=Object(s.a)(t,1)[0],o=n(a);if(y(o)){var c=Math.ceil(100*r())<i,u=Math.ceil(255*r());return c?[u,u,u,255]:o}return o}))}),ga=n(436),xa=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange;return Object(J.jsx)(d.a,{spacing:1,children:Object(J.jsxs)(d.a,{direction:"row",spacing:1,children:[Object(J.jsx)(f.a,{variant:"body2",paddingTop:"0.5rem",children:a}),Object(J.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(J.jsx)(X,{description:t})}),Object(J.jsx)(ga.a,{"aria-label":a,checked:n,onChange:function(e,a){return r({valid:!0,value:a})}})]})})};var Oa=b({name:"Transparency",description:"Set certain pixels to be transparent",params:[function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(J.jsx)(xa,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange,description:e.description})}}}({name:"Matches are Transparent",description:"If checked, then pixels matching this color will be made transparent. If not checked, non-matching pixels are transparent.",defaultValue:!0}),fe({name:"Color",defaultValue:w("#000000")}),K({name:"Tolerance",description:'A higher number will mean colors that are "close" to the chosen color will be transparent. (0 - 100)',defaultValue:10,min:0,max:100,step:5})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,3),r=t[0],i=t[1],o=t[2],c=n(a),u=100*Ca(c,i)<=o;return(r?u:!u)?[c[0],c[1],c[2],0]:c}))}),Ca=function(e,a){var n=e[0]-a[0],t=e[1]-a[1],r=e[2]-a[2],i=(e[0]+a[0])/2,o=(2+i/256)*n*n,c=(2+(255-i)/256)*t*t,s=4*r*r;return Math.sqrt(o+c+s)/765},wa=[ne,he,He,Ee,Re,qe,_e,Je,Xe,Ye,Ke,ea,ta,ra,ia,ca,sa,la,da,ma,fa,ha,pa,ja,va,ba,Oa,b({name:"Transpose",description:"Move the image left or right, up or down",params:[ae({name:"X",defaultValue:0}),ae({name:"Y",defaultValue:0})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=Object(s.a)(t,2),i=r[0],o=r[1],c=Object(s.a)(a,2);return n([c[0]+i,c[1]+o])}))})].sort((function(e,a){return e.name>a.name?1:-1})),ya=function(e){var a=wa.find((function(a){return a.name===e}));return S(a,"Could not find matching transform: ".concat(e)),a},Va="partymoji-state",Ma=function(){try{window.localStorage.removeItem(Va)}catch(e){console.error("Error clearing state from local storage",e.stack||e)}},Fa=n(457),ka=n(458),Ia=n(446),Sa=K({name:"Frames per Second",defaultValue:20,min:1,max:60}),Pa=function(e){var a=e.computeDisabled,n=e.appState,t=e.onFpsChange,i=e.onComputed,o=r.a.useState({loading:!1,results:[],computeTime:void 0}),c=Object(s.a)(o,2),u=c[0],l=c[1],h=r.a.useState(),v=Object(s.a)(h,2),b=v[0],g=v[1];return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsx)(f.a,{variant:"h5",children:"Create Gif"}),Object(J.jsx)("div",{style:{maxWidth:"300px"},children:Sa.fn({value:{valid:!0,value:n.fps},onChange:function(e){e.valid&&t(e.value)}})}),Object(J.jsx)(p.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:!u.loading&&n.dirty?Object(J.jsx)(j.a,{children:"priority_high"}):void 0,disabled:a,onClick:Object(Oe.a)(xe.a.mark((function e(){var a;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.transforms.map((function(e){return{transform:ya(e.transformName),params:e.paramsValues.map((function(e){return S(e.valid,"Got non-valid when compute box was clicked"),e.value}))}})),l({loading:!0}),setTimeout(Object(Oe.a)(xe.a.mark((function e(){var t,r,o,c;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(n.baseImage,"No source image, this button should be disabled!"),t=Date.now(),r=0,g(0),e.next=7,Ie({inputDataUrl:n.baseImage,transformList:a,fps:n.fps,onImageFinished:function(){g((r+=1)/a.length*100)}});case 7:o=e.sent,c=Math.ceil((Date.now()-t)/1e3),l({loading:!1,computeTime:c,results:o.map((function(e,a){return{transformName:n.transforms[a].transformName,gif:e.gif}}))}),g(void 0),i(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),console.error(e.t0.stack);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))));case 3:case"end":return e.stop()}}),e)}))),children:u.loading?Object(J.jsx)(Fa.a,{color:"inherit"}):"Compute"}),void 0!==b&&Object(J.jsx)(ka.a,{variant:"determinate",value:b}),!u.loading&&void 0!==u.computeTime&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(m.a,{}),Object(J.jsxs)(f.a,{variant:"caption",children:["Compute Time: ",u.computeTime," second(s)"]})]}),!u.loading&&u.results.length>0&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(m.a,{}),Object(J.jsx)(Ia.a,{container:!0,spacing:2,padding:1,columns:{xs:4,sm:8,md:12},children:u.results.map((function(e,a){var n=e.gif,t=e.transformName;return Object(J.jsxs)(Ia.a,{item:!0,xs:4,sm:4,md:4,children:[Object(J.jsx)(f.a,{variant:"subtitle2",children:t}),Object(J.jsx)("img",{src:n,alt:"gif-".concat(t,"-").concat(a),style:{maxWidth:"300px",maxHeight:"auto"}})]},"".concat(t,"-").concat(a))}))})]})]})},Ta=n(435),Na=function(e){var a=e.selectedTransform,n=e.possibleTransforms,t=e.index,i=e.onSelect,o=e.onRemove,s=e.onMoveLeft,u=e.onMoveRight;return Object(J.jsx)(h.a,{style:{padding:8},elevation:3,children:Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsxs)(d.a,{direction:"row",spacing:2,children:[Object(J.jsx)(f.a,{variant:"subtitle1",children:t+1}),Object(J.jsx)(z.a,{title:"Delete transform",children:Object(J.jsx)(Ue.a,{"aria-label":"delete",onClick:o,children:Object(J.jsx)(j.a,{children:"delete"})})}),Object(J.jsx)(z.a,{title:"Move transform left",children:Object(J.jsx)(Ue.a,{"aria-label":"delete",onClick:s,disabled:!s,children:Object(J.jsx)(j.a,{children:"chevron_left"})})}),Object(J.jsx)(z.a,{title:"Move transform right",children:Object(J.jsx)(Ue.a,{"aria-label":"delete",onClick:u,disabled:!u,children:Object(J.jsx)(j.a,{children:"chevron_right"})})})]}),Object(J.jsx)(d.a,{direction:"row",spacing:4,children:Object(J.jsx)(Q.a,{fullWidth:!0,children:Object(J.jsx)(Ta.a,{disableClearable:!0,value:a.transform.name,options:n.map((function(e){return e.name})),onChange:function(e,a){var t=n.find((function(e){return e.name===a}));i({transform:t,paramValues:t.params.map((function(e){return e.defaultValue}))})},renderInput:function(e){return Object(J.jsx)(Z.a,Object(c.a)(Object(c.a)({},e),{},{label:"Transform"}))}})})}),a.transform.description&&Object(J.jsx)(f.a,{variant:"caption",children:a.transform.description}),a.transform.params.length>0&&Object(J.jsx)(f.a,{variant:"subtitle1",children:"Parameters"}),Object(J.jsx)(d.a,{divider:Object(J.jsx)(m.a,{}),spacing:2,children:a.transform.params.map((function(e,n){var t=e.fn({value:a.paramValues[n],onChange:function(e){i(Object(c.a)(Object(c.a)({},a),{},{paramValues:a.paramValues.map((function(a,t){return t===n?e:a}))}))}});return Object(J.jsx)(r.a.Fragment,{children:t},"".concat(a.transform.name,"-").concat(e.name))}))})]})})},Ba=function(e){var a=e.currentTransforms,n=e.possibleTransforms,t=e.onTransformsChange;return Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsx)(f.a,{variant:"h5",children:"Image Transforms"}),Object(J.jsxs)(Ia.a,{container:!0,spacing:2,padding:1,columns:{xs:4,sm:8,md:12},rowSpacing:4,children:[a.map((function(e,r){return Object(J.jsx)(Ia.a,{item:!0,xs:4,sm:4,md:4,children:Object(J.jsx)(Na,{index:r,possibleTransforms:n,selectedTransform:{transform:ya(e.transformName),paramValues:e.paramsValues},onRemove:function(){return t(a.filter((function(e,a){return a!==r})))},onMoveLeft:r>0?function(){return t(a.map((function(e,n){return n===r-1?a[n+1]:r===n?a[r-1]:e})))}:void 0,onMoveRight:r<a.length-1?function(){return t(a.map((function(e,n){return n===r+1?a[n-1]:r===n?a[r+1]:e})))}:void 0,onSelect:function(e){return t(a.map((function(a,n){return r===n?{transformName:e.transform.name,paramsValues:e.paramValues,computedImage:void 0}:{transformName:a.transformName,paramsValues:a.paramsValues,computedImage:void 0}})))}})},"".concat(e.transformName,"-").concat(r))})),Object(J.jsx)(Ia.a,{item:!0,xs:4,sm:4,md:4,children:Object(J.jsx)(d.a,{spacing:4,children:Object(J.jsx)(p.a,{fullWidth:!1,variant:"contained",startIcon:Object(J.jsx)(j.a,{children:"add"}),onClick:function(){return t([].concat(Object(g.a)(a),[{transformName:n[0].name,paramsValues:n[0].params.map((function(e){return e.defaultValue}))}]))},children:"New Transform"})})})]})]})},Wa=n(438),Aa=n(107),Ha=function(e){var a=e.state,n=e.onImport,t=r.a.useState(),i=Object(s.a)(t,2),o=i[0],u=i[1],l=r.a.useState(!1),m=Object(s.a)(l,2),h=m[0],v=m[1],b=function(e){u(e),setTimeout((function(){return u(void 0)}),2e3)},g=function(){v(!0),setTimeout((function(){return v(!1)}),2e3)};return Object(J.jsxs)(d.a,{spacing:3,children:[Object(J.jsx)(f.a,{variant:"h5",children:"Import/Export"}),Object(J.jsxs)(p.a,{startIcon:Object(J.jsx)(j.a,{children:"file_upload"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){var e=Aa.compressToBase64(JSON.stringify(a));navigator.clipboard.writeText(e),b("Copied to clipboard")},children:["Export to clipboard ",Object(J.jsx)("br",{}),"(With Source Image)"]}),Object(J.jsxs)(p.a,{startIcon:Object(J.jsx)(j.a,{children:"file_upload"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){var e=Aa.compressToBase64(JSON.stringify(Object(c.a)(Object(c.a)({},a),{},{baseImage:void 0})));navigator.clipboard.writeText(e),b("Copied to clipboard")},children:["Export to clipboard ",Object(J.jsx)("br",{})," (NO Source Image)"]}),Object(J.jsx)(p.a,{startIcon:Object(J.jsx)(j.a,{children:"file_download"}),sx:{maxWidth:"300px"},variant:"contained",onClick:Object(Oe.a)(xe.a.mark((function e(){var a,t;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:if(a=e.sent){e.next=7;break}return g(),e.abrupt("return");case 7:if(t=JSON.parse(Aa.decompressFromBase64(a)),Array.isArray(t.transforms)){e.next=11;break}return g(),e.abrupt("return");case 11:n(t),v(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),g();case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),children:"Import from clipboard"}),o&&Object(J.jsx)(Wa.a,{severity:"info",sx:{maxWidth:"300px"},children:o}),h&&Object(J.jsx)(Wa.a,{severity:"error",sx:{maxWidth:"300px"},children:"Error importing from clipboard"})]})},Ea=!1,Ra={dirty:!1,transforms:[],baseImage:void 0,fps:20},Ua=function(){var e=r.a.useState(Ra),a=Object(s.a)(e,2),n=a[0],t=a[1];r.a.useEffect((function(){var e=function(){try{var e=window.localStorage.getItem(Va);if(e){var a=JSON.parse(e);if(Array.isArray(a.transforms))return a}}catch(n){console.error("Error loading state from local storage",n.stack||n)}}();e&&t(Object(c.a)(Object(c.a)({},e),{},{dirty:!0}))}),[]);var i=function(e){!function(e){try{window.localStorage.setItem(Va,JSON.stringify(e))}catch(a){console.error("Error saving state to local storage",a.stack||a)}}(e),t(e)};var o=!n.baseImage||0===n.transforms.length||!n.dirty||n.transforms.some((function(e){return ya(e.transformName).params.length>0&&e.paramsValues.every((function(e,a){return!1===e.valid}))}));return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(u.a,{}),Object(J.jsx)(l.a,{children:Object(J.jsxs)(d.a,{spacing:4,justifyContent:"space-evenly",divider:Object(J.jsx)(m.a,{}),children:[Object(J.jsx)(f.a,{variant:"h2",pt:4,children:"Partymoji"}),Object(J.jsxs)(d.a,{spacing:4,divider:Object(J.jsx)(m.a,{}),children:[Ea,Object(J.jsx)(h.a,{style:{padding:16},children:Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsx)(f.a,{variant:"h5",children:"Source Image"}),Object(J.jsx)(We,{name:"Choose a source image",currentImageUrl:n.baseImage,onChange:function(e){i(Object(c.a)(Object(c.a)({},n),{},{baseImage:e,dirty:!0}))}})]})}),Object(J.jsx)(h.a,{style:{padding:16},children:Object(J.jsx)(Ba,{currentTransforms:n.transforms,possibleTransforms:wa,onTransformsChange:function(e){return i(Object(c.a)(Object(c.a)({},n),{},{dirty:!0,transforms:e}))}})}),Object(J.jsx)(h.a,{style:{padding:16},children:Object(J.jsx)(Pa,{computeDisabled:o,appState:n,onFpsChange:function(e){return i(Object(c.a)(Object(c.a)({},n),{},{fps:e,dirty:!0}))},onComputed:function(){return i(Object(c.a)(Object(c.a)({},n),{},{dirty:!1}))}})}),Object(J.jsx)(h.a,{style:{padding:16},children:Object(J.jsx)(Ha,{state:n,onImport:function(e){return i(Object(c.a)(Object(c.a)({},e),{},{dirty:!0}))}})}),Object(J.jsx)(h.a,{style:{padding:16},children:Object(J.jsxs)(d.a,{spacing:3,children:[Object(J.jsx)(f.a,{variant:"h5",children:"Clear State"}),Object(J.jsx)(f.a,{variant:"body1",children:"Clicking this button will clear the source image and all transforms"}),Object(J.jsx)(p.a,{startIcon:Object(J.jsx)(j.a,{children:"clear"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){Ma(),t(Ra)},children:"Clear State"})]})}),Ea,Object(J.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(J.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:64,height:64,alt:"Github Link"})})]})]})})]})},Da=n(97),La=n(98),qa=n(193),_a=n(192),Ga=function(e){Object(qa.a)(n,e);var a=Object(_a.a)(n);function n(){var e;Object(Da.a)(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={hasError:!1},e}return Object(La.a)(n,[{key:"componentDidCatch",value:function(e,a){console.error("Uncaught error:",e,a)}},{key:"render",value:function(){return this.state.hasError?Object(J.jsxs)(d.a,{spacing:1,children:[Object(J.jsx)(f.a,{variant:"h2",children:"Oh no!"}),Object(J.jsx)(f.a,{variant:"body1",children:"There seems to have been an issue"}),Object(J.jsx)(f.a,{variant:"body2",children:"If refreshing the page doesn't fix things, click the below button to clear local storage"}),Object(J.jsx)(p.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:Object(J.jsx)(j.a,{children:"priority_high"}),startIcon:Object(J.jsx)(j.a,{children:"priority_high"}),onClick:this.props.onClearLocalStorage,children:"Clear storage and reload"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),n}(r.a.Component);o.a.render(Object(J.jsx)(r.a.StrictMode,{children:Object(J.jsx)(Ga,{onClearLocalStorage:function(){Ma(),window.location.reload()},children:Object(J.jsx)(Ua,{})})}),document.getElementById("root"))}},[[377,1,2]]]);
//# sourceMappingURL=main.bbea1ef3.chunk.js.map