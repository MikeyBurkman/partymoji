(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{355:function(e,n){},357:function(e,n){},370:function(e,n){},381:function(e,n){},382:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),i=a(54),o=a.n(i),c=a(21),s=a.n(c),u=a(17),l=a(29),m=a(3),d=a(470),f=a(424),h=a(458),p=a(457),g=a(460),j=a(454),b=a(455),v=a(450),O=a(419),x=a(453),A=a(456),C=a(1),w=function(e){var n=e.mainEle,a=e.children,t=r.a.useState(!0),i=Object(m.a)(t,2),o=i[0],c=i[1];return Object(C.jsx)(O.a,{onClickAway:function(){return c(!0)},children:Object(C.jsxs)(x.a,{children:[Object(C.jsx)(j.a,{onClick:function(){return c(!o)},style:{textTransform:"none",color:"black"},children:Object(C.jsxs)(f.a,{direction:"row",spacing:4,children:[Object(C.jsx)("div",{children:n}),Object(C.jsx)(b.a,{children:o?"expand_less":"expand_more"})]})}),Object(C.jsx)(A.a,{in:!o,children:a})]})})},M=function(e){var n=e.currentImageUrl,a=e.name,t=e.onChange;return Object(C.jsxs)(f.a,{spacing:4,children:[Object(C.jsxs)(j.a,{startIcon:Object(C.jsx)(b.a,{children:"image"}),sx:{maxWidth:"300px"},variant:"contained",component:"label",children:[a,Object(C.jsx)("input",{type:"file",hidden:!0,accept:"image/png,image/jpg,image/jpeg,image/gif",name:"source-png",onChange:function(){var e=Object(l.a)(s.a.mark((function e(n){var a,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.from(null!==(a=n.target.files)&&void 0!==a?a:[]),!(i=r[0])){e.next=7;break}return e.next=5,y(i);case 5:o=e.sent,t(o);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),n&&Object(C.jsx)("img",{style:{maxWidth:"200px",maxHeight:"auto"},src:n,alt:"Source"})]})},y=function(e){return new Promise((function(n){var a=new FileReader;a.onload=function(){return n(a.result)},a.readAsDataURL(e)}))},V=a(16),k=a(469),P=a(137),S=a(30),F=a(425),I=function(e){var n=Object(m.a)(e,3),a=n[0],t=n[1],r=n[2],i=function(e){var n=e.toString(16).toUpperCase();return 2===n.length?n:"0"+n};return"#".concat(i(a)).concat(i(t)).concat(i(r))},B=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},E=function(e){return e[3]<64},N=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},Q=function(e,n,a){return Math.max(Math.min(e,a),n)},T=function(e){var n=Object(m.a)(e,4),a=n[0],t=n[1],r=n[2],i=n[3];return[Q(a,0,255),Q(t,0,255),Q(r,0,255),Q(i,0,255)]},R=[0,0,0,0],W=function(e,n,a){var t=Object(m.a)(e,2),r=t[0],i=t[1],o=Object(m.a)(a,2),c=o[0],s=o[1];if(c<0||c>=r||s<0||s>=i)return R;var u=X(e,c,s);return[n[u],n[u+1],n[u+2],n[u+3]]};function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new P.AssertionError({message:n,actual:e})}var D=function(e,n){return{dimensions:e.dimensions,frames:e.frames.map((function(a,t){return n(a,t,e.frames.length)}))}},U=function(e,n){for(var a=Object(m.a)(e,2),t=a[0],r=a[1],i=new Uint8Array(t*r*4),o=0;o<r;o+=1)for(var c=0;c<t;c+=1){var s=T(n([c,o])),u=X(e,c,o);i[u]=s[0],i[u+1]=s[1],i[u+2]=s[2],i[u+3]=s[3]}return i},Y=function(e){return function(n){var a=n.image,t=n.random,r=n.parameters;return D(a,(function(n,i,o){return U(a.dimensions,(function(c){return e({image:a,dimensions:a.dimensions,random:t,parameters:r,coord:c,frameCount:o,frameIndex:i,animationProgress:i/o,getSrcPixel:function(e){return W(a.dimensions,n,e)}})}))}))}},L=function(e,n){return function(a){var t=a.image,r=a.random,i=a.parameters;return D(t,(function(a,o,c){var s=o/c,u=e({image:t,dimensions:t.dimensions,random:r,parameters:i,frameCount:c,frameIndex:o,animationProgress:s});return U(t.dimensions,(function(e){return n({computed:u,image:t,dimensions:t.dimensions,random:r,parameters:i,coord:e,frameCount:c,frameIndex:o,animationProgress:s,getSrcPixel:function(e){return W(t.dimensions,a,e)}})}))}))}},X=function(e,n,a){return 4*(n+a*Object(m.a)(e,1)[0])},q=function(e){for(var n=e.image,a=e.newWidth,t=e.newHeight,r=Object(m.a)(n.dimensions,2),i=r[0]/a,o=r[1]/t,c=z({dimensions:[a,t],frameCount:n.frames.length}),s=0;s<c.frames.length;s+=1)for(var u=0;u<t;u+=1)for(var l=0;l<a;l+=1){var d=Math.floor(l*i),f=Math.floor(u*o),h=J({image:n,frameIndex:s,coord:[d,f]});Z({image:c,frameIndex:s,color:h,coord:[l,u]})}return c},G=function(e){for(var n=e.image,a=e.newWidth,t=e.newHeight,r=Object(m.a)(n.dimensions,2),i=r[0],o=r[1],c=Math.round((a-i)/2),s=Math.round((t-o)/2),u=z({dimensions:[a,t],frameCount:n.frames.length}),l=0;l<u.frames.length;l+=1)for(var d=0;d<t;d+=1)for(var f=0;f<a;f+=1){var h=f>c&&f<a-c&&d>s&&d<t-s?J({image:n,frameIndex:l,coord:[f-c,d-s]}):R;Z({image:u,frameIndex:l,coord:[f,d],color:h})}return u},z=function(e){return{dimensions:e.dimensions,frames:Object(F.a)(0,e.frameCount).map((function(){return new Uint8Array(e.dimensions[0]*e.dimensions[1]*4)}))}},J=function(e){return W(e.image.dimensions,e.image.frames[e.frameIndex],e.coord)},Z=function(e){var n=X(e.image.dimensions,e.coord[0],e.coord[1]),a=e.image.frames[e.frameIndex];a[n]=e.color[0],a[n+1]=e.color[1],a[n+2]=e.color[2],a[n+3]=e.color[3]},K=function(e,n,a){return(1-e/100)*n+e/100*a},_=function(e,n,a){var t=Object(m.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3],s=S.rgb.hsl([r,i,o]),u=Object(m.a)(s,3),l=u[1],d=u[2],f=S.hsl.rgb([n,K(a,l,100),d]),h=Object(m.a)(f,3),p=h[0],g=h[1],j=h[2];return[K(a,r,p),K(a,i,g),K(a,o,j),c]},$=function(e,n){var a=Object(m.a)(e,4),t=a[0],r=a[1],i=a[2],o=a[3],c=S.rgb.hsl([t,r,i]),s=Object(m.a)(c,3),u=s[0],l=s[1],d=s[2],f=S.hsl.rgb([(u+n)%360,l,d]),h=Object(m.a)(f,3);return[h[0],h[1],h[2],o]},ee=function(e,n){var a=n[0]-e[0],t=n[1]-e[1];return(360+180*Math.atan2(t,a)/Math.PI)%360},ne=function(e){return[].concat(Object(V.a)(S.hsl.rgb([e,100,50])),[255])},ae=function(e,n){var a=Object(m.a)(e,4),t=a[0],r=a[1],i=a[2],o=a[3],c=S.rgb.hsl(t,r,i),s=Object(m.a)(c,3),u=s[0],l=s[1],d=s[2],f=K(Math.abs(n),l,n>=0?100:0),h=S.hsl.rgb([u,f,d]),p=Object(m.a)(h,3);return[p[0],p[1],p[2],o]},te=function(e,n){var a=e[0]-n[0],t=e[1]-n[1],r=e[2]-n[2],i=(e[0]+n[0])/2,o=(2+i/256)*a*a,c=(2+(255-i)/256)*t*t,s=4*r*r;return Math.sqrt(o+c+s)/765},re=function(e,n){var a=e.frames;return{dimensions:e.dimensions,frames:Object(F.a)(0,n).map((function(e){var t=Math.floor(e/n*a.length);return a[t]}))}},ie=function(e,n,a){return e.map((function(e,t){return n===t?a(e):e}))},oe=a(434),ce=a(437),se=a(464),ue=function(e){var n;return{name:e.name,params:e.params,description:e.description,fn:e.fn,disabled:null!==(n=e.disabled)&&void 0!==n&&n}},le=a(448),me=a(440),de=a(461),fe=a(459),he=function(e){var n=e.description;return n?Object(C.jsx)(fe.a,{title:n,children:Object(C.jsx)(b.a,{fontSize:"small",color:"action",children:"help"})}):null},pe=function(e){var n=e.name,a=e.value,t=e.description,i=e.parse,o=e.onChange,c=r.a.useState(a.toString()),s=Object(m.a)(c,2),u=s[0],l=s[1],d=r.a.useState(""),h=Object(m.a)(d,2),g=h[0],j=h[1];return Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:t})]}),Object(C.jsxs)(le.a,{children:[Object(C.jsx)(me.a,{error:!!g,value:u,onBlur:function(){if(u!==a.toString()){var e=i(u);e.valid?(j(""),o(e.value)):j(e.reason)}},onChange:function(e){l(e.target.value)}}),g&&Object(C.jsx)(de.a,{children:g})]})]})},ge=function(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){var a=e.min,t=e.max;return Object(C.jsx)(pe,{name:e.name,description:e.description,parse:function(e){var n=parseInt(e,10);return isNaN(n)||n.toString()!==e?{valid:!1,reason:"Must be an integer"}:void 0!==a&&n<a?{valid:!1,reason:"Must be greater than or equal to ".concat(a)}:void 0!==t&&n>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:n}},onChange:n.onChange,value:n.value})}}},je=a(446),be=function(e){var n=e.name,a=e.value,t=e.min,r=e.max,i=e.step,o=e.description,c=e.onChange;return Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:o})]}),Object(C.jsxs)(f.a,{direction:"row",spacing:2,sx:{paddingLeft:"8px",paddingRight:"8px"},children:[Object(C.jsx)(je.a,{"aria-label":n,value:a,step:i,valueLabelDisplay:"off",getAriaValueText:function(e){return e.toString()},min:t,max:r,onChange:function(e,n){return c(n)}}),Object(C.jsx)(p.a,{variant:"body2",children:a})]})]})};function ve(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){return Object(C.jsx)(be,{name:e.name,value:n.value,onChange:n.onChange,min:e.min,max:e.max,step:e.step,description:e.description})}}}var Oe=ue({name:"Adjust Image",description:"Leave a parameter at 0 if you want to not change it",params:[ve({name:"Number of Frames",description:"Set how many frames of animation there will be. Leave at 0 to not change the current frame count.",defaultValue:0,min:0,max:60}),ge({name:"Width",description:"Leave at 0 to not change the width. If height is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),ge({name:"Height",description:"Leave at 0 to not change the height. If width is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),ve({name:"Brightness",min:-100,max:100,step:5,defaultValue:0}),ve({name:"Contrast",min:-100,max:100,step:5,defaultValue:0}),ve({name:"Saturation",min:-100,max:100,step:5,defaultValue:0})],fn:function(e){var n=e.image,a=Object(m.a)(e.parameters,6),t=a[0],r=a[1],i=a[2],o=a[3],c=a[4],s=a[5],u=0!==t,l=Object(m.a)(n.dimensions,2),d=l[0],f=l[1],h=r>0||i>0,p=h&&0===r?Math.ceil(d/f*i):r,g=h&&0===i?Math.ceil(f/d*r):i,j=p*g>d*f,b=n;return u&&t<n.frames.length&&(b=re(b,t)),h&&!j&&(b=q({image:b,newWidth:p,newHeight:g})),b=D(b,(function(e){return U(b.dimensions,(function(n){var a=W(b.dimensions,e,n);return 0!==o&&(a=function(e,n){var a=n/100*128,t=Object(m.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];return T([r+a,i+a,o+a,c])}(a,o)),0!==c&&(a=function(e,n){var a=n/100+1,t=Object(m.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];return T([a*(r-128)+128,a*(i-128)+128,a*(o-128)+128,c])}(a,c)),0!==s&&(a=ae(a,s)),a}))})),h&&j&&(b=q({image:b,newWidth:p,newHeight:g})),u&&t>n.frames.length&&(b=re(b,t)),b}}),xe=a(105),Ae=function(e){var n=e.color;return Object(C.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:I(n)}})},Ce=function(e){var n=e.name,a=e.value,t=e.description,r=e.onChange;return Object(C.jsx)(w,{mainEle:Object(C.jsxs)(f.a,{direction:"row",spacing:4,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:t}),a&&Object(C.jsx)(Ae,{color:a})]}),children:Object(C.jsx)(xe.b,{disableAlpha:!0,presetColors:[],color:I(a),onChangeComplete:function(e){r(B(e.hex))}})})};function we(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){return Object(C.jsx)(Ce,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}var Me=ue({name:"Background Color",description:"Change all transparent pixles to the given color",params:[we({name:"Color",defaultValue:B("#000000")})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(m.a)(e.parameters,1)[0],r=a(n);return E(r)?t:r}))}),ye=a(189),Ve=a.n(ye),ke=a(190),Pe=a.n(ke),Se=a(100),Fe=a.n(Se),Ie=function(){var e=Object(l.a)(s.a.mark((function e(n){var a,t,r,i,o,c,u,l,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.image,t=n.effectInput,r=n.randomSeed,i=n.fps,o=Fe()(r),c=Jn(t.effectName),u=c.fn({image:a,parameters:t.params,random:o}),l=Qe(u,o),e.next=7,Ee({image:Be(u,l),transparentColor:l,fps:i});case 7:return m=e.sent,e.abrupt("return",{gif:m,image:u});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Be=function(e,n){var a=e.frames.map((function(e){for(var a=new Uint8Array(e.length),t=0;t<e.length;t+=4)n&&e[t+3]<128?(a[t]=n[0],a[t+1]=n[1],a[t+2]=n[2],a[t+3]=0):(a[t]=e[t],a[t+1]=e[t+1],a[t+2]=e[t+2],a[t+3]=0);return a}));return{dimensions:e.dimensions,frames:a}},Ee=function(){var e=Object(l.a)(s.a.mark((function e(n){var a,t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.image,t=n.transparentColor,r=n.fps,e.abrupt("return",new Promise((function(e){var n=Object(m.a)(a.dimensions,2),i=n[0],o=n[1],c=new Pe.a(i,o);if(c.setFrameRate(r),c.setRepeat(0),c.writeHeader(),t){var s=I(t).slice(1);c.setTransparent("0x".concat(s))}var u=[];c.on("data",(function(e){u.push(e)})),c.on("end",(function(){var n=URL.createObjectURL(new Blob(u,{type:"image/gif"}));e(n)})),a.frames.forEach((function(e){c.addFrame(e)})),c.finish()})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ne=function(e){return new Promise((function(n,a){return Ve()(e,(function(e,t){if(e)return a(e);if(3===t.shape.length){var r=Object(m.a)(t.shape,2),i=r[0],o=r[1];return n({frames:[Uint8Array.from(t.data)],dimensions:[i,o]})}for(var c=Object(m.a)(t.shape,3),s=c[0],u=c[1],l=c[2],d=u*l*4,f=[],h=0;h<s;h+=1)f.push(t.data.subarray(h*d,(h+1)*d));return n({frames:f,dimensions:[u,l]})}))}))},Qe=function(e,n){var a=!1,t=new Set,r=Object(m.a)(e.dimensions,2),i=r[0],o=r[1],c=I([0,255,0,255]);return e.frames.forEach((function(r){for(var s=0;s<o;s+=1)for(var u=0;u<i;u+=1){var l=W(e.dimensions,r,[u,s]);if(E(l))a=!0;else{var m=I(l);t.add(m),m===c&&(c=Te(n,t))}}})),a?B(c):void 0},Te=function e(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=I(N(n));return t>2e3?r:a.has(r)?e(n,a,t+1):r},Re={dataUrl:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAAQABAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAgEBAgICAgICAwICAgIDBAMDAwMDBAUEBAQEBAQFBQUFBQUFBQYGBgYGBgcHBwcHCAgICAgICAgICP/bAEMBAQEBAgICAwICAwgFBAUICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICP/dAAQAAf/aAAwDAQACEQMRAD8A/wA/+iiigD//2Q==",image:{dimensions:[1,1],frames:[new Uint8Array([0,0,0,255])]}};var We=a(452),He=a(462),De=a(443),Ue=function(e){var n=e.name,a=e.options,t=e.value,r=e.description,i=e.onChange;return Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:r})]}),Object(C.jsx)(le.a,{component:"fieldset",children:Object(C.jsx)(We.a,{"aria-label":n,defaultValue:t,onChange:function(e){return i(e.target.value)},children:a.map((function(e){return Object(C.jsx)(He.a,{value:e.value,control:Object(C.jsx)(De.a,{}),label:e.name},e.value)}))})})]})};function Ye(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){return Object(C.jsx)(Ue,{name:e.name,value:n.value,options:e.options,description:e.description,onChange:function(e){return n.onChange(e)}})}}}var Le=ue({name:"Background Image",description:"Select another image to be used as a background or foreground",params:[function(e){var n=e.name;return{name:n,defaultValue:Re,fn:function(e){return Object(C.jsx)(M,{currentImageUrl:e.value.dataUrl,name:n,width:64,height:64,onChange:function(){var n=Object(l.a)(s.a.mark((function n(a){var t;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ne(a);case 2:t=n.sent,e.onChange({dataUrl:a,image:t});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}}}({name:"Image"}),Ye({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]})],fn:L((function(e){var n=e.image.dimensions,a=Object(m.a)(e.parameters,2),t=a[0],r=a[1];return{otherImage:G({image:t.image,newWidth:n[0],newHeight:n[1]}),type:r}}),(function(e){var n=e.coord,a=e.animationProgress,t=e.computed,r=t.otherImage,i=t.type,o=e.getSrcPixel,c=Math.floor(a*r.frames.length),s=J({image:r,frameIndex:c,coord:n}),u=o(n);return"background"===i?E(u)?s:u:E(s)?u:s}))}),Xe=ue({name:"Bounce",description:"Make the image bounce up and down",params:[ge({name:"Bounce Speed",description:"Positive number",defaultValue:5,min:0})],fn:L((function(e){var n=e.animationProgress,a=Object(m.a)(e.parameters,1)[0];return{yOffset:Math.round(a*Math.sin(2*n*Math.PI))}}),(function(e){var n=e.computed.yOffset,a=Object(m.a)(e.coord,2),t=a[0],r=a[1];return(0,e.getSrcPixel)([t,r+n])}))}),qe=a(433),Ge=a(435),ze=a(436),Je=ue({name:"Bounce Animation",description:"When the animation finishes, it will be replayed in reverse",params:[],fn:function(e){var n=e.image;return{dimensions:n.dimensions,frames:Object(qe.a)(n.frames,Object(oe.a)(n.frames,Object(Ge.a)(1),Object(ze.a)(),Object(Ge.a)(1)))}}}),Ze=ue({name:"Circle",description:"Make the image move in a circular pattern",params:[ge({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:L((function(e){var n=e.animationProgress,a=Object(m.a)(e.parameters,1)[0];return{xOffset:Math.round(a*Math.sin(-2*Math.PI*n)),yOffset:Math.round(a*Math.cos(-2*Math.PI*n))}}),(function(e){var n=e.computed,a=n.xOffset,t=n.yOffset,r=Object(m.a)(e.coord,2),i=r[0],o=r[1];return(0,e.getSrcPixel)([i+a,o+t])}))}),Ke=a(463),_e=function(e){var n=e.name,a=e.newParamText,t=e.createNewParam,i=e.value,o=e.description,c=e.onChange,s=r.a.useState(i.map((function(e){return{param:t(),pValue:e}}))),u=Object(m.a)(s,2),l=u[0],d=u[1];return Object(C.jsx)(g.a,{children:Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:o})]}),l.map((function(e,a){var t=e.param,r=e.pValue,i=t.fn({value:r,onChange:function(e){var n=l.map((function(n,r){return a===r?{param:t,pValue:e}:n}));d(n),c(n.map((function(e){return e.pValue})))}});return Object(C.jsxs)(f.a,{direction:"row",children:[Object(C.jsx)(Ke.a,{onClick:function(){var e=l.filter((function(e,n){return n!==a}));d(e),c(e.map((function(e){return e.pValue})))},style:{visibility:0===a?"hidden":void 0},children:Object(C.jsx)(b.a,{children:"delete"})}),i]},"".concat(n,"-").concat(a))})),Object(C.jsx)(j.a,{variant:"contained",onClick:function(){var e=t(),n=[].concat(Object(V.a)(l),[{param:e,pValue:e.defaultValue}]);d(n),c(n.map((function(e){return e.pValue})))},children:a})]})})};function $e(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){return Object(C.jsx)(_e,{name:e.name,newParamText:e.newParamText,value:n.value,createNewParam:e.createNewParam,description:e.description,onChange:n.onChange})}}}var en=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(B),nn=ue({name:"Colors",description:"Make the image flash different colors",params:[$e({name:"Colors",newParamText:"New Color",defaultValue:en,createNewParam:function(){return we({name:"Color",defaultValue:en[0]})}})],fn:L((function(e){var n=e.animationProgress,a=Object(m.a)(e.parameters,1)[0];return{chosenColor:a[Math.floor(n*a.length)]}}),(function(e){var n=e.computed.chosenColor,a=e.coord,t=(0,e.getSrcPixel)(a);if(E(t))return[0,0,0,0];var r=function(e){var n=Object(m.a)(e,3),a=n[0],t=n[1],r=n[2];return Math.round((a+t+r)/3)}(t);return[r*n[0]/255,r*n[1]/255,r*n[2]/255,255]}))}),an=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(B),tn=ue({name:"Colors Background",description:"Transparent pixels will flash different colors",params:[$e({name:"Colors",newParamText:"New Color",defaultValue:an,createNewParam:function(){return we({name:"Color",defaultValue:an[0]})}})],fn:L((function(e){var n=e.animationProgress,a=Object(m.a)(e.parameters,1)[0];return{bgColor:a[Math.floor(n*a.length)]}}),(function(e){var n=e.computed.bgColor,a=e.coord,t=(0,e.getSrcPixel)(a);return E(t)?n:t}))}),rn=function(e){var n=e.name,a=e.value,t=e.description,i=e.parse,o=e.onChange,c=r.a.useState(a.toString()),s=Object(m.a)(c,2),u=s[0],l=s[1],d=r.a.useState(""),h=Object(m.a)(d,2),g=h[0],j=h[1];return Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:t})]}),Object(C.jsxs)(le.a,{children:[Object(C.jsx)(me.a,{error:!!g,value:u,onBlur:function(){if(u!==a.toString()){var e=i(u);e.valid?(j(""),o(e.value)):j(e.reason)}},onChange:function(e){l(e.target.value)}}),g&&Object(C.jsx)(de.a,{children:g})]})]})},on=function(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){var a=e.min,t=e.max;return Object(C.jsx)(rn,{name:e.name,description:e.description,parse:function(e){var n=parseFloat(e);return isNaN(n)||n.toString()!==e?{valid:!1,reason:"Must be a number"}:void 0!==a&&n<a?{valid:!1,reason:"Must be greater than or equal to ".concat(a)}:void 0!==t&&n>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:n}},onChange:n.onChange,value:n.value})}}},cn=ue({name:"Double Vision",description:"See the image in double",params:[on({name:"Amplitude",defaultValue:10,min:0})],fn:L((function(e){var n=e.animationProgress;return{xOffset:Object(m.a)(e.parameters,1)[0]*Math.sin(-2*Math.PI*n)}}),(function(e){var n=e.computed.xOffset,a=Object(m.a)(e.coord,2),t=a[0],r=a[1],i=t%2===0?-1:1;return(0,e.getSrcPixel)([t+Math.round(i*n),r])}))}),sn=ue({name:"Expand",description:"Make the image grow and shrink",params:[ge({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:L((function(e){var n=Object(m.a)(e.dimensions,2),a=n[0],t=n[1],r=e.animationProgress,i=Object(m.a)(e.parameters,1)[0];return{dist:Math.cos(2*r*Math.PI)*i,centerX:a/2,centerY:t/2}}),(function(e){var n=e.computed,a=n.centerX,t=n.centerY,r=n.dist,i=Object(m.a)(e.dimensions,2),o=i[0],c=i[1],s=Object(m.a)(e.coord,2),u=s[0],l=s[1],d=(u-a)/o,f=(l-t)/c;return(0,e.getSrcPixel)([u-Math.floor(r*d),l-Math.round(r*f)])}))}),un=ue({disabled:!0,name:"Fill Transparent",description:"Makes transparent all pixels of similar color surrounding a point",params:[ve({name:"Tolerance",defaultValue:50,min:0,max:100})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=(Object(m.a)(e.parameters,1)[0],a([0,0]),a(n),Object(m.a)(n,2));t[0],t[1];return[0,0,0,0]}))}),ln=ue({name:"Fisheye",description:"Make the image grow and shrink in a distorted fashion",params:[ge({name:"Radius",description:"Positive Number",defaultValue:10,min:0})],fn:L((function(e){var n=e.animationProgress,a=Object(m.a)(e.dimensions,2),t=a[0],r=a[1];return{dist:(n<.5?n:1-n)*Object(m.a)(e.parameters,1)[0],centerX:t/2,centerY:r/2}}),(function(e){var n=e.computed,a=n.dist,t=n.centerX,r=n.centerY,i=Object(m.a)(e.coord,2),o=i[0],c=i[1],s=e.getSrcPixel,u=Math.atan2(r-c,t-o);return s([o+Math.round(a*Math.cos(u)),c+Math.round(a*Math.sin(u))])}))}),mn=ue({name:"Grid",description:"Removes the color from all pixels not aligned with a grid",params:[ve({name:"Grid Size",description:"The length of each square in the grid",defaultValue:24,min:2,max:64,step:2}),ve({name:"Grid Angle",defaultValue:45,min:0,max:90})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(m.a)(e.parameters,2),r=t[0],i=t[1],o=a(n),c=Object(m.a)(n,2),s=c[0],u=c[1],l=!1;if(i%90===0)l=s%r===0||u%r===0;else{var d=(64-r)/64*.1+.03,f=function(e){var n=1/r*(u-Math.tan(dn(e))*s);return Math.abs(Math.round(n)-n)<d};l=f(i)||f(i+90)}return l?o:ae(o,-100)}))}),dn=function(e){return e*Math.PI/180},fn=function(e){var n=e.name,a=e.value,t=e.description,r=e.onChange,i=void 0===a?void 0:I([].concat(Object(V.a)(S.hsl.rgb([a,255,255])),[255]));return Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:t})]}),Object(C.jsx)(xe.a,{color:i,onChangeComplete:function(e){var n=e.hsl;return r(n.h)}})]})};function hn(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){return Object(C.jsx)(fn,{name:e.name,value:n.value,onChange:n.onChange})}}}var pn,gn=ue({name:"Hue Change",description:"Change the hue of the image to some other color",params:[hn({name:"Hue",defaultValue:180}),ve({name:"Amount",description:"How strong the effect is.",min:0,max:100,step:5,defaultValue:75})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(m.a)(e.parameters,2),r=t[0],i=t[1];return _(a(n),r,i)}))}),jn=ue({name:"Hue Shift",description:"Shift the hue of each pixel in the image by some amount",params:[ve({name:"Amount",description:"How much to shift the hue of each pixel",min:0,max:100,step:5,defaultValue:50})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(m.a)(e.parameters,1)[0];return $(a(n),t/100*360)}))}),bn=ue({name:"Hue Shift Pulse",description:"Shift the hue to the given value in a pulsating manner",params:[hn({name:"Hue",defaultValue:180})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=e.frameCount,r=e.frameIndex,i=Object(m.a)(e.parameters,1)[0],o=a(n);if(E(o))return o;var c=Math.abs(Math.sin(Math.PI*(r/t)));return _(o,i,360*c)}))}),vn=ue({name:"Hue Wave",description:"Shifts the hue of pixels in the image in a wave motion",params:[ve({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the hue shift effect should be"}),ve({name:"Period",defaultValue:1,min:1,max:20,description:"How many waves you want"})],fn:L((function(e){return{shift:-1*e.animationProgress*2*Math.PI}}),(function(e){var n=e.computed.shift,a=e.coord,t=Object(m.a)(e.dimensions,2)[1],r=Object(m.a)(e.parameters,2),i=r[0],o=r[1],c=e.getSrcPixel,s=Object(m.a)(a,2),u=(s[0],s[1]),l=Math.round(i*Math.sin(u/t*o*Math.PI+n));return $(c(a),l/100*360)}))}),On=function(e){var n=e.name,a=e.value,t=e.description,i=e.onChange,o=r.a.useState(a),c=Object(m.a)(o,2),s=c[0],u=c[1];return Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",children:n}),Object(C.jsx)(he,{description:t})]}),Object(C.jsx)(le.a,{children:Object(C.jsx)(me.a,{value:s,onChange:function(e){return u(e.target.value)},onBlur:function(){s.length>0&&i(s)}})})]})},xn=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],An=ue({name:"Lightning",description:"Make the background look like a thunderstorm",params:[(pn={name:"Random Seed",description:"Can be anything. Will determine the randomness of the lightning.",defaultValue:"lightning"},{name:pn.name,defaultValue:pn.defaultValue,fn:function(e){return Object(C.jsx)(On,{name:pn.name,description:pn.description,onChange:e.onChange,value:e.value})}})],fn:function(e){var n=e.image,a=Object(m.a)(e.parameters,1)[0],t=Fe()(a);return D(n,(function(e){var a=t(),r=a<.9?0:a<.95?1:a<.98?2:3;return U(n.dimensions,(function(a){var t=W(n.dimensions,e,a);if(E(t))return xn[r];if(r>0){var i=1.02*r;return[t[0]*i,t[1]*i,t[2]*i,t[3]]}return t}))}))}}),Cn=ue({name:"Nuke",description:"Oh no...",params:[],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=255*e.animationProgress,r=a(n),i=Object(m.a)(r,4),o=i[0],c=i[1],s=i[2],u=i[3],l=S.rgb.hsl(o,c,s),d=Object(m.a)(l,3),f=d[0],h=d[1],p=d[2],g=S.hsl.rgb([f,h,p>t?p:0]),j=Object(m.a)(g,3);return[j[0],j[1],j[2],p>t?u:0]}))}),wn=ue({name:"Party",description:"Shift the hue of the image over the course of the animation",params:[Ye({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Amount",description:"How strong the effect is",min:0,max:100,step:5,defaultValue:50}),ve({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=e.animationProgress,r=Object(m.a)(e.parameters,3),i=r[0],o=r[1],c=r[2],s=a(n),u=E(s),l=t*c*360%360;return u&&"background"===i?ne(l):u||"foreground"!==i?s:_(s,l,o)}))}),Mn=ue({name:"Party Two",description:"Shift the hue of each individual pixel over the course of the animation",params:[],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=e.animationProgress,r=a(n);return E(r)?r:$(r,360*t)}))}),yn=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(B),Vn=ue({name:"Pinwheel",description:"Create a pinwheel of colors",params:[ve({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),$e({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:yn,createNewParam:function(){return we({name:"Color",defaultValue:yn[0]})}}),ge({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),ge({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:L((function(e){for(var n=Object(m.a)(e.parameters,4),a=n[0],t=n[1],r=(n[2],n[3],t.length*a),i=Math.round(360/r),o=t.length;"00"!==(r/o).toFixed(2).slice(-2);)o-=1;return{colorsLength:o,ribbonArcDegrees:i}}),(function(e){var n=e.computed,a=n.ribbonArcDegrees,t=n.colorsLength,r=e.coord,i=e.dimensions,o=e.animationProgress,c=e.getSrcPixel,s=Object(m.a)(e.parameters,4),u=(s[0],s[1]),l=s[2],d=s[3],f=c(r);if(!E(f))return f;var h=[i[0]/2+l,i[1]/2-d],p=ee(r,h),g=Math.floor(p/a)%t;return u[(Math.floor(o*t)+g)%t]}))}),kn=ue({name:"Pinwheel Party",description:"Create a pinwheel of party colors",params:[ve({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Ye({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),ge({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),ge({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:L((function(e){var n=Object(m.a)(e.dimensions,2),a=n[0],t=n[1],r=Object(m.a)(e.parameters,5);r[0],r[1],r[2];return{center:[a/2+r[3],t/2-r[4]]}}),(function(e){var n=e.computed.center,a=e.coord,t=e.animationProgress,r=e.getSrcPixel,i=Object(m.a)(e.parameters,3),o=i[0],c=i[1],s=i[2],u=r(a),l=E(u);if("foreground"===c?l:!l)return u;var d=(ee(a,n)*o+360*t)%360;return l?ne(d):_(u,d,s)}))}),Pn=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(B),Sn=ue({name:"Radiance",description:"Radiate colors out in rings",params:[ve({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),$e({name:"Colors",newParamText:"New Color",description:"The colors that make up each ring",defaultValue:Pn,createNewParam:function(){return we({name:"Color",defaultValue:Pn[0]})}}),ge({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),ge({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:L((function(e){var n=Object(m.a)(e.dimensions,2),a=n[0],t=n[1],r=Object(m.a)(e.parameters,2),i=r[0],o=r[1];return{colorList:Object(F.a)(0,i).flatMap((function(){return o})),centerX:a/2,centerY:t/2}}),(function(e){var n=e.computed,a=n.centerX,t=n.centerY,r=n.colorList,i=Object(m.a)(e.dimensions,2),o=i[0],c=i[1],s=e.coord,u=e.animationProgress,l=Object(m.a)(e.parameters,4),d=(l[0],l[1],l[2]),f=l[3],h=(0,e.getSrcPixel)(s);if(!E(h))return h;var p=Object(m.a)(s,2),g=p[0]-a-d,j=p[1]-t+f,b=Math.sqrt(o/2*(o/2)+c/2*(c/2)),v=Math.sqrt(j*j+g*g),O=Math.floor((1-v/b)*r.length)%r.length;return r[(Math.floor(u*r.length)+O)%r.length]}))}),Fn=ue({name:"Radiance Party",description:"Radiate party colors out in rings",params:[ve({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Ye({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),ge({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),ge({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:L((function(e){var n=Object(m.a)(e.dimensions,2),a=n[0],t=n[1];return{centerX:a/2,centerY:t/2,maxDist:Math.sqrt(a/2*(a/2)+t/2*(t/2))}}),(function(e){var n=e.computed,a=n.centerX,t=n.centerY,r=n.maxDist,i=e.coord,o=e.animationProgress,c=Object(m.a)(e.parameters,5),s=c[0],u=c[1],l=c[2],d=c[3],f=c[4],h=(0,e.getSrcPixel)(i),p=E(h);if("foreground"===u?p:!p)return h;var g=Object(m.a)(i,2),j=g[0]-a-d,b=g[1]-t+f,v=(360*(1-Math.sqrt(b*b+j*j)/r)*s+360*o)%360;return p?ne(v):_(h,v,l)}))}),In=a(438),Bn=ue({name:"Reduce Color Palette",description:"Reduce the number of unique colors in the gif, to reduce the file size.This can be a slow operation depending on the number of final colors",params:[ve({name:"Percent Reduction",description:"0% will have no effect, 100% will result in just one unique color in the result",defaultValue:70,min:0,max:100,step:5})],fn:L((function(e){var n=e.image,a=Object(m.a)(e.parameters,1)[0],t=new Set;D(n,(function(e){return U(n.dimensions,(function(a){var r=W(n.dimensions,e,a);return E(r)||t.add(I(r)),R}))}));for(var r=Array.from(t).map(B),i=Math.max(Math.floor(r.length*(100-a)/100),1),o=r.map((function(e){return{color:e,numClosestColors:0}})),c=1;c<r.length;c+=1){for(var s=0,u=te(r[c],r[s]),l=0;l<r.length;l+=1)if(l!==c){var d=te(r[l],r[c]);d<u&&(s=l,u=d)}o[s].numClosestColors+=1}return{colorPalette:Object(ce.a)(o,[function(e){return e.numClosestColors},"desc"]).slice(0,i).map((function(e){return e.color}))}}),(function(e){var n=e.coord,a=e.getSrcPixel,t=e.computed.colorPalette,r=a(n);return E(r)?r:Object(In.a)(t,(function(e){return te(e,r)}))}))}),En=ue({name:"Repeat Animation",description:"Repeats the current animation some number of times",params:[ve({name:"Number of Repeats",defaultValue:1,min:1,max:50})],fn:function(e){var n=e.image,a=Object(m.a)(e.parameters,1)[0];return{dimensions:n.dimensions,frames:Object(F.a)(0,n.frames.length*(a+1)).map((function(e){return n.frames[e%n.frames.length]}))}}}),Nn=ue({name:"Resize Image",description:"Change the dimensions of the image. If bigger than original, the extra space will be transparent. If smaller, the image will be cropped. ",params:[ge({name:"Width",description:"Set to 0 when height is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0}),ge({name:"Height",description:"Set to 0 when width is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0})],fn:function(e){var n=e.image,a=Object(m.a)(e.parameters,2),t=a[0],r=a[1],i=Object(m.a)(n.dimensions,2),o=i[0],c=i[1],s=0===t?Math.ceil(o/c*r):t,u=0===r?Math.ceil(c/o*t):r;return G({image:n,newWidth:s,newHeight:u})}}),Qn=ue({name:"Reverse Animation",description:"Reverses the animation",params:[],fn:function(e){var n=e.image;return{dimensions:n.dimensions,frames:Object(ze.a)(n.frames)}}}),Tn=ue({name:"Ripple",description:"Create a ripple effect, like water",params:[ve({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the ripple effect should be"}),ve({name:"Period",defaultValue:1,min:1,max:20,description:"How many ripples you want"})],fn:L((function(e){return{shift:2*e.animationProgress*Math.PI}}),(function(e){var n=e.computed.shift,a=Object(m.a)(e.coord,2),t=a[0],r=a[1],i=Object(m.a)(e.dimensions,2)[1],o=Object(m.a)(e.parameters,2),c=o[0],s=o[1];return(0,e.getSrcPixel)([t+Math.round(c*Math.sin(r/i*s*Math.PI+n)),r])}))}),Rn=ue({name:"Rotate",description:"Make the image rotate about the center point",params:[Ye({name:"Direction",defaultValue:"clockwise",options:[{name:"Clockwise",value:"clockwise"},{name:"Counter-Clockwise",value:"counter"}]})],fn:L((function(e){var n=e.animationProgress*("counter"===Object(m.a)(e.parameters,1)[0]?1:-1);return{cos:Math.cos(2*Math.PI*n),sin:Math.sin(2*Math.PI*n)}}),(function(e){var n=Object(m.a)(e.dimensions,2),a=n[0],t=n[1],r=Object(m.a)(e.coord,2),i=r[0],o=r[1],c=e.computed,s=c.cos,u=c.sin,l=a/2,d=t/2,f=i-l,h=o-d;return(0,e.getSrcPixel)([Math.round(l+f*s-h*u),Math.round(d+h*s+f*u)])}))}),Wn=ue({name:"Roxbury",description:"Baby, don't hurt me",params:[],fn:L((function(e){var n=Object(m.a)(e.dimensions,2),a=n[0],t=n[1],r=e.animationProgress,i=Math.floor(4*r),o=4*(r-i/4),c=Math.PI/2*.2,s=0===i?0:1===i?o*c:2===i?c:(1-o)*c;return{angle:s,cos:Math.cos(1.35*-s),sin:Math.sin(1.35*-s),rotatePointX:.25*a,rotatePointY:.7*t}}),(function(e){var n=e.computed,a=n.angle,t=n.cos,r=n.sin,i=n.rotatePointX,o=n.rotatePointY,c=Object(m.a)(e.coord,2),s=c[0],u=c[1],l=e.getSrcPixel,d=Math.floor(s-i+8*Math.sin(a)),f=Math.floor(u-o+8*Math.cos(a));return l([Math.round(i+d*t-f*r),Math.round(o+f*t+d*r)])}))}),Hn=ue({name:"Shake",description:"Make the image shake back and forth",params:[on({name:"Amplitude",defaultValue:10,min:0})],fn:L((function(e){var n=e.animationProgress,a=Object(m.a)(e.parameters,1)[0];return{xOffset:Math.round(a*Math.cos(2*n*Math.PI))}}),(function(e){var n=e.computed.xOffset,a=Object(m.a)(e.coord,2),t=a[0],r=a[1];return(0,e.getSrcPixel)([t+n,r])}))}),Dn=ue({name:"Slow Animation",description:"Attempts to slow the animation by adding intermediate frames",params:[Ye({name:"Interpolation Type",options:[{name:"Basic",value:"basic"},{name:"Smooth",value:"smooth"}],defaultValue:"basic",description:"With basic interpolation, frames are simply duplicated. With smooth interpolation, intermediate frames are the average of their surrounding frames."})],fn:function(e){var n=e.image,a=Object(m.a)(e.parameters,1)[0];return{dimensions:n.dimensions,frames:Object(F.a)(0,2*n.frames.length-1).map((function(e){if(e%2===0)return n.frames[e/2];var t=(e-1)/2;return"basic"===a?n.frames[t]:U(n.dimensions,(function(e){var a=W(n.dimensions,n.frames[t],e),r=Object(m.a)(a,4),i=r[0],o=r[1],c=r[2],s=r[3],u=W(n.dimensions,n.frames[t+1],e),l=Object(m.a)(u,4);return[(i+l[0])/2,(o+l[1])/2,(c+l[2])/2,(s+l[3])/2]}))}))}}}),Un=ue({disabled:!0,name:"Spin",description:"Make the image spin in a 3D-like way",params:[],fn:Y((function(e){var n=e.image,a=Object(m.a)(e.coord,2),t=a[0],r=a[1],i=e.frameCount,o=e.frameIndex,c=e.getSrcPixel,s=n.dimensions[0]/2,u=o/i,l=2*Math.PI*u;return c([Math.round(s+t*Math.cos(l)),r])}))}),Yn=ue({name:"Static",description:"Adds random static to the image",params:[Ye({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(m.a)(e.parameters,2),r=t[0],i=t[1],o=e.random,c=a(n),s=E(c);if("foreground"===r?s:!s)return c;if(s&&"background"===r){var u=Math.ceil(100*o())<i,l=Math.ceil(255*o());return u?[l,l,l,255]:c}var d=Math.ceil(100*o())<i,f=Math.ceil(255*o());return d?[f,f,f,c[3]]:c}))}),Ln=a(447),Xn=function(e){var n=e.name,a=e.value,t=e.description,r=e.onChange;return Object(C.jsx)(f.a,{spacing:1,children:Object(C.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(C.jsx)(p.a,{variant:"body2",paddingTop:"0.5rem",children:n}),Object(C.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(C.jsx)(he,{description:t})}),Object(C.jsx)(Ln.a,{"aria-label":n,checked:a,onChange:function(e,n){return r(n)}})]})})};var qn=ue({name:"Transparency",description:"Set certain pixels to be transparent",params:[function(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(n){return Object(C.jsx)(Xn,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}({name:"Matches are Transparent",description:"If checked, then pixels matching this color will be made transparent. If not checked, non-matching pixels are transparent.",defaultValue:!0}),we({name:"Color",defaultValue:B("#000000")}),ve({name:"Tolerance",description:'A higher number will mean colors that are "close" to the chosen color will be transparent. (0 - 100)',defaultValue:10,min:0,max:100,step:2})],fn:Y((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(m.a)(e.parameters,3),r=t[0],i=t[1],o=t[2],c=a(n),s=100*te(c,i)<=o;return(r?s:!s)?[c[0],c[1],c[2],0]:c}))}),Gn=ue({name:"Transpose",description:"Move the image left or right, up or down",params:[ge({name:"X",defaultValue:0}),ge({name:"Y",defaultValue:0})],fn:Y((function(e){var n=Object(m.a)(e.coord,2),a=n[0],t=n[1],r=e.getSrcPixel,i=Object(m.a)(e.parameters,2);return r([a+i[0],t+i[1]])}))}),zn=Object(oe.a)([Oe,Me,Le,Xe,Je,Ze,nn,tn,cn,sn,un,ln,mn,gn,jn,bn,vn,An,Cn,wn,Mn,Vn,kn,Sn,Fn,Bn,En,Nn,Qn,Tn,Rn,Wn,Hn,Dn,Un,Yn,qn,Gn],Object(ce.a)((function(e){return e.name})),Object(se.a)((function(e){return e.disabled}))),Jn=function(e){var n=zn.find((function(n){return n.name===e}));return H(n,"Could not find matching effect: ".concat(e)),n},Zn=a(442),Kn=a(465),_n=a(466),$n=a(467),ea=a(468),na=function(e){var n=e.selectedEffect,a=e.possibleEffect,t=e.index,i=e.onSelect,o=e.onRemove,c=e.onMoveBefore,s=e.onMoveAfter,l=r.a.useState(!1),d=Object(m.a)(l,2),v=d[0],O=d[1],x=r.a.useState(Object(V.a)(n.paramValues)),A=Object(m.a)(x,2),w=A[0],M=A[1],y=r.a.useState(!1),k=Object(m.a)(y,2),P=k[0],S=k[1],F=function(e){var a=e.save;O(!1),a&&P?i(Object(u.a)(Object(u.a)({},n),{},{paramValues:w})):M(Object(V.a)(n.paramValues)),S(!1)};return Object(C.jsx)(g.a,{style:{padding:8},elevation:3,sx:{width:300},children:Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsxs)(f.a,{direction:"row",spacing:2,children:[Object(C.jsx)(p.a,{variant:"subtitle1",children:t+1}),Object(C.jsx)(fe.a,{title:"Delete effect",children:Object(C.jsx)(Ke.a,{"aria-label":"delete",onClick:o,children:Object(C.jsx)(b.a,{children:"delete"})})}),Object(C.jsx)(fe.a,{title:"Move effect earlier",children:Object(C.jsx)(Ke.a,{"aria-label":"move-before",onClick:c,disabled:!c,children:Object(C.jsx)(b.a,{children:"arrow_upward"})})}),Object(C.jsx)(fe.a,{title:"Move effect later",children:Object(C.jsx)(Ke.a,{"aria-label":"move-after",onClick:s,disabled:!s,children:Object(C.jsx)(b.a,{children:"arrow_downward"})})})]}),Object(C.jsx)(f.a,{direction:"row",spacing:4,children:Object(C.jsx)(le.a,{fullWidth:!0,children:Object(C.jsx)(Zn.a,{disableClearable:!0,value:n.effect.name,options:a.map((function(e){return e.name})),onChange:function(e,n){var t=a.find((function(e){return e.name===n}));i({effect:t,paramValues:t.params.map((function(e){return e.defaultValue}))})},renderInput:function(e){return Object(C.jsx)(me.a,Object(u.a)(Object(u.a)({},e),{},{label:"Effect"}))}})})}),n.effect.params.length>0?Object(C.jsx)(j.a,{variant:"contained",startIcon:Object(C.jsx)(b.a,{children:"edit"}),onClick:function(){return O(!v)},children:"Edit Parameters"}):Object(C.jsx)(j.a,{variant:"contained",disabled:!0,children:"(No Parameters Available)"}),Object(C.jsxs)(Kn.a,{fullWidth:!0,maxWidth:"sm",open:v,children:[Object(C.jsxs)(_n.a,{children:[n.effect.name," Parameters"]}),Object(C.jsx)($n.a,{children:Object(C.jsxs)(f.a,{divider:Object(C.jsx)(h.a,{}),spacing:2,children:[n.effect.description&&Object(C.jsx)(p.a,{variant:"caption",children:n.effect.description}),n.effect.params.map((function(e,a){var t=e.fn({value:w[a],onChange:function(e){S(!0),M(w.map((function(n,t){return t===a?e:n})))}});return Object(C.jsx)(r.a.Fragment,{children:t},"".concat(n.effect.name,"-").concat(e.name))}))]})}),Object(C.jsxs)(ea.a,{children:[Object(C.jsx)(j.a,{variant:"outlined",autoFocus:!0,onClick:function(){F({save:!1})},children:"Cancel"}),Object(C.jsx)(j.a,{variant:"contained",autoFocus:!0,disabled:!P,onClick:function(){F({save:!0})},children:"Save and Close"})]})]})]})})},aa=function(e){var n=e.currentEffect,a=e.possibleEffects,t=e.onEffectsChange;return Object(C.jsxs)(f.a,{spacing:4,children:[Object(C.jsx)(p.a,{variant:"h5",children:"Image Effects"}),n.map((function(e,r){return Object(C.jsxs)(f.a,{direction:"row",spacing:4,children:[Object(C.jsx)(na,{index:r,possibleEffect:a,selectedEffect:{effect:Jn(e.effectName),paramValues:e.paramsValues},onRemove:function(){return t(n.filter((function(e,n){return n!==r})))},onMoveBefore:r>0?function(){return t(n.map((function(e,a){return a===r-1?n[a+1]:r===a?n[r-1]:e})))}:void 0,onMoveAfter:r<n.length-1?function(){return t(n.map((function(e,a){return a===r+1?n[a-1]:r===a?n[r+1]:e})))}:void 0,onSelect:function(e){return t(ie(n,r,(function(n){return Object(u.a)(Object(u.a)({},n),{},{effectName:e.effect.name,paramsValues:e.paramValues})})))}}),"done"===e.state.status&&Object(C.jsx)(f.a,{sx:{width:200},children:Object(C.jsx)("img",{src:e.state.image.gif,alt:"gif-".concat(e.effectName,"-").concat(r),style:{maxWidth:"300px",maxHeight:"auto"}})}),"computing"===e.state.status&&Object(C.jsx)(k.a,{size:100})]},function(e,n){return"".concat(e.effectName,"-").concat(n,"-").concat("done"===e.state.status?e.state.image.gif.substring(0,10):"pending")}(e,r))})),Object(C.jsx)(j.a,{fullWidth:!1,variant:"contained",startIcon:Object(C.jsx)(b.a,{children:"add"}),size:"large",onClick:function(){return t([].concat(Object(V.a)(n),[{effectName:a[0].name,paramsValues:a[0].params.map((function(e){return e.defaultValue})),state:{status:"init"}}]))},children:"New Effect"})]})},ta=a(444),ra=a(141),ia=function(e){var n=e.state,a=e.onImport,t=r.a.useState(),i=Object(m.a)(t,2),o=i[0],c=i[1],u=r.a.useState(!1),d=Object(m.a)(u,2),h=d[0],g=d[1],v=function(){g(!0),setTimeout((function(){return g(!1)}),2e3)};return Object(C.jsxs)(f.a,{spacing:3,children:[Object(C.jsx)(p.a,{variant:"h5",children:"Import/Export"}),Object(C.jsxs)(j.a,{startIcon:Object(C.jsx)(b.a,{children:"file_upload"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){var e=ra.compressToBase64(JSON.stringify(n));navigator.clipboard.writeText(e),c("Copied to clipboard"),setTimeout((function(){return c(void 0)}),2e3)},children:["Export to clipboard ",Object(C.jsx)("br",{}),"(With Source Image)"]}),Object(C.jsx)(j.a,{startIcon:Object(C.jsx)(b.a,{children:"file_download"}),sx:{maxWidth:"300px"},variant:"contained",onClick:Object(l.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:if(n=e.sent){e.next=7;break}return v(),e.abrupt("return");case 7:if(t=JSON.parse(ra.decompressFromBase64(n)),Array.isArray(t.effects)){e.next=11;break}return v(),e.abrupt("return");case 11:a(t),g(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),v();case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),children:"Import from clipboard"}),o&&Object(C.jsx)(ta.a,{severity:"info",sx:{maxWidth:"300px"},children:o}),h&&Object(C.jsx)(ta.a,{severity:"error",sx:{maxWidth:"300px"},children:"Error importing from clipboard"})]})};function oa(){return new Worker(a.p+"static/js/effect.worker.18b38672.worker.js")}var ca=function(e){return new Promise((function(n,a){var t=new oa;t.addEventListener("error",a),t.addEventListener("messageerror",a),t.onmessage=function(e){var a=e.data;"complete"===a.status&&n(a.result)},t.postMessage(e)}))},sa=window.ENV,ua=function(){var e=Object(l.a)(s.a.mark((function e(n,a){var t,r,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.effects.map((function(e){return{effectName:e.effectName,params:e.paramsValues}})),H(n.baseImage,"No source image, this button should be disabled!"),e.next=4,Ne(n.baseImage);case 4:r=e.sent,i="DEV"===sa?Ie:ca,o=0;case 7:if(!(o<t.length)){e.next=18;break}return c=Date.now(),e.next=11,i({randomSeed:n.baseImage,image:r,effectInput:t[o],fps:n.fps});case 11:u=e.sent,ga("send",{hitType:"timing",timingCategory:"computeStep",timingVar:t[o].effectName,timingValue:Math.ceil((Date.now()-c)/1e3)}),r=u.image,a(u,o);case 15:o+=1,e.next=7;break;case 18:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),la="partymoji-state",ma=function(){try{window.localStorage.removeItem(la)}catch(e){console.error("Error clearing state from local storage",e.stack||e)}},da=function(e){var n=Object(u.a)(Object(u.a)({},e),{},{effects:e.effects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{state:{status:"init"}})}))});return JSON.stringify(n)},fa=ve({name:"Final Gif Frames per Second",defaultValue:20,min:1,max:60}),ha={version:2,effects:[],baseImage:void 0,fps:20},pa=function(){var e=r.a.useState(ha),n=Object(m.a)(e,2),a=n[0],t=n[1],i=r.a.useState(!1),o=Object(m.a)(i,2),c=o[0],O=o[1],x=r.a.useState(null),A=Object(m.a)(x,2),w=A[0],y=A[1];r.a.useEffect((function(){var e=function(){try{var e=window.localStorage.getItem(la);if(e){var n=JSON.parse(e);if(Array.isArray(n.effects))return n}}catch(a){console.error("Error loading state from local storage",a.stack||a)}}();e&&(2===e.version?(t(e),O(!0)):ma())}),[]);var V=r.a.useCallback((function(e,n){var a=n.compute;t((function(n){var t=e(n);return function(e){try{window.localStorage.setItem(la,da(e))}catch(n){console.error("Error saving state to local storage",n.stack||n)}}(t),"no"!==a&&(w&&(clearTimeout(w),y(null)),"now"===a?O(!0):(O(!1),y(setTimeout((function(){y(null),O(!0)}),1e3)))),t}))}),[]);return r.a.useEffect((function(){c&&(O(!1),Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V((function(e){return Object(u.a)(Object(u.a)({},e),{},{effects:e.effects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{state:{status:"computing"}})}))})}),{compute:"no"}),e.next=3,ua(a,(function(e,n){V((function(a){return Object(u.a)(Object(u.a)({},a),{},{effects:ie(a.effects,n,(function(n){return Object(u.a)(Object(u.a)({},n),{},{state:{status:"done",image:e}})}))})}),{compute:"no"})}));case 3:case"end":return e.stop()}}),e)})))())}),[c]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(v.a,{}),Object(C.jsx)(d.a,{maxWidth:"md",children:Object(C.jsxs)(f.a,{spacing:4,justifyContent:"space-evenly",divider:Object(C.jsx)(h.a,{}),children:[Object(C.jsx)(p.a,{variant:"h2",pt:4,children:"Partymoji"}),Object(C.jsxs)(f.a,{spacing:4,divider:Object(C.jsx)(h.a,{}),children:[false,Object(C.jsx)(g.a,{style:{padding:16},children:Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsx)(p.a,{variant:"h5",children:"Source Image"}),Object(C.jsx)(M,{name:"Choose a source image",currentImageUrl:a.baseImage,onChange:function(e){V((function(n){return Object(u.a)(Object(u.a)({},n),{},{baseImage:e})}),{compute:"now"})}}),Object(C.jsx)("div",{style:{maxWidth:"300px"},children:fa.fn({value:a.fps,onChange:function(e){return V((function(n){return Object(u.a)(Object(u.a)({},n),{},{fps:e})}),{compute:"later"})}})})]})}),Object(C.jsx)(g.a,{style:{padding:16},children:Object(C.jsx)(aa,{currentEffect:a.effects,possibleEffects:zn,onEffectsChange:function(e){return V((function(n){return Object(u.a)(Object(u.a)({},n),{},{effects:e})}),{compute:"now"})}})}),Object(C.jsx)(g.a,{style:{padding:16},children:Object(C.jsx)(ia,{state:a,onImport:function(e){return V((function(){return e}),{compute:"now"})}})}),Object(C.jsx)(g.a,{style:{padding:16},children:Object(C.jsxs)(f.a,{spacing:3,children:[Object(C.jsx)(p.a,{variant:"h5",children:"Clear State"}),Object(C.jsx)(p.a,{variant:"body1",children:"Clicking this button will clear the source image and all effects"}),Object(C.jsx)(j.a,{startIcon:Object(C.jsx)(b.a,{children:"clear"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){ma(),t(ha)},children:"Clear State"})]})}),Object(C.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(C.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:64,height:64,alt:"Github Link"})})]})]})})]})},ja=a(97),ba=a(98),va=a(193),Oa=a(192),xa=function(e){Object(va.a)(a,e);var n=Object(Oa.a)(a);function a(){var e;Object(ja.a)(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).state={hasError:!1},e}return Object(ba.a)(a,[{key:"componentDidCatch",value:function(e,n){console.error("Uncaught error:",e,n)}},{key:"render",value:function(){return this.state.hasError?Object(C.jsxs)(f.a,{spacing:1,children:[Object(C.jsx)(p.a,{variant:"h2",children:"Oh no!"}),Object(C.jsx)(p.a,{variant:"body1",children:"There seems to have been an issue"}),Object(C.jsx)(p.a,{variant:"body2",children:"If refreshing the page doesn't fix things, click the below button to clear local storage"}),Object(C.jsx)(j.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:Object(C.jsx)(b.a,{children:"priority_high"}),startIcon:Object(C.jsx)(b.a,{children:"priority_high"}),onClick:this.props.onClearLocalStorage,children:"Clear storage and reload"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),a}(r.a.Component);o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(xa,{onClearLocalStorage:function(){ma(),window.location.reload()},children:Object(C.jsx)(pa,{})})}),document.getElementById("root"))}},[[382,1,2]]]);
//# sourceMappingURL=main.78004f89.chunk.js.map