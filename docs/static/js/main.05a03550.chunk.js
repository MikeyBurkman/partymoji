(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{266:function(e,n){},268:function(e,n){},396:function(e,n){},402:function(e,n){},406:function(e,n,a){"use strict";a.r(n);var t={};a.r(t),a.d(t,"assert",(function(){return K})),a.d(t,"replaceIndex",(function(){return _})),a.d(t,"removeIndex",(function(){return $})),a.d(t,"insertInto",(function(){return ee})),a.d(t,"isUrl",(function(){return ne})),a.d(t,"copyToClipboard",(function(){return ae})),a.d(t,"readFromClipboard",(function(){return te})),a.d(t,"clamp",(function(){return re})),a.d(t,"weightedValue",(function(){return ie})),a.d(t,"calculateAngle",(function(){return oe})),a.d(t,"pointDistance",(function(){return ce})),a.d(t,"bezierCurve",(function(){return se})),a.d(t,"LINEAR_BEZIER",(function(){return ue})),a.d(t,"dataURItoBlob",(function(){return le})),a.d(t,"blobOrFileToDataUrl",(function(){return me}));var r={};a.r(r),a.d(r,"toHexColor",(function(){return fe})),a.d(r,"fromHexColor",(function(){return de})),a.d(r,"isHexColor",(function(){return pe})),a.d(r,"isTransparent",(function(){return he})),a.d(r,"isPartiallyTransparent",(function(){return ge})),a.d(r,"randomColor",(function(){return be})),a.d(r,"getAveragePixelValue",(function(){return je})),a.d(r,"clampColor",(function(){return ve})),a.d(r,"TRANSPARENT_COLOR",(function(){return xe})),a.d(r,"shiftTowardsHue",(function(){return Oe})),a.d(r,"shiftHue",(function(){return Ae})),a.d(r,"setBrightness",(function(){return Ce})),a.d(r,"colorFromHue",(function(){return we})),a.d(r,"adjustSaturation",(function(){return ye})),a.d(r,"adjustBrightness",(function(){return Ie})),a.d(r,"adjustContrast",(function(){return Fe})),a.d(r,"colorDiff",(function(){return ke})),a.d(r,"linearInterpolation",(function(){return Se}));var i={};a.r(i),a.d(i,"createCanvas",(function(){return Ee})),a.d(i,"frameToCanvas",(function(){return Ve})),a.d(i,"canvasToFrame",(function(){return Be})),a.d(i,"drawImageOnCanvas",(function(){return Pe})),a.d(i,"applyCanvasFromFrame",(function(){return Te})),a.d(i,"combineImages",(function(){return Re})),a.d(i,"applyFilter",(function(){return De})),a.d(i,"applyTransform",(function(){return He})),a.d(i,"applyRotation",(function(){return Qe})),a.d(i,"applyScale",(function(){return Ne}));var o={};a.r(o),a.d(o,"getPixelFromSource",(function(){return ze})),a.d(o,"mapFrames",(function(){return Ye})),a.d(o,"mapCoords",(function(){return Ge})),a.d(o,"mapImage",(function(){return Le})),a.d(o,"mapImageWithPrecompute",(function(){return Xe})),a.d(o,"getImageIndex",(function(){return Ze})),a.d(o,"scaleImage",(function(){return Je})),a.d(o,"resizeImage",(function(){return Ke})),a.d(o,"createNewImage",(function(){return _e})),a.d(o,"duplicateImage",(function(){return $e})),a.d(o,"getPixel",(function(){return en})),a.d(o,"setPixel",(function(){return nn})),a.d(o,"changeFrameCount",(function(){return an})),a.d(o,"isPartiallyTransparent",(function(){return tn}));var c={};a.r(c),a.d(c,"readImage",(function(){return ln})),a.d(c,"getImageFromUrl",(function(){return mn}));var s=a(207),u=a(484),l=a(0),m=a.n(l),f=a(58),d=a.n(f),p=a(16),h=a(18),g=a.n(h),b=a(23),j=a(3),v=a(502),x=a(454),O=a(455),A=a(489),C=a(487),w=a(492),y=a(483),I=a(486),F=a(453),k=a(488),S=a(4),M=a(210),E=a(6),V=a(450),B=a(49),P=a(485),T=a(1),R=Object(E.a)((function(e){var n=e.className,a=Object(M.a)(e,["className"]);return Object(T.jsx)(V.a,Object(p.a)(Object(p.a)({},a),{},{classes:{popper:n}}))}))((function(e){var n=e.theme;return Object(S.a)({},"& .".concat(B.a.tooltip),{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:n.typography.pxToRem(12),border:"1px solid #dadde9"})})),D=function(e){var n=e.name,a=e.onClick,t=e.isDisabled,r=e.label,i=m.a.useState(!1),o=Object(j.a)(i,2),c=o[0],s=o[1],u=m.a.useCallback((function(){a&&s(!0)}),[a]),l=m.a.useCallback((function(){a&&s(!1)}),[a]);return Object(T.jsxs)(P.a,{variant:"extended",size:"small",disabled:t,onClick:a,onMouseEnter:u,onMouseLeave:l,color:c?"secondary":"primary",children:[Object(T.jsx)(I.a,{sx:{mr:1},children:n}),r]})},H=function(e){var n=e.name,a=e.tooltip,t=e.htmlTooltip,r=e.color,i=Object(T.jsx)(I.a,{color:r,children:n});return a?t?Object(T.jsx)(R,{title:a,children:i}):Object(T.jsx)(V.a,{title:a,children:i}):i},Q=function(e){var n=e.mainEle,a=e.children,t=m.a.useState(!0),r=Object(j.a)(t,2),i=r[0],o=r[1];return Object(T.jsx)(F.a,{onClickAway:function(){return o(!0)},children:Object(T.jsxs)(x.a,{children:[Object(T.jsx)(C.a,{variant:"text",onClick:function(){return o(!i)},style:{color:"black"},size:"small",children:Object(T.jsxs)(x.a,{direction:"row",alignItems:"center",spacing:4,children:[Object(T.jsx)("div",{children:n}),Object(T.jsx)(H,{name:i?"add":"remove"})]})}),Object(T.jsx)(k.a,{in:!i,children:a})]})})},N=function(){return Object(T.jsx)(Q,{mainEle:Object(T.jsx)(A.a,{variant:"h5",children:"Click here for Help"}),children:Object(T.jsxs)(W,{children:[Object(T.jsx)(Q,{mainEle:Object(T.jsx)(A.a,{variant:"h6",children:"Getting Started"}),children:Object(T.jsxs)(q,{children:[Object(T.jsx)(U,{children:"Start by importing an image."}),Object(T.jsx)(z,{children:"You may upload a png, jpg, or gif from your device."}),Object(T.jsx)(z,{children:"Alternatively, you can post a URL to a png, jpg, or gif, though this can be a little flaky, and does not support animated images."}),Object(T.jsx)(z,{children:"The frames per second controls how fast the final gif will animate."}),Object(T.jsx)(z,{children:"Remember that gifs do not support partial transparency. A pixel will be either completely transparent, or not transparent at all. Some effects will create partially transparent pixels. When your gif has partially transparent pixels, you'll see a fake background applied behind it in the preview."})]})}),Object(T.jsx)(Q,{mainEle:Object(T.jsx)(A.a,{variant:"h6",children:"Adding Effects"}),children:Object(T.jsxs)(W,{children:[Object(T.jsx)(q,{children:Object(T.jsxs)(q,{children:[Object(T.jsx)(U,{children:"Effects are applied to an image to manipulate it"}),Object(T.jsx)(z,{children:"Some may adjust the basic attributes of an image, such as size, or number of animation frames."}),Object(T.jsx)(z,{children:"Others may apply animated effects, such as making the image spin, or cycle through colors."})]})}),Object(T.jsx)(O.a,{}),Object(T.jsxs)(q,{children:[Object(T.jsx)(U,{children:'For static images, you\'ll likely want to first "Set Animation Length".'}),Object(T.jsx)(z,{children:"This controls how many frames are in the animation. Typically this is between 10 and 20."}),Object(T.jsx)(z,{children:"More frames will increase both the time to compute the image, and the final file size."}),Object(T.jsx)(z,{children:"Remember that some places (like Slack and Discord) have strict limits on the file size of emojis, so you may need to reduce the number of frames in order to meet those requirements. Slack has a limit of 128kb, and Discord has a limit of 256kb."})]}),Object(T.jsx)(O.a,{}),Object(T.jsxs)(q,{children:[Object(T.jsx)(U,{children:'If uploading to Slack or Discord, you will probably want to use "Adjust Image" to set the width and height.'}),Object(T.jsx)(z,{children:"Slack has a limit of 128x128 pixels. Discord has a limit of 256x256."}),Object(T.jsx)(z,{children:"Making images smaller will also decrease how long it takes to apply effects."})]}),Object(T.jsx)(O.a,{}),Object(T.jsxs)(q,{children:[Object(T.jsx)(U,{children:"The order of effects matters"}),Object(T.jsx)(z,{children:"The result of each effect is send to the next effect."}),Object(T.jsx)(z,{children:"Because of this, the order of effects matter."}),Object(T.jsx)(z,{children:"Experiment with moving effects around to see different effects."}),Object(T.jsx)(z,{children:"For instance, applying a background color before rotating the image will have a very different effect than rotating before setting a background color."})]})]})}),Object(T.jsx)(Q,{mainEle:Object(T.jsx)(A.a,{variant:"h6",children:"Creating Gifs"}),children:Object(T.jsx)(W,{children:Object(T.jsxs)(q,{children:[Object(T.jsx)(U,{children:"Gifs will compute automatically"}),Object(T.jsx)(z,{children:"Whenever you add an effect, it will automatically compute a new gif with that effect."}),Object(T.jsx)(z,{children:"The gif below each effect shows the results of that effect."}),Object(T.jsx)(z,{children:'Click on "Save Gif" at the bottom to export the final version of the gif after all effects have been applied.'})]})})})]})})},W=function(e){var n=e.children;return Object(T.jsx)(x.a,{spacing:2,children:n})},q=function(e){var n=e.children;return Object(T.jsx)(x.a,{width:"sm",spacing:1,children:n})},U=function(e){var n=e.children;return Object(T.jsx)(A.a,{variant:"body1",paddingLeft:"0.5rem",children:n})},z=function(e){var n=e.children;return Object(T.jsxs)(A.a,{variant:"body2",paddingLeft:"1.0rem",children:[Object(T.jsx)(I.a,{sx:{fontSize:8,marginRight:1},children:"circle"})," ",n]})},Y=a(471),G=a(494),L=a(17),X=a(30),Z=a(197),J=a.n(Z);function K(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new Error("AssertionFailure: ".concat(n))}var _=function(e,n,a){return e.map((function(e,t){return n===t?a(e):e}))},$=function(e,n){return e.filter((function(e,a){return console.log("Removing",{index:n,idx:a}),n!==a}))},ee=function(e,n,a){return[].concat(Object(L.a)(e.slice(0,n)),[a],Object(L.a)(e.slice(n)))},ne=function(e){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(e)},ae=function(e){return navigator.clipboard.writeText(e)},te=function(){return navigator.clipboard.readText()},re=function(e,n,a){return Math.max(Math.min(e,a),n)},ie=function(e,n,a){return(1-e/100)*n+e/100*a},oe=function(e,n){var a=n[0]-e[0],t=n[1]-e[1];return(360+180*Math.atan2(t,a)/Math.PI)%360},ce=function(e,n){var a=Object(j.a)(e,2),t=a[0],r=a[1],i=Object(j.a)(n,2),o=i[0],c=i[1],s=Math.pow(o-t,2),u=Math.pow(c-r,2);return Math.sqrt(s+u)},se=function(e,n){var a=J()(e[0][0],e[0][1],e[1][0],e[1][1]);return n?function(e){return a(e<.5?2*e:1-2*(e-.5))}:function(e){return a(e)}},ue=[[.1,.1],[.9,.9]],le=function(e){for(var n=e.split(","),a=atob(n[1]),t=n[0].split(":")[1].split(";")[0],r=new ArrayBuffer(a.length),i=new Uint8Array(r),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);return new Blob([r],{type:t})},me=function(e){return new Promise((function(n){var a=new FileReader;a.onload=function(){return n(a.result)},a.readAsDataURL(e)}))},fe=function(e){var n=Object(j.a)(e,3),a=n[0],t=n[1],r=n[2],i=function(e){var n=e.toString(16).toUpperCase();return 2===n.length?n:"0"+n};return"#".concat(i(a)).concat(i(t)).concat(i(r))},de=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},pe=function(e){return/^#[0-9A-F]{6}$/.test(e)},he=function(e){return e[3]<64},ge=function(e){return!he(e)&&e[3]<128},be=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},je=function(e){var n=Object(j.a)(e,3),a=n[0],t=n[1],r=n[2];return Math.round((a+t+r)/3)},ve=function(e){var n=Object(j.a)(e,4),a=n[0],t=n[1],r=n[2],i=n[3];return[re(a,0,255),re(t,0,255),re(r,0,255),re(i,0,255)]},xe=[0,0,0,0],Oe=function(e,n,a){var t=Object(j.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3],s=X.rgb.hsl([r,i,o]),u=Object(j.a)(s,3),l=u[1],m=u[2],f=X.hsl.rgb([n,ie(a,l,100),m]),d=Object(j.a)(f,3),p=d[0],h=d[1],g=d[2];return[ie(a,r,p),ie(a,i,h),ie(a,o,g),c]},Ae=function(e,n){var a=Object(j.a)(e,4),t=a[0],r=a[1],i=a[2],o=a[3],c=X.rgb.hsl([t,r,i]),s=Object(j.a)(c,3),u=s[0],l=s[1],m=s[2],f=X.hsl.rgb([(u+n)%360,l,m]),d=Object(j.a)(f,3);return[d[0],d[1],d[2],o]},Ce=function(e,n){var a=Object(j.a)(e,4),t=a[0],r=a[1],i=a[2],o=a[3],c=X.rgb.hsl([t,r,i]),s=Object(j.a)(c,2),u=s[0],l=s[1],m=X.hsl.rgb([u,l,n]),f=Object(j.a)(m,3);return[f[0],f[1],f[2],o]},we=function(e){return[].concat(Object(L.a)(X.hsl.rgb([e,100,50])),[255])},ye=function(e,n){var a=Object(j.a)(e,4),t=a[0],r=a[1],i=a[2],o=a[3],c=X.rgb.hsl(t,r,i),s=Object(j.a)(c,3),u=s[0],l=s[1],m=s[2],f=ie(Math.abs(n),l,n>=0?100:0),d=X.hsl.rgb([u,f,m]),p=Object(j.a)(d,3);return[p[0],p[1],p[2],o]},Ie=function(e,n){var a=n/100*128,t=Object(j.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];return ve([r+a,i+a,o+a,c])},Fe=function(e,n){var a=n/100+1,t=Object(j.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];return ve([a*(r-128)+128,a*(i-128)+128,a*(o-128)+128,c])},ke=function(e,n){var a=e[0]-n[0],t=e[1]-n[1],r=e[2]-n[2],i=(e[0]+n[0])/2,o=(2+i/256)*a*a,c=(2+(255-i)/256)*t*t,s=4*r*r;return Math.sqrt(o+c+s)/765},Se=function(e){var n=Object(j.a)(e.c1,3),a=n[0],t=n[1],r=n[2],i=Object(j.a)(e.c2,3),o=i[0],c=i[1],s=i[2],u=e.amount;return[Math.floor((1-u)*a+u*o),Math.floor((1-u)*t+u*c),Math.floor((1-u)*r+u*s),255]},Me="undefined"===typeof window,Ee=function(e){var n=Object(j.a)(e,2),a=n[0],t=n[1];if(Me){var r=new OffscreenCanvas(a,t),i=r.getContext("2d");return K(i,"Canvas not supported"),{canvas:r,ctx:i}}var o=document.createElement("canvas");o.width=a,o.height=t;var c=o.getContext("2d");return K(c,"Canvas not supported"),{canvas:o,ctx:c}},Ve=function(e){var n=e.dimensions,a=e.frame,t=Object(j.a)(n,2),r=t[0],i=t[1],o=Ee(n),c=o.canvas,s=o.ctx,u=new ImageData(a,r,i);return s.putImageData(u,0,0),{canvas:c,ctx:s}},Be=function(e){return e.ctx.getImageData(0,0,e.canvas.width,e.canvas.height).data},Pe=function(e){var n=e.ctx,a=e.dimensions,t=e.frame;n.drawImage(Ve({dimensions:a,frame:t}).canvas,0,0)},Te=function(e){var n=e.dimensions,a=e.frame,t=e.preEffect,r=e.postEffect,i=Ee(n);return i.ctx.save(),null===t||void 0===t||t(i),i.ctx.drawImage(Ve({dimensions:n,frame:a}).canvas,0,0),i.ctx.restore(),null===r||void 0===r||r(i),i.ctx.getImageData(0,0,n[0],n[1]).data},Re=function(e){var n=e.dimensions,a=e.background,t=e.foreground,r="canvas"in a?a:Ve({dimensions:n,frame:a}),i="canvas"in t?t:Ve({dimensions:n,frame:t});return r.ctx.drawImage(i.canvas,0,0),Be(r)},De=function(e,n){var a,t=n.blur,r=n.brightness,i=n.contrast,o=n.opacity,c=n.saturation,s=n.hueRotate,u=n.sepia,l=n.dropShadow,m=l?["".concat(l.offsetX,"px"),"".concat(l.offsetY,"px"),"".concat(null!==(a=l.blurRadius)&&void 0!==a?a:0,"px"),"".concat(fe(l.color))].join(" "):null,f=[null==t?"":"blur(".concat(t,"px)"),null==r?"":"brightness(".concat(r,"%)"),null==i?"":"contrast(".concat(i,"%)"),null==o?"":"opacity(".concat(o,"%)"),null==c?"":"saturate(".concat(c,"%)"),null==s?"":"hue-rotate(".concat(s,"deg)"),null==u?"":"sepia(".concat(u,"%)"),null==m?"":"drop-shadow(".concat(m,")")].filter((function(e){return e.length>0}));return e.ctx.filter=f.join(" "),e},He=function(e,n){var a=n.horizontalScale,t=n.verticalScale,r=n.horizontalSkew,i=n.verticalSkew,o=n.horizontalTranslation,c=n.verticalTranslation;return e.ctx.transform(null!==a&&void 0!==a?a:1,null!==i&&void 0!==i?i:0,null!==r&&void 0!==r?r:0,null!==t&&void 0!==t?t:1,null!==o&&void 0!==o?o:0,null!==c&&void 0!==c?c:0),e},Qe=function(e,n){var a=e.canvas.width/2,t=e.canvas.height/2;He(e,{horizontalTranslation:a,verticalTranslation:t});var r=-n*Math.PI/180;return e.ctx.rotate(r),He(e,{horizontalTranslation:-a,verticalTranslation:-t}),e},Ne=function(e,n){var a=Object(j.a)(n,2),t=a[0],r=a[1];return e.ctx.scale(t,r),e},We=function(e){var n=e.width,a=e.height,t=e.cursorIsPointer,r=e.onCanvasMount,i=e.onMouseDown,o=e.onMouseUp,c=e.onMouseMove,s=e.onMouseLeave,u=m.a.useRef(null),l=m.a.useRef(!1);m.a.useEffect((function(){if(u.current&&!l.current){var e=u.current.getContext("2d");null!=e&&(r({canvas:u.current,ctx:e}),l.current=!0)}}),[l,r]);var f=function(e){return function(n){if(u.current&&e){var a=u.current.getBoundingClientRect(),t=n.clientX-a.left,r=n.clientY-a.top;setTimeout((function(){return e([t,r])}),0)}}},d=m.a.useMemo((function(){return t?{cursor:"pointer"}:void 0}),[t]),p=m.a.useMemo((function(){return f(i)}),[i]),h=m.a.useMemo((function(){return f(o)}),[o]),g=m.a.useMemo((function(){return f(c)}),[c]),b=m.a.useMemo((function(){return f(s)}),[s]);return Object(T.jsx)("canvas",{ref:u,width:n,height:a,onMouseDown:p,onMouseUp:h,onMouseMove:g,onMouseLeave:b,style:d})},qe=a(106),Ue=a(456),ze=function(e,n,a){var t=Object(j.a)(e,2),r=t[0],i=t[1],o=Object(j.a)(a,2),c=o[0],s=o[1];if(c<0||c>=r||s<0||s>=i)return xe;var u=Ze(e,c,s);return[n[u],n[u+1],n[u+2],n[u+3]]},Ye=function(e,n){return{dimensions:e.dimensions,frames:e.frames.map((function(a,t){return n(a,t,e.frames.length)}))}},Ge=function(e,n){for(var a=Object(j.a)(e,2),t=a[0],r=a[1],i=new Uint8ClampedArray(t*r*4),o=0;o<r;o+=1)for(var c=0;c<t;c+=1){var s=ve(n([c,o])),u=Ze(e,c,o);i[u]=s[0],i[u+1]=s[1],i[u+2]=s[2],i[u+3]=s[3]}return i},Le=function(e){return function(n){var a=n.image,t=n.random,r=n.parameters;return Ye(a,(function(n,i,o){return Ge(a.dimensions,(function(c){return e({image:a,dimensions:a.dimensions,random:t,parameters:r,coord:c,frameCount:o,frameIndex:i,animationProgress:i/o,getSrcPixel:function(e){return ze(a.dimensions,n,e)}})}))}))}},Xe=function(e,n){return function(a){var t=a.image,r=a.random,i=a.parameters;return Ye(t,(function(a,o,c){var s=o/c,u=e({image:t,dimensions:t.dimensions,random:r,parameters:i,frameCount:c,frameIndex:o,animationProgress:s});return Ge(t.dimensions,(function(e){return n({computed:u,image:t,dimensions:t.dimensions,random:r,parameters:i,coord:e,frameCount:c,frameIndex:o,animationProgress:s,getSrcPixel:function(e){return ze(t.dimensions,a,e)}})}))}))}},Ze=function(e,n,a){return 4*(n+a*Object(j.a)(e,1)[0])},Je=function(e){var n=e.image,a=e.horizontalScale,t=e.verticalScale,r=Object(j.a)(n.dimensions,2),i=r[0],o=r[1],c=i/2*(null!==a&&void 0!==a?a:1)-i/2,s=o/2*(null!==t&&void 0!==t?t:1)-o/2;return Ye(n,(function(e){return Te({dimensions:n.dimensions,frame:e,preEffect:function(e){return He(e,{horizontalScale:a,verticalScale:t,horizontalTranslation:-c,verticalTranslation:-s})}})}))},Ke=function(e){var n=e.image,a=e.newWidth,t=e.newHeight,r=e.keepScale,i=Ye(n,(function(e){var i=Ee([a,t]),o=Ve({dimensions:n.dimensions,frame:e});if(r)i.ctx.drawImage(o.canvas,0,0,a,t);else{var c=a/2-n.dimensions[0]/2,s=t/2-n.dimensions[1]/2;i.ctx.drawImage(o.canvas,c,s,n.dimensions[0],n.dimensions[1])}return Be(i)}));return{dimensions:[a,t],frames:i.frames}},_e=function(e){return{dimensions:e.dimensions,frames:Object(Ue.a)(0,e.frameCount).map((function(){return new Uint8ClampedArray(e.dimensions[0]*e.dimensions[1]*4)}))}},$e=function(e){return{dimensions:e.dimensions,frames:e.frames.map((function(e){return new Uint8ClampedArray(e)}))}},en=function(e){return ze(e.image.dimensions,e.image.frames[e.frameIndex],e.coord)},nn=function(e){var n=Ze(e.image.dimensions,e.coord[0],e.coord[1]),a=e.image.frames[e.frameIndex];a[n]=e.color[0],a[n+1]=e.color[1],a[n+2]=e.color[2],a[n+3]=e.color[3]},an=function(e,n){var a=e.frames;return{dimensions:e.dimensions,frames:Object(Ue.a)(0,n).map((function(e){var t=Math.floor(e/n*a.length);return a[t]}))}},tn=function(e){var n,a=Object(qe.a)(e.frames);try{for(a.s();!(n=a.n()).done;)for(var t=n.value,r=0;r<e.dimensions[0];r+=1)for(var i=0;i<e.dimensions[1];i+=1){var o=ze(e.dimensions,t,[r,i]);if(ge(o))return!0}}catch(c){a.e(c)}finally{a.f()}return!1},rn=a(198),on=a.n(rn),cn=a(149),sn=function(e){return new Promise((function(n){var a=new FileReader;a.onload=function(){return n(a.result)},a.readAsArrayBuffer(e)}))},un=function(){var e=Object(b.a)(g.a.mark((function e(n){var a,t,r,i,o,c,s,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(n);case 2:return a=e.sent,t=Object(cn.parseGIF)(a),r=[t.lsd.width,t.lsd.height],i=Ee(r),o=[],c=Object(cn.decompressFrames)(t,!0).map((function(e){var n=e.delay;"number"===typeof n&&n>0&&o.push(n),2===e.disposalType&&i.ctx.clearRect(0,0,r[0],r[1]);var a=[e.dims.width,e.dims.height],t=Ee(a),c=t.ctx.createImageData(a[0],a[1]);return c.data.set(e.patch),t.ctx.putImageData(c,0,0),i.ctx.drawImage(t.canvas,e.dims.left,e.dims.top),Be(i)})),s=o.reduce((function(e,n){return e+n}),0)/o.length,u=Math.ceil(1e3/s),e.abrupt("return",{image:{dimensions:r,frames:c},fps:u});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ln=function(){var e=Object(b.a)(g.a.mark((function e(n){var a,t,r,i,o,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof n){e.next=6;break}r=dn(n),t=fn({dataUrl:n,fname:"image.".concat(null!==r&&void 0!==r?r:"gif")}),a=n,e.next=10;break;case 6:return t=n,e.next=9,me(t);case 9:a=e.sent;case 10:if(!t.name.endsWith(".gif")){e.next=18;break}return e.next=14,un(t);case 14:return i=e.sent,o=i.image,c=i.fps,e.abrupt("return",{dataUrl:a,image:o,fps:c});case 18:return e.next=20,new Promise((function(e,n){return on()(a,(function(a,t){if(a)return n(a);if(3===t.shape.length){var r=Object(j.a)(t.shape,2),i=r[0],o=r[1];return e({frames:[Uint8ClampedArray.from(t.data)],dimensions:[i,o]})}for(var c=Object(j.a)(t.shape,3),s=c[0],u=c[1],l=c[2],m=u*l*4,f=[],d=0;d<s;d+=1){var p=t.data.subarray(d*m,(d+1)*m);f.push(Uint8ClampedArray.from(p))}return e({frames:f,dimensions:[u,l]})}))}));case 20:return s=e.sent,e.abrupt("return",{image:s,dataUrl:a,fps:20});case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),mn=function(){var e=Object(b.a)(g.a.mark((function e(n){var a,t,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:if(a=e.sent,t=a.headers.get("content-type")){e.next=6;break}throw new Error("Unable to determine content type");case 6:return e.next=8,a.arrayBuffer();case 8:return r=e.sent,i=btoa(new Uint8Array(r).reduce((function(e,n){return e+String.fromCharCode(n)}),"")),e.abrupt("return","data:".concat(t,";base64,").concat(i));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function fn(e){var n=e.dataUrl,a=e.fname,t=le(n);return new File([t],a)}function dn(e){var n=e.match(/^data:image\/(\w+);/);return null===n||void 0===n?void 0:n[1]}function pn(e){var n=e.value,a=e.debounceMillis,t=e.onChange,r=m.a.useState(n),i=Object(j.a)(r,2),o=i[0],c=i[1],s=m.a.useRef(),u=m.a.useCallback((function(e){c(e),null!=s.current&&clearTimeout(s.current),s.current=setTimeout((function(){t(e)}),null!==a&&void 0!==a?a:200)}),[a,t]);return m.a.useEffect((function(){c(n)}),[n]),[o,u]}var hn=220,gn=function(e){if(null==e)return{maxWidth:"".concat(hn,"px"),maxHeight:"".concat(hn,"px"),width:128};var n=Object(j.a)(e,2),a=n[0],t=n[1],r=t/a;if(a>t){var i=r*hn;return{maxWidth:"".concat(220,"px"),maxHeight:"".concat(i,"px"),width:128,height:128*r}}var o=1/r*hn;return{maxHeight:"".concat(220,"px"),maxWidth:"".concat(o,"px"),width:128,height:128*r}},bn=function(e){var n=e.src,a=e.alt,t=e.dimensions;return Object(T.jsx)("img",{src:n,alt:"gif-".concat(a),style:gn(t)})},jn=function(e){var n=e.split("/");return n[n.length-1]},vn=function(e){var n=e.currentImage,a=e.onChange,r=m.a.useState(),i=Object(j.a)(r,2),s=i[0],u=i[1];return Object(T.jsxs)(x.a,{spacing:2,alignItems:"center",children:[Object(T.jsx)(x.a,{direction:"row",children:Object(T.jsx)(Y.a,{label:"URL",variant:"outlined",fullWidth:!0,error:!!s,helperText:s,onBlur:function(){var e=Object(b.a)(g.a.mark((function e(n){var r,i,s,l,m,f,d,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.value,e.prev=1,u(void 0),!r.startsWith("data:")){e.next=11;break}return e.next=6,c.readImage(r);case 6:return i=e.sent,s=i.image,l=i.fps,a({gif:r,image:s,gifWithBackgroundColor:r,partiallyTransparent:o.isPartiallyTransparent(s)},"image",l),e.abrupt("return");case 11:if(t.isUrl(r)){e.next=14;break}return u("Does not appear to be a valid URL"),e.abrupt("return");case 14:return e.next=16,c.getImageFromUrl(r);case 16:return m=e.sent,e.next=19,c.readImage(m);case 19:f=e.sent,d=f.image,p=f.fps,a({gif:m,image:d,gifWithBackgroundColor:m,partiallyTransparent:o.isPartiallyTransparent(d)},jn(r),p),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),console.error("Error importing url",e.t0),u("Error importing url");case 29:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(n){return e.apply(this,arguments)}}()})}),Object(T.jsx)(G.a,{children:"OR"}),Object(T.jsxs)(C.a,{startIcon:Object(T.jsx)(I.a,{children:"image"}),sx:{maxWidth:"300px"},variant:"contained",component:"label",children:["Upload an Image",Object(T.jsx)("input",{type:"file",hidden:!0,accept:"image/png,image/jpg,image/jpeg,image/gif",name:"source-image",onChange:function(){var e=Object(b.a)(g.a.mark((function e(n){var t,r,i,s,u,l,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.from(null!==(t=n.target.files)&&void 0!==t?t:[]),!(i=r[0])){e.next=10;break}return e.next=5,c.readImage(i);case 5:s=e.sent,u=s.dataUrl,l=s.image,m=s.fps,a({gif:u,image:l,gifWithBackgroundColor:u,partiallyTransparent:o.isPartiallyTransparent(l)},jn(i.name),m);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),n&&Object(T.jsx)(bn,{src:n.gif,dimensions:n.image.dimensions,alt:"Source"})]})},xn=a(199),On=a(200),An=null!=new(a.n(On).a)(window.navigator.userAgent).mobile(),Cn=window.ENV,wn="DEV"===Cn?console.log:function(){},yn=a(463),In=a(461),Fn=a(503),kn=function(e){var n=e.description;return n?Object(T.jsx)(V.a,{title:n,children:Object(T.jsx)(I.a,{fontSize:"small",color:"action",children:"help"})}):null},Sn=function(e){return"function"===typeof e?e:function(){return e}},Mn=function(e){var n=e.name,a=e.value,r=e.description,i=e.onChange,o=64,c=64,s=pn({value:a,onChange:i,debounceMillis:200}),u=Object(j.a)(s,2),l=u[0],f=u[1],d=m.a.useState([0,0]),p=Object(j.a)(d,2),h=p[0],g=p[1],b=m.a.useState(null),v=Object(j.a)(b,2),O=v[0],C=v[1],w=m.a.useCallback((function(e){var n=e.ctx;C(n)}),[]),y=m.a.useState(null),I=Object(j.a)(y,2),F=I[0],k=I[1],S=m.a.useMemo((function(){var e=l.map((function(e,n){return{idx:n,coord:e,distance:t.pointDistance([e[0]*o,e[1]*c],h)}})),n=In.a(e,(function(e){return e.distance}))[0];return n.distance<5?n.idx:null}),[h,l]);m.a.useEffect((function(){if(O){O.clearRect(0,0,o,c),O.fillStyle="red";var e,n=Object(qe.a)(l);try{for(n.s();!(e=n.n()).done;){var a=e.value,t=a[0]*o,r=a[1]*c;O.beginPath(),O.ellipse(t,r,5,5,0,0,2*Math.PI),O.fill()}}catch(i){n.e(i)}finally{n.f()}O.beginPath(),O.moveTo(0,0),O.strokeStyle="black",O.bezierCurveTo(l[0][0]*o,l[0][1]*c,l[1][0]*o,l[1][1]*c,o,c),O.stroke()}}),[l,O]);var M=m.a.useCallback((function(){k(S)}),[S]),E=m.a.useCallback((function(){k(null)}),[]),V=m.a.useCallback((function(e){g(e);var n=[t.clamp(e[0]/o,0,o),t.clamp(e[1]/c,0,c)];0===F?f([n,l[1]]):1===F&&f([l[0],n])}),[F,l,f]);return Object(T.jsx)(x.a,{spacing:1,children:Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",paddingTop:"0.5rem",children:n}),Object(T.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(T.jsx)(kn,{description:r})}),Object(T.jsx)(G.a,{border:1,children:Object(T.jsx)(We,{width:o,height:c,onCanvasMount:w,onMouseDown:M,onMouseUp:E,onMouseLeave:E,onMouseMove:V,cursorIsPointer:null!=S})})]})})};function En(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(Mn,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}var Vn=a(474),Bn=function(e){var n=e.name,a=e.value,t=e.description,r=e.onChange;return Object(T.jsx)(x.a,{spacing:1,children:Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",paddingTop:"0.5rem",children:n}),Object(T.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(T.jsx)(kn,{description:t})}),Object(T.jsx)(Vn.a,{"aria-label":n,checked:a,onChange:function(e){return r(e.target.checked)}})]})})};function Pn(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(Bn,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}var Tn=a(116),Rn=function(e){var n=e.color;return Object(T.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:r.toHexColor(n)}})},Dn=function(e){var n=e.name,a=e.value,t=e.description,i=e.onChange;return Object(T.jsx)(Q,{mainEle:Object(T.jsxs)(x.a,{direction:"row",spacing:4,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:t}),a&&Object(T.jsx)(Rn,{color:a})]}),children:Object(T.jsx)(Tn.b,{disableAlpha:!0,presetColors:[],color:r.toHexColor(a),onChangeComplete:function(e){i(r.fromHexColor(e.hex))}})})};function Hn(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(Dn,{name:e.name,value:n.value,onChange:n.onChange,description:e.description})}}}var Qn=a(476),Nn=a(467),Wn=a(477),qn=function(e){var n=e.name,a=e.options,t=e.value,r=e.description,i=e.onChange;return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:r})]}),Object(T.jsx)(Qn.a,{children:Object(T.jsx)(Nn.a,{autoWidth:!0,value:t,onChange:function(e){return i(e.target.value)},children:a.map((function(e){return Object(T.jsx)(Wn.a,{value:e.value,children:e.name},e.value)}))})})]})};var Un=a(493),zn=function(e){var n=e.name,a=e.value,t=e.description,r=e.parse,i=e.onChange,o=m.a.useState(a.toString()),c=Object(j.a)(o,2),s=c[0],u=c[1],l=m.a.useState(""),f=Object(j.a)(l,2),d=f[0],p=f[1];return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:t})]}),Object(T.jsxs)(Qn.a,{children:[Object(T.jsx)(Y.a,{error:!!d,value:s,onBlur:function(){if(s!==a.toString()){var e=r(s);e.valid?(p(""),i(e.value)):p(e.reason)}},onChange:function(e){u(e.target.value)}}),d&&Object(T.jsx)(Un.a,{children:d})]})]})},Yn=function(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){var a=e.min,t=e.max;return Object(T.jsx)(zn,{name:e.name,description:e.description,parse:function(e){var n=parseFloat(e);return isNaN(n)||n.toString()!==e?{valid:!1,reason:"Must be a number"}:void 0!==a&&n<a?{valid:!1,reason:"Must be greater than or equal to ".concat(a)}:void 0!==t&&n>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:n}},onChange:n.onChange,value:n.value})}}},Gn=function(e){var n=e.name,a=e.value,t=e.description,i=e.onChange,o=m.a.useMemo((function(){return void 0===a?void 0:r.toHexColor([].concat(Object(L.a)(X.hsl.rgb([a,100,50])),[255]))}),[a]);return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:t})]}),Object(T.jsx)(Tn.a,{color:o,onChangeComplete:function(e){var n=e.hsl;return i(n.h)}})]})};function Ln(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(Gn,{name:e.name,value:n.value,onChange:n.onChange})}}}var Xn={partiallyTransparent:!1,gif:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAAQABAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAgEBAgICAgICAwICAgIDBAMDAwMDBAUEBAQEBAQFBQUFBQUFBQYGBgYGBgcHBwcHCAgICAgICAgICP/bAEMBAQEBAgICAwICAwgFBAUICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICP/dAAQAAf/aAAwDAQACEQMRAD8A/wA/+iiigD//2Q==",gifWithBackgroundColor:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAAQABAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAgEBAgICAgICAwICAgIDBAMDAwMDBAUEBAQEBAQFBQUFBQUFBQYGBgYGBgcHBwcHCAgICAgICAgICP/bAEMBAQEBAgICAwICAwgFBAUICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICP/dAAQAAf/aAAwDAQACEQMRAD8A/wA/+iiigD//2Q==",image:{dimensions:[1,1],frames:[new Uint8ClampedArray([0,0,0,255])]}};var Zn=function(e){var n=e.name,a=e.value,t=e.description,r=e.parse,i=e.onChange,o=m.a.useState(a.toString()),c=Object(j.a)(o,2),s=c[0],u=c[1],l=m.a.useState(""),f=Object(j.a)(l,2),d=f[0],p=f[1];return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:t})]}),Object(T.jsxs)(Qn.a,{children:[Object(T.jsx)(Y.a,{error:!!d,value:s,onBlur:function(){if(s!==a.toString()){var e=r(s);e.valid?(p(""),i(e.value)):p(e.reason)}},onChange:function(e){u(e.target.value)}}),d&&Object(T.jsx)(Un.a,{children:d})]})]})},Jn=function(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){var a=e.min,t=e.max;return Object(T.jsx)(Zn,{name:e.name,description:e.description,parse:function(e){var n=parseInt(e,10);return isNaN(n)||n.toString()!==e?{valid:!1,reason:"Must be an integer"}:void 0!==a&&n<a?{valid:!1,reason:"Must be greater than or equal to ".concat(a)}:void 0!==t&&n>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:n}},onChange:n.onChange,value:n.value})}}},Kn=a(482),_n=a(495),$n=a(470),ea=function(e){var n=e.name,a=e.options,t=e.value,r=e.description,i=e.onChange;return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:r})]}),Object(T.jsx)(Qn.a,{component:"fieldset",children:Object(T.jsx)(Kn.a,{"aria-label":n,defaultValue:t,onChange:function(e){return i(e.target.value)},children:a.map((function(e){return Object(T.jsx)(_n.a,{value:e.value,control:Object(T.jsx)($n.a,{}),label:e.name},e.value)}))})})]})};function na(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(ea,{name:e.name,value:n.value,options:e.options,description:e.description,onChange:function(e){return n.onChange(e)}})}}}var aa=a(475),ta=function(e){var n=e.name,a=e.value,t=e.min,r=e.max,i=e.step,o=e.description,c=pn({value:a,onChange:e.onChange,debounceMillis:500}),s=Object(j.a)(c,2),u=s[0],l=s[1];return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:o})]}),Object(T.jsxs)(x.a,{direction:"row",spacing:2,sx:{paddingLeft:"8px",paddingRight:"8px"},children:[Object(T.jsx)(aa.a,{"aria-label":n,value:u,step:i,valueLabelDisplay:"off",getAriaValueText:function(e){return e.toString()},min:t,max:r,onChange:function(e,n){l(n)}}),Object(T.jsx)(A.a,{variant:"body2",children:u})]})]})};function ra(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(ta,{name:e.name,value:n.value,onChange:n.onChange,min:e.min,max:e.max,step:e.step,description:e.description})}}}var ia=function(e){var n=e.name,a=e.value,t=e.description,r=e.onChange,i=m.a.useState(a),o=Object(j.a)(i,2),c=o[0],s=o[1];return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:t})]}),Object(T.jsx)(Qn.a,{children:Object(T.jsx)(Y.a,{value:c,onChange:function(e){return s(e.target.value)},onBlur:function(){c.length>0&&r(c)}})})]})},oa=function(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(ia,{name:e.name,description:e.description,onChange:n.onChange,value:n.value})}}},ca=a(496),sa=function(e){var n=e.name,a=e.newParamText,t=e.createNewParam,r=e.value,i=e.description,o=e.onChange,c=m.a.useState(r.map((function(e){return{param:t(),pValue:e}}))),s=Object(j.a)(c,2),u=s[0],l=s[1];return Object(T.jsx)(w.a,{children:Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:1,children:[Object(T.jsx)(A.a,{variant:"body2",children:n}),Object(T.jsx)(kn,{description:i})]}),u.map((function(e,a){var t=e.param,r=e.pValue,i=t.fn({value:r,onChange:function(e){var n=u.map((function(n,r){return a===r?{param:t,pValue:e}:n}));l(n),o(n.map((function(e){return e.pValue})))}});return Object(T.jsxs)(x.a,{direction:"row",children:[Object(T.jsx)(ca.a,{onClick:function(){var e=u.filter((function(e,n){return n!==a}));l(e),o(e.map((function(e){return e.pValue})))},style:{visibility:0===a?"hidden":void 0},children:Object(T.jsx)(I.a,{children:"delete"})}),i]},"".concat(n,"-").concat(a))})),Object(T.jsx)(C.a,{variant:"contained",onClick:function(){var e=t(),n=[].concat(Object(L.a)(u),[{param:e,pValue:e.defaultValue()}]);l(n);var a=n.map((function(e){return e.pValue}));o(a)},children:a})]})})};function ua(e){return{name:e.name,defaultValue:Sn(e.defaultValue),fn:function(n){return Object(T.jsx)(sa,{name:e.name,newParamText:e.newParamText,value:n.value,createNewParam:e.createNewParam,description:e.description,onChange:n.onChange})}}}var la,ma,fa=function(e){var n;return{name:e.name,group:e.group,params:e.params,description:e.description,secondaryDescription:e.secondaryDescription,fn:e.fn,disabled:null!==(n=e.disabled)&&void 0!==n&&n,groupOrder:e.groupOrder,requiresAnimation:e.requiresAnimation}},da=fa({name:"Adjust Image",group:"Image",groupOrder:999,description:"Change the dimensions, brightness, contrast etc.",params:[Jn({name:"Width",description:"Set to 0 to not change the width. If height is changed, the image will keep the same aspect ratio.",defaultValue:function(e){return e?e.dimensions[0]:0},min:0}),Jn({name:"Height",description:"Set to 0 to not change the height. If width is changed, the image will keep the same aspect ratio.",defaultValue:function(e){return e?e.dimensions[1]:0},min:0}),ra({name:"Brightness",min:-100,max:100,step:5,defaultValue:0}),ra({name:"Contrast",min:-100,max:100,step:5,defaultValue:0}),ra({name:"Saturation",min:-100,max:100,step:5,defaultValue:0}),ra({name:"Sepia",min:0,max:100,step:5,defaultValue:0})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,6),t=a[0],r=a[1],c=a[2],s=a[3],u=a[4],l=a[5],m=Object(j.a)(n.dimensions,2),f=m[0],d=m[1],p=t>0||r>0,h=p&&0===t?Math.ceil(f/d*r):t,g=p&&0===r?Math.ceil(d/f*t):r,b=h*g>f*d,v=n;return p&&!b&&(v=o.resizeImage({image:v,newWidth:h,newHeight:g,keepScale:!0})),v=o.mapFrames(v,(function(e){return i.applyCanvasFromFrame({dimensions:v.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{brightness:c+100,contrast:s+100,saturation:u+100,sepia:l})}})})),p&&b&&(v=o.resizeImage({image:v,newWidth:h,newHeight:g,keepScale:!0})),v}}),pa=fa({name:"Background Color",group:"Colors",description:"Change all transparent pixels to the given color",params:[Hn({name:"Color",defaultValue:r.fromHexColor("#000000")}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,2),t=a[0],r=a[1];return o.mapFrames(n,(function(e){var a=100===r?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:r})}});return i.combineImages({dimensions:n.dimensions,background:o.mapCoords(n.dimensions,(function(){return t})),foreground:a})}))}}),ha=fa({name:"Background Image",group:"Image",description:"Select another image to be used as a background or foreground",secondaryDescription:"If the selected image is animated, this will speed up/slow down the animation to match the original image",params:[(la={name:"Image"},{name:la.name,defaultValue:function(){return Xn},fn:function(e){return Object(T.jsx)(vn,{currentImage:e.value,width:64,height:64,onChange:e.onChange})}}),na({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),Pn({name:"Scale Image",defaultValue:!1,description:"If true, the new image will be scaled to fit the dimensions of the original image"})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,3),t=a[0],r=a[1],c=a[2],s=o.resizeImage({image:t.image,newWidth:n.dimensions[0],newHeight:n.dimensions[1],keepScale:c});return o.mapFrames(n,(function(e,a,t){var o=a/t,c=i.frameToCanvas({dimensions:n.dimensions,frame:e}),u=Math.floor(o*s.frames.length),l=i.frameToCanvas({dimensions:s.dimensions,frame:s.frames[u]});return i.combineImages({dimensions:n.dimensions,background:"background"===r?l:c,foreground:"background"===r?c:l})}))}}),ga=fa({name:"Blur",group:"Transform",description:"Blurs the image",params:[ra({name:"Amount",defaultValue:2,min:0,max:20})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{blur:a})}})}))}}),ba=fa({name:"Bounce",group:"Transform",description:"Make the image bounce up and down",requiresAnimation:!0,params:[Jn({name:"Bounce Height",description:"Positive number",defaultValue:function(e){return e?Math.floor(e.dimensions[1]/10):10},min:0}),En({name:"Easing",defaultValue:t.LINEAR_BEZIER})],fn:o.mapImageWithPrecompute((function(e){var n=e.animationProgress,a=Object(j.a)(e.parameters,2),r=a[0],i=a[1],o=t.bezierCurve(i,!0)(n);return{yOffset:Math.round(r*o)}}),(function(e){var n=e.computed.yOffset,a=Object(j.a)(e.coord,2),t=a[0],r=a[1];return(0,e.getSrcPixel)([t,r+n])}))}),ja=a(462),va=a(464),xa=a(465),Oa=fa({name:"Bounce Animation",group:"Animation",description:"When the animation finishes, it will be replayed in reverse",secondaryDescription:"This doubles the number of animation frames.",requiresAnimation:!0,params:[],fn:function(e){var n=e.image;return{dimensions:n.dimensions,frames:Object(ja.a)(n.frames,Object(yn.a)(n.frames,Object(va.a)(1),Object(xa.a)(),Object(va.a)(1)))}}}),Aa=fa({name:"Circle",group:"Transform",description:"Make the image move in a circular pattern",requiresAnimation:!0,params:[Jn({name:"Radius",description:"Positive number",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/10):10},min:0})],fn:o.mapImageWithPrecompute((function(e){var n=e.animationProgress,a=Object(j.a)(e.parameters,1)[0];return{xOffset:Math.round(a*Math.sin(-2*Math.PI*n)),yOffset:Math.round(a*Math.cos(-2*Math.PI*n))}}),(function(e){var n=e.computed,a=n.xOffset,t=n.yOffset,r=Object(j.a)(e.coord,2),i=r[0],o=r[1];return(0,e.getSrcPixel)([i+a,o+t])}))}),Ca=fa({name:"Changing Focus",group:"Image",description:"Changes the focus of the image over time",params:[ra({name:"Max Blur",defaultValue:50,min:0,max:100}),En({name:"Curve",defaultValue:[[.25,.75],[.75,.25]]})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,2),r=a[0],c=a[1];return o.mapFrames(n,(function(e,a,o){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){var n=a/(o-1),s=Math.round(t.bezierCurve(c,!0)(n)*(r/10));return i.applyFilter(e,{blur:s})}})}))}}),wa=Object(Ue.a)(0,6).map((function(e){return r.setBrightness(r.fromHexColor("#98651B"),100*(1-e/6))})),ya=fa({name:"Color Palette",group:"Colors",description:"Change all colors in the image to a set palette.",secondaryDescription:"For instance, the lightest colors in the source image will be replaced by the first color, and the darkest colors in the source image will be replaced by the last color, etc",params:[ua({name:"Palette",newParamText:"New Color",defaultValue:wa,createNewParam:function(){return Hn({name:"Color",defaultValue:wa[0]})}})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(j.a)(e.parameters,1)[0],i=a(n);if(r.isTransparent(i))return i;var o=255-r.getAveragePixelValue(i);return t[Math.floor(o/256*t.length)]}))}),Ia=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(r.fromHexColor),Fa=fa({name:"Colors",group:"Colors",description:"Make the image flash different colors of your choosing",secondaryDescription:"Increase the brightness to increase the effect",requiresAnimation:!0,params:[ra({name:"Brightness Increase",defaultValue:0,min:0,max:100,step:5}),ua({name:"Colors",newParamText:"New Color",defaultValue:Ia,createNewParam:function(){return Hn({name:"Color",defaultValue:Ia[0]})}})],fn:o.mapImageWithPrecompute((function(e){var n=e.animationProgress,a=Object(j.a)(e.parameters,2),t=a[0],r=a[1];return{brightnessIncrease:t,chosenColor:r[Math.floor(n*r.length)]}}),(function(e){var n=e.computed,a=n.brightnessIncrease,t=n.chosenColor,i=e.coord,o=(0,e.getSrcPixel)(i);if(r.isTransparent(o))return[0,0,0,0];var c=a>0?r.adjustBrightness(o,a):o,s=r.getAveragePixelValue(c);return[s*t[0]/255,s*t[1]/255,s*t[2]/255,255]}))}),ka=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(r.fromHexColor),Sa=fa({name:"Colors Background",group:"Colors",description:"Transparent pixels will flash different colors of your choosing",params:[ua({name:"Colors",newParamText:"New Color",defaultValue:ka,createNewParam:function(){return Hn({name:"Color",defaultValue:ka[0]})}}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,2),t=a[0],r=a[1];return o.mapFrames(n,(function(e,a,c){var s=a/c,u=t[Math.floor(s*t.length)],l=100===r?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:r})}});return i.combineImages({dimensions:n.dimensions,background:o.mapCoords(n.dimensions,(function(){return u})),foreground:l})}))}}),Ma=fa({name:"Double Vision",group:"Misc",description:"See double",requiresAnimation:!0,params:[Yn({name:"Amplitude",defaultValue:10,min:0})],fn:o.mapImageWithPrecompute((function(e){var n=e.animationProgress;return{xOffset:Object(j.a)(e.parameters,1)[0]*Math.sin(-2*Math.PI*n)}}),(function(e){var n=e.computed.xOffset,a=Object(j.a)(e.coord,2),t=a[0],r=a[1],i=t%2===0?-1:1;return(0,e.getSrcPixel)([t+Math.round(i*n),r])}))}),Ea=fa({name:"Drop Shadow",group:"Misc",description:"Adds a drop shadow effect to the image",params:[Jn({name:"Offset X",defaultValue:10}),Jn({name:"Offset Y",defaultValue:10}),ra({name:"Blur Radius",min:0,max:20,step:1,defaultValue:0}),Hn({name:"Shadow Color",defaultValue:[0,0,0,0]})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,4),t=a[0],r=a[1],c=a[2],s=a[3];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{dropShadow:{offsetX:t,offsetY:r,blurRadius:c,color:s}})}})}))}}),Va=fa({name:"Dual Hue",group:"Colors",description:"The colors of the image will transition from one color to another",params:[Hn({name:"Color 1",defaultValue:[255,0,0,1]}),Hn({name:"Color 2",defaultValue:[0,255,0,1]})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(j.a)(e.parameters,2),i=t[0],o=t[1],c=a(n);if(r.isTransparent(c))return c;var s=r.getAveragePixelValue(c)/256;return r.linearInterpolation({c1:i,c2:o,amount:s})}))}),Ba=fa({name:"Expand",group:"Transform",description:"Make the image grow and shrink",requiresAnimation:!0,params:[Jn({name:"Radius",description:"Positive number",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/6):10},min:0}),En({name:"Easing",defaultValue:t.LINEAR_BEZIER})],fn:o.mapImageWithPrecompute((function(e){var n=Object(j.a)(e.dimensions,2),a=n[0],r=n[1],i=e.animationProgress,o=Object(j.a)(e.parameters,2),c=o[0],s=o[1];return{dist:t.bezierCurve(s,!0)(i)*c,centerX:a/2,centerY:r/2}}),(function(e){var n=e.computed,a=n.centerX,t=n.centerY,r=n.dist,i=Object(j.a)(e.dimensions,2),o=i[0],c=i[1],s=Object(j.a)(e.coord,2),u=s[0],l=s[1],m=(u-a)/o,f=(l-t)/c;return(0,e.getSrcPixel)([u-Math.floor(r*m),l-Math.round(r*f)])}))}),Pa=fa({name:"Fade",group:"Misc",description:"Fades the image in or out",requiresAnimation:!0,params:[En({name:"Curve",defaultValue:[[.25,.75],[.75,.25]]})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e,t,r){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:Ta({frameCount:r,frameIndex:t,curve:a})})}})}))}}),Ta=function(e){var n=e.frameIndex,a=e.frameCount,r=e.curve,i=n/(a-1);return Math.round(100*t.bezierCurve(r,!0)(i))},Ra=fa({disabled:!0,group:"Image",name:"Fill Transparent",description:"Makes transparent all pixels of similar color surrounding a point",params:[Hn({name:"Color to Make Transparent",defaultValue:[0,0,0,255]}),ra({name:"Tolerance",defaultValue:10,min:0,max:100})],fn:function(e){for(var n=e.image,a=Object(j.a)(e.parameters,2),t=a[0],i=a[1],c=o.duplicateImage(n),s=0;s<c.frames.length;s+=1)Da({image:c,frameIndex:s,colorToReplace:t,newColor:r.TRANSPARENT_COLOR,tolerance:i});return c}}),Da=function(e){for(var n=e.image,a=e.frameIndex,t=e.colorToReplace,i=e.newColor,c=e.tolerance,s=function(){var e=new Set;return{add:function(n){var a=Object(j.a)(n,2),t=a[0],r=a[1];e.add("".concat(t,"-").concat(r))},has:function(n){var a=Object(j.a)(n,2),t=a[0],r=a[1];return e.has("".concat(t,"-").concat(r))}}}(),u=[[0,n.dimensions[1]-1]],l=function(e){s.has(e)||(s.add(e),u.push(e))};u.length>0;){var m=u.pop(),f=Object(j.a)(m,2),d=f[0],p=f[1];if(!(d<0||d>=n.dimensions[0]||p<0||p>=n.dimensions[1])){var h=o.getPixelFromSource(n.dimensions,n.frames[a],m);100*r.colorDiff(h,t)>c||(o.setPixel({image:n,frameIndex:a,color:i,coord:m}),l([d+1,p]),l([d-1,p]),l([d,p+p]),l([d,p-1]))}}},Ha=fa({name:"Fisheye",group:"Misc",description:"Make the image grow and shrink in a distorted fashion",requiresAnimation:!0,params:[Jn({name:"Radius",description:"Positive Number",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/6):10},min:0})],fn:o.mapImageWithPrecompute((function(e){var n=e.animationProgress,a=Object(j.a)(e.dimensions,2),t=a[0],r=a[1];return{dist:(n<.5?n:1-n)*Object(j.a)(e.parameters,1)[0],centerX:t/2,centerY:r/2}}),(function(e){var n=e.computed,a=n.dist,t=n.centerX,r=n.centerY,i=Object(j.a)(e.coord,2),o=i[0],c=i[1],s=e.getSrcPixel,u=Math.atan2(r-c,t-o);return s([o+Math.round(a*Math.cos(u)),c+Math.round(a*Math.sin(u))])}))}),Qa=fa({name:"Grid",group:"Misc",description:"Removes the color from all pixels not aligned with a grid",params:[ra({name:"Grid Size",description:"The length of each square in the grid",defaultValue:24,min:2,max:64,step:2}),ra({name:"Grid Angle",defaultValue:45,min:0,max:90})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(j.a)(e.parameters,2),i=t[0],o=t[1],c=a(n),s=Object(j.a)(n,2),u=s[0],l=s[1],m=!1;if(o%90===0)m=u%i===0||l%i===0;else{var f=(64-i)/64*.1+.03,d=function(e){var n=1/i*(l-Math.tan(Na(e))*u);return Math.abs(Math.round(n)-n)<f};m=d(o)||d(o+90)}return m?c:r.adjustSaturation(c,-100)}))}),Na=function(e){return e*Math.PI/180},Wa=fa({name:"Hue Change",group:"Colors",description:"Change the hue of each pixel towards some other color",params:[Ln({name:"Hue",defaultValue:180}),ra({name:"Amount",description:"How strong the effect is.",min:0,max:100,step:5,defaultValue:75})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(j.a)(e.parameters,2),i=t[0],o=t[1];return r.shiftTowardsHue(a(n),i,o)}))}),qa=fa({name:"Hue Shift",group:"Colors",description:"Shift the hue of each pixel in the image by some amount",params:[ra({name:"Amount",description:"How much to shift the hue of each pixel",min:0,max:100,step:5,defaultValue:50})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{hueRotate:3.6*a})}})}))}}),Ua=fa({name:"Hue Shift Pulse",group:"Colors",description:"Shift the hue to the given value in a pulsating manner",requiresAnimation:!0,params:[Ln({name:"Hue",defaultValue:180}),En({name:"Easing",defaultValue:[[.25,.75],[.75,.25]]})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,i=e.frameCount,o=e.frameIndex,c=Object(j.a)(e.parameters,2),s=c[0],u=c[1],l=t.bezierCurve(u,!0)(o/i);return r.shiftTowardsHue(a(n),s,360*l)}))}),za=fa({name:"Hue Wave",group:"Colors",description:"Shifts the hue of pixels in the image in a wave motion",requiresAnimation:!0,params:[ra({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the hue shift effect should be"}),ra({name:"Period",defaultValue:1,min:1,max:20,description:"How many waves you want"})],fn:o.mapImageWithPrecompute((function(e){return{shift:-1*e.animationProgress*2*Math.PI}}),(function(e){var n=e.computed.shift,a=e.coord,t=Object(j.a)(e.dimensions,2)[1],i=Object(j.a)(e.parameters,2),o=i[0],c=i[1],s=e.getSrcPixel,u=Object(j.a)(a,2)[1],l=Math.round(o*Math.sin(u/t*c*Math.PI+n));return r.shiftHue(s(a),l/100*360)}))}),Ya=a(113),Ga=a.n(Ya),La=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],Xa=fa({name:"Lightning",group:"Misc",description:"Make the background look like a thunderstorm",requiresAnimation:!0,params:[oa({name:"Random Seed",description:"Can be anything. Will determine the randomness of the lightning.",defaultValue:"lightning"})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0],t=Ga()(a);return o.mapFrames(n,(function(e){var a=t(),i=a<.9?0:a<.95?1:a<.98?2:3;return o.mapCoords(n.dimensions,(function(a){var t=o.getPixelFromSource(n.dimensions,e,a);if(r.isTransparent(t))return La[i];if(i>0){var c=1.02*i;return[t[0]*c,t[1]*c,t[2]*c,t[3]]}return t}))}))}}),Za=fa({name:"Mirror",group:"Image",description:"Mirrors the image",params:[na({name:"Direction",options:[{name:"Horizontal",value:"horizontal"},{name:"Vertical",value:"vertical"}],defaultValue:"horizontal"})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyTransform(e,{horizontalScale:"horizontal"===a?-1:1,verticalScale:"vertical"===a?-1:1,horizontalTranslation:"horizontal"===a?n.dimensions[0]:0,verticalTranslation:"vertical"===a?n.dimensions[1]:0})}})}))}}),Ja=fa({name:"Nuke",group:"Misc",description:"Oh no...",requiresAnimation:!0,params:[],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=100*e.animationProgress,r=a(n),i=Object(j.a)(r,4),o=i[0],c=i[1],s=i[2],u=i[3],l=X.rgb.hsl(o,c,s),m=Object(j.a)(l,3),f=m[0],d=m[1],p=m[2],h=X.hsl.rgb([f,d,p>t?p:0]),g=Object(j.a)(h,3);return[g[0],g[1],g[2],p>t?u:0]}))}),Ka=fa({name:"Opacity",group:"Image",description:"Sets the opacity of the image",secondaryDescription:"Because gifs do not support transparency, the preview below will not reflect the transparency accurately. It will apply to subsequent effects though.",params:[ra({name:"Amount",defaultValue:50,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:a})}})}))}}),_a=fa({name:"Party",group:"Party",description:"Shift the hue of the image over the course of the animation",requiresAnimation:!0,params:[ra({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e,t,r){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{hueRotate:t/r*360*a})}})}))}}),$a=fa({name:"Party Background",group:"Party",description:"Smoothly cycles through background colors over the course of the animation",requiresAnimation:!0,params:[ra({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,2),t=a[0],c=a[1];return o.mapFrames(n,(function(e,a,s){var u=a/s*t*360%360,l=r.colorFromHue(u),m=100===c?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:c})}});return i.combineImages({dimensions:n.dimensions,background:o.mapCoords(n.dimensions,(function(){return l})),foreground:m})}))}}),et=fa({name:"Party Harder",group:"Party",description:"Shift the hue of each individual pixel over the course of the animation",requiresAnimation:!0,params:[],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=e.animationProgress;return r.shiftHue(a(n),360*t)}))}),nt=a(205),at=fa({name:"Party Shadow",group:"Party",description:"Apply a party shadow effect",requiresAnimation:!0,params:[ra({name:"Layers",defaultValue:4,min:1,max:30}),ra({name:"Blur Radius",min:0,max:30,step:1,defaultValue:2}),Jn({name:"Offset X",defaultValue:10}),Jn({name:"Offset Y",defaultValue:10})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,4),t=a[0],i=a[1],c=a[2],s=a[3];return o.mapFrames(n,(function(e,a,o){for(var u=[],l=360*(a/o),m=360/t,f=0;f<t;f+=1)u.push(r.colorFromHue((l-m*f)%360));return tt({frame:e,colors:u,blurRadius:i,dimensions:n.dimensions,offsetX:c,offsetY:s})}))}}),tt=function e(n){var a=n.frame,t=n.dimensions,r=n.colors,o=n.offsetX,c=n.offsetY,s=n.blurRadius,u=Object(nt.a)(r),l=u[0],m=u.slice(1),f=i.applyCanvasFromFrame({dimensions:t,frame:a,preEffect:function(e){return i.applyFilter(e,{dropShadow:{offsetX:o,offsetY:c,blurRadius:s,color:l}})}});return 0===m.length?f:e({frame:f,colors:m,dimensions:t,blurRadius:s,offsetX:o,offsetY:c})},rt=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(r.fromHexColor),it=fa({name:"Pinwheel Colors",group:"Party",description:"Create a background pinwheel of colors of your choosing",requiresAnimation:!0,params:[ra({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),ua({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:rt,createNewParam:function(){return Hn({name:"Color",defaultValue:rt[0]})}}),Jn({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),Jn({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){for(var n=e.image,a=Object(j.a)(e.parameters,5),r=a[0],c=a[1],s=a[2],u=a[3],l=a[4],m=Object(j.a)(n.dimensions,2),f=m[0],d=m[1],p=c.length*r,h=Math.round(360/p),g=c.length;"00"!==(p/g).toFixed(2).slice(-2);)g-=1;var b=[f/2+s,d/2-u];return o.mapFrames(n,(function(e,a,r){var s=a/r,u=o.mapCoords(n.dimensions,(function(e){var n=t.calculateAngle(e,b),a=Math.floor(n/h)%g,r=(Math.floor(s*g)+a)%g;return c[r]})),m=100===l?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:l})}});return i.combineImages({dimensions:n.dimensions,background:u,foreground:m})}))}}),ot=fa({name:"Pinwheel Rainbow",group:"Party",description:"Make the image look like a pinwheel rainbow",requiresAnimation:!0,params:[ra({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),ra({name:"Strength",min:0,max:100,step:5,defaultValue:75}),Jn({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),Jn({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:o.mapImageWithPrecompute((function(e){var n=Object(j.a)(e.dimensions,2),a=n[0],t=n[1],r=Object(j.a)(e.parameters,4);r[0],r[1];return{center:[a/2+r[2],t/2-r[3]]}}),(function(e){var n=e.computed.center,a=e.coord,i=e.animationProgress,o=e.getSrcPixel,c=Object(j.a)(e.parameters,2),s=c[0],u=c[1],l=o(a),m=(t.calculateAngle(a,n)*s+360*i)%360;return r.shiftTowardsHue(l,m,u)}))}),ct=fa({name:"Pinwheel Rainbow Background",group:"Party",description:"Create a background pinwheel of rainbow colors",requiresAnimation:!0,params:[ra({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Jn({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),Jn({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,4),c=a[0],s=a[1],u=a[2],l=a[3];return o.mapFrames(n,(function(e,a,m){var f=a/m,d=Object(j.a)(n.dimensions,2),p=d[0],h=d[1],g=[p/2+s,h/2-u],b=o.mapCoords(n.dimensions,(function(e){var n=(t.calculateAngle(e,g)*c+360*f)%360;return r.colorFromHue(n)})),v=100===l?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:l})}});return i.combineImages({dimensions:n.dimensions,background:b,foreground:v})}))}}),st=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(r.fromHexColor),ut=fa({name:"Radiance Colors",group:"Party",description:"Radiate background colors of your choosing out in rings",requiresAnimation:!0,params:[ra({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),ua({name:"Colors",newParamText:"New Color",description:"The colors that make up each ring",defaultValue:st,createNewParam:function(){return Hn({name:"Color",defaultValue:st[0]})}}),Jn({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),Jn({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,5),t=a[0],r=a[1],c=a[2],s=a[3],u=a[4];return o.mapFrames(n,(function(e,a,l){var m=a/l,f=Object(j.a)(n.dimensions,2),d=f[0],p=f[1],h=Object(Ue.a)(0,t).flatMap((function(){return r})),g=d/2,b=p/2,v=o.mapCoords(n.dimensions,(function(e){var n=Object(j.a)(e,2),a=n[0],t=n[1],r=a-g-c,i=t-b+s,o=Math.sqrt(d/2*(d/2)+p/2*(p/2)),u=Math.sqrt(i*i+r*r),l=Math.floor((1-u/o)*h.length)%h.length,f=(Math.floor(m*h.length)+l)%h.length;return h[f]})),x=100===u?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:u})}});return i.combineImages({dimensions:n.dimensions,background:v,foreground:x})}))}}),lt=fa({name:"Radiance Rainbow",group:"Party",description:"Radiate rainbow colors out in rings",requiresAnimation:!0,params:[ra({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),ra({name:"Strength",min:0,max:100,step:5,defaultValue:75}),Jn({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),Jn({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:o.mapImageWithPrecompute((function(e){var n=Object(j.a)(e.dimensions,2),a=n[0],t=n[1];return{centerX:a/2,centerY:t/2,maxDist:Math.sqrt(a/2*(a/2)+t/2*(t/2))}}),(function(e){var n=e.computed,a=n.centerX,t=n.centerY,i=n.maxDist,o=e.coord,c=e.animationProgress,s=Object(j.a)(e.parameters,4),u=s[0],l=s[1],m=s[2],f=s[3],d=(0,e.getSrcPixel)(o),p=Object(j.a)(o,2),h=p[0]-a-m,g=p[1]-t+f,b=(360*(1-Math.sqrt(g*g+h*h)/i)*u+360*c)%360;return r.shiftTowardsHue(d,b,l)}))}),mt=fa({name:"Radiance Rainbow Background",group:"Party",description:"Radiate rainbow colors out in rings",requiresAnimation:!0,params:[ra({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Jn({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),Jn({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0}),ra({name:"Foreground Opacity",defaultValue:100,min:0,max:100})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,4),t=a[0],c=a[1],s=a[2],u=a[3];return o.mapFrames(n,(function(e,a,l){var m=a/l,f=Object(j.a)(n.dimensions,2),d=f[0],p=f[1],h=d/2,g=p/2,b=Math.sqrt(d/2*(d/2)+p/2*(p/2)),v=o.mapCoords(n.dimensions,(function(e){var n=Object(j.a)(e,2),a=n[0],i=n[1],o=a-h-c,u=i-g+s,l=(360*(1-Math.sqrt(u*u+o*o)/b)*t+360*m)%360;return r.colorFromHue(l)})),x=100===u?e:i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyFilter(e,{opacity:u})}});return i.combineImages({dimensions:n.dimensions,background:v,foreground:x})}))}}),ft=a(466),dt=fa({name:"Reduce Color Palette",group:"Colors",description:"Reduce the number of unique colors in the gif, to reduce the file size.",secondaryDescription:"This can be a slow operation depending on the number of final colors",params:[ra({name:"Percent Reduction",description:"0% will have no effect, 100% will result in just one unique color in the result",defaultValue:70,min:0,max:100})],fn:o.mapImageWithPrecompute((function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0],t=new Set;o.mapFrames(n,(function(e){return o.mapCoords(n.dimensions,(function(a){var i=o.getPixelFromSource(n.dimensions,e,a);return t.add(r.toHexColor(i)),r.TRANSPARENT_COLOR}))}));for(var i=Array.from(t).map(r.fromHexColor),c=Math.max(Math.floor(i.length*(100-a)/100),1),s=i.map((function(e){return{color:e,numClosestColors:0}})),u=1;u<i.length;u+=1){for(var l=0,m=r.colorDiff(i[u],i[l]),f=0;f<i.length;f+=1)if(f!==u){var d=r.colorDiff(i[f],i[u]);d<m&&(l=f,m=d)}s[l].numClosestColors+=1}return{colorPalette:Object(In.a)(s,[function(e){return e.numClosestColors},"desc"]).slice(0,c).map((function(e){return e.color}))}}),(function(e){var n=e.coord,a=e.getSrcPixel,t=e.computed.colorPalette,i=a(n);return Object(ft.a)(t,(function(e){return r.colorDiff(e,i)}))}))}),pt=fa({name:"Repeat Animation",group:"Animation",description:"Repeats the current animation some number of times",secondaryDescription:"This can greatly increase the final file size!",requiresAnimation:!0,params:[ra({name:"Number of Repeats",defaultValue:1,min:1,max:50})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return{dimensions:n.dimensions,frames:Object(Ue.a)(0,n.frames.length*(a+1)).map((function(e){return n.frames[e%n.frames.length]}))}}}),ht=fa({name:"Resize Image",group:"Image",description:"Change the absolute dimensions of the image.",params:[Jn({name:"Width",description:"Set to 0 when height is set to non-zero to keep the same aspect ratio",defaultValue:function(e){return e?e.dimensions[0]:0},min:0}),Jn({name:"Height",description:"Set to 0 when width is set to non-zero to keep the same aspect ratio",defaultValue:function(e){return e?e.dimensions[1]:0},min:0}),Pn({name:"Keep scale",description:"If checked, the image will be stretched to fit the new dimensions",defaultValue:!1})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,3),t=a[0],r=a[1],i=a[2],c=Object(j.a)(n.dimensions,2),s=c[0],u=c[1],l=0===t?Math.ceil(s/u*r):t,m=0===r?Math.ceil(u/s*t):r;return o.resizeImage({image:n,newWidth:l,newHeight:m,keepScale:i})}}),gt=fa({name:"Reverse Animation",group:"Animation",description:"Reverses the animation",requiresAnimation:!0,params:[],fn:function(e){var n=e.image;return{dimensions:n.dimensions,frames:Object(xa.a)(n.frames)}}}),bt=fa({name:"Ripple",group:"Misc",description:"Create a ripple effect, like water",requiresAnimation:!0,params:[ra({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the ripple effect should be"}),ra({name:"Period",defaultValue:1,min:1,max:20,description:"How many ripples you want"})],fn:o.mapImageWithPrecompute((function(e){return{shift:2*e.animationProgress*Math.PI}}),(function(e){var n=e.computed.shift,a=Object(j.a)(e.coord,2),t=a[0],r=a[1],i=Object(j.a)(e.dimensions,2)[1],o=Object(j.a)(e.parameters,2),c=o[0],s=o[1];return(0,e.getSrcPixel)([t+Math.round(c*Math.sin(r/i*s*Math.PI+n)),r])}))}),jt=fa({name:"Rotate",group:"Transform",description:"Rotates the image to a given angle",params:[ra({name:"Angle",defaultValue:0,min:0,max:360,step:5,description:"The angle in degrees. 0 degrees points to the right, 90 degrees points up."})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyRotation(e,a)}})}))}}),vt=fa({name:"Roxbury",group:"Misc",description:"Baby, don't hurt me",requiresAnimation:!0,params:[],fn:o.mapImageWithPrecompute((function(e){var n=Object(j.a)(e.dimensions,2),a=n[0],t=n[1],r=e.animationProgress,i=Math.floor(4*r),o=4*(r-i/4),c=Math.PI/2*.2,s=0===i?0:1===i?o*c:2===i?c:(1-o)*c;return{angle:s,cos:Math.cos(1.35*-s),sin:Math.sin(1.35*-s),rotatePointX:.25*a,rotatePointY:.7*t}}),(function(e){var n=e.computed,a=n.angle,t=n.cos,r=n.sin,i=n.rotatePointX,o=n.rotatePointY,c=Object(j.a)(e.coord,2),s=c[0],u=c[1],l=e.getSrcPixel,m=Math.floor(s-i+8*Math.sin(a)),f=Math.floor(u-o+8*Math.cos(a));return l([Math.round(i+m*t-f*r),Math.round(o+f*t+m*r)])}))}),xt=fa({name:"Scale Image",group:"Image",description:"Scale the image without changing the dimensions",params:[ra({name:"Scale",min:.1,max:3,step:.1,defaultValue:1})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.scaleImage({image:n,horizontalScale:a,verticalScale:a})}}),Ot=fa({name:"Set Animation Length",group:"Animation",groupOrder:999,description:"Sets the length of the animation.",params:[ra({name:"Number of Frames",description:"Set how many frames of animation there will be.",defaultValue:function(e){return e?e.frames.length:1},min:1,max:60})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.changeFrameCount(n,a)}}),At=fa({name:"Shake",group:"Misc",description:"Make the image shake left and right",requiresAnimation:!0,params:[Yn({name:"Amplitude",defaultValue:function(e){return e?Math.floor(e.dimensions[0]/10):10},min:0})],fn:o.mapImageWithPrecompute((function(e){var n=e.animationProgress,a=Object(j.a)(e.parameters,1)[0];return{xOffset:Math.round(a*Math.cos(2*n*Math.PI))}}),(function(e){var n=e.computed.xOffset,a=Object(j.a)(e.coord,2),t=a[0],r=a[1];return(0,e.getSrcPixel)([t+n,r])}))}),Ct=fa({name:"Slow Animation",group:"Animation",description:"Attempts to slow the animation by adding intermediate frames",secondaryDescription:"This will make the final file size larger",requiresAnimation:!0,params:[na({name:"Interpolation Type",options:[{name:"Basic",value:"basic"},{name:"Smooth",value:"smooth"}],defaultValue:"basic",description:"With basic interpolation, frames are simply duplicated. With smooth interpolation, intermediate frames are the average of their surrounding frames."})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return{dimensions:n.dimensions,frames:Object(Ue.a)(0,2*n.frames.length-1).map((function(e){if(e%2===0)return n.frames[e/2];var t=(e-1)/2;return"basic"===a?n.frames[t]:o.mapCoords(n.dimensions,(function(e){var a=o.getPixelFromSource(n.dimensions,n.frames[t],e),r=Object(j.a)(a,4),i=r[0],c=r[1],s=r[2],u=r[3],l=o.getPixelFromSource(n.dimensions,n.frames[t+1],e),m=Object(j.a)(l,4);return[(i+m[0])/2,(c+m[1])/2,(s+m[2])/2,(u+m[3])/2]}))}))}}}),wt=fa({name:"Spin",group:"Transform",description:"Make the image rotate about the center point in an animation",requiresAnimation:!0,params:[na({name:"Direction",defaultValue:"clockwise",options:[{name:"Clockwise",value:"clockwise"},{name:"Counter-Clockwise",value:"counter"}]})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,1)[0];return o.mapFrames(n,(function(e,t,r){var o=("counter"===a?1:-1)*t/r*360;return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,preEffect:function(e){return i.applyRotation(e,o)}})}))}}),yt=fa({name:"Static",group:"Misc",description:"Adds random static to each frame the image",params:[na({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ra({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(j.a)(e.parameters,2),i=t[0],o=t[1],c=e.random,s=a(n),u=r.isTransparent(s);if("foreground"===i?u:!u)return s;if(u&&"background"===i){var l=Math.ceil(100*c())<o,m=Math.ceil(255*c());return l?[m,m,m,255]:s}var f=Math.ceil(100*c())<o,d=Math.ceil(255*c());return f?[d,d,d,s[3]]:s}))}),It=["Arial","Verdana","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"],Ft=fa({name:"Text",group:"Image",description:"Puts text on the image",params:[oa({name:"Text",description:"The text to put on the image",defaultValue:""}),(ma={name:"Font",defaultValue:It[0],options:It.map((function(e){return{name:e,value:e}}))},{name:ma.name,defaultValue:Sn(ma.defaultValue),fn:function(e){return Object(T.jsx)(qn,{name:ma.name,value:e.value,options:ma.options,description:ma.description,onChange:e.onChange})}}),Jn({name:"X",defaultValue:0}),Jn({name:"Y",defaultValue:0}),Jn({name:"Size",defaultValue:12,min:8}),Hn({name:"Color",defaultValue:r.fromHexColor("#000000")})],fn:function(e){var n=e.image,a=Object(j.a)(e.parameters,6),t=a[0],c=a[1],s=a[2],u=a[3],l=a[4],m=a[5];return o.mapFrames(n,(function(e){return i.applyCanvasFromFrame({dimensions:n.dimensions,frame:e,postEffect:function(e){var n=e.ctx;n.font="".concat(l,"px ").concat(c),n.fillStyle=r.toHexColor(m),n.fillText(t,s,u)}})}))}}),kt=fa({name:"Trails",group:"Misc",description:"Adds a trail of previous animation frames",requiresAnimation:!0,params:[ra({name:"Number of Trails",description:"How many previous frames to draw",min:1,max:10,defaultValue:3}),ra({name:"Trail Opacity",description:"Controls how transparent each trail is",min:1,max:100,defaultValue:50}),ra({name:"Trail Blur",description:"Blurs each the trails, can make things look smoother",defaultValue:0,min:0,max:100})],fn:function(e){for(var n=e.image,a=Object(j.a)(e.parameters,3),t=a[0],r=a[1],o=a[2],c=Math.max(n.dimensions[0],n.dimensions[1])/1e4*o,s=[],u=0;u<n.frames.length;u+=1){for(var l=i.createCanvas(n.dimensions),m=t;m>0;m-=1){var f=u-m+1,d=f>=0?f:n.frames.length+f,p=n.frames[d];null!=p&&(i.applyFilter(l,{opacity:Math.floor(m/t*r),blur:Math.floor(m*c)}),i.drawImageOnCanvas({ctx:l.ctx,dimensions:n.dimensions,frame:p}))}i.applyFilter(l,{opacity:100,blur:0}),i.drawImageOnCanvas({ctx:l.ctx,dimensions:n.dimensions,frame:n.frames[u]}),s.push(i.canvasToFrame(l))}return{dimensions:n.dimensions,frames:s}}}),St=fa({name:"Transparency",group:"Image",description:"Set certain pixels to be transparent",params:[Pn({name:"Matches are Transparent",description:"If checked, then pixels matching this color will be made transparent. If not checked, non-matching pixels are transparent.",defaultValue:!0}),Hn({name:"Color",defaultValue:r.fromHexColor("#000000")}),ra({name:"Tolerance",description:'A higher number will mean colors that are "close" to the chosen color will be transparent. (0 - 100)',defaultValue:10,min:0,max:100})],fn:o.mapImage((function(e){var n=e.coord,a=e.getSrcPixel,t=Object(j.a)(e.parameters,3),i=t[0],o=t[1],c=t[2],s=a(n),u=100*r.colorDiff(s,o)<=c;return(i?u:!u)?[s[0],s[1],s[2],0]:s}))}),Mt=fa({name:"Transpose",group:"Image",description:"Move the image left or right, up or down",params:[Jn({name:"X",defaultValue:0}),Jn({name:"Y",defaultValue:0})],fn:o.mapImage((function(e){var n=Object(j.a)(e.coord,2),a=n[0],t=n[1],r=e.getSrcPixel,i=Object(j.a)(e.parameters,2);return r([a+i[0],t+i[1]])}))}),Et=["Animation","Image","Party","Transform","Colors","Misc"],Vt=Object(yn.a)([Ot,da,pa,ha,ga,ba,Oa,Aa,Ca,ya,Fa,Sa,Ma,Ea,Va,Ba,Pa,Ra,Ha,Qa,Wa,qa,Ua,za,Xa,Za,Ja,Ka,_a,$a,et,at,it,ot,ct,ut,lt,mt,dt,pt,ht,gt,bt,jt,vt,xt,At,Ct,wt,yt,Ft,kt,St,Mt],Object(In.a)((function(e){return Et.indexOf(e.group)}),(function(e){var n;return-1*(null!==(n=e.groupOrder)&&void 0!==n?n:0)}),(function(e){return e.name})),Object(Fn.a)((function(e){return e.disabled}))),Bt=function(e){var n=Vt.find((function(n){return n.name===e}));return t.assert(n,"Could not find matching effect: ".concat(e)),n},Pt=a(497),Tt=a(498),Rt=a(469),Dt=a(499),Ht=a(500),Qt=a(501),Nt=function(){return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsx)(A.a,{children:"This resulting image contains partial transparency"}),Object(T.jsx)(A.a,{variant:"caption",children:"Gifs do not handle partial transparency, so a fake background has been applied to the preview."}),Object(T.jsx)(A.a,{variant:"caption",children:'Be sure to add some effect after this that affects the "background", or else anything that is partially transparent will be made either fully transparent, or fully opaque.'})]})},Wt=function(){return Object(T.jsx)(H,{name:"info",color:"secondary",tooltip:Object(T.jsx)(Nt,{}),htmlTooltip:!0})},qt=a(206),Ut=a.n(qt),zt=["#111111","#888888"],Yt=fa({name:"Fake Transparency",group:"Image",description:"This is just to display behind a picture when there are partially-transparent pixels, as GIFs do not support partial transparency",params:[],disabled:!0,fn:function(e){var n=e.image,a=function(){for(var e=i.createCanvas(n.dimensions),a=e.ctx,t=n.dimensions[0]/10,r=n.dimensions[1]/10,o=0;o<10;o+=1)for(var c=0;c<10;c+=1)a.fillStyle=zt[(o+c)%2],a.fillRect(o*t,c*r,(o+1)*t,(c+1)*r);return e};return o.mapFrames(n,(function(e){return i.combineImages({dimensions:n.dimensions,background:a(),foreground:e})}))}}),Gt=function(){var e=Object(b.a)(g.a.mark((function e(n){var a,t,r,i,o,c,s,u,l,m,f,d,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.image,t=n.effectInput,r=n.randomSeed,i=n.fps,o=Ga()(r),c=Bt(t.effectName),e.next=5,c.fn({image:a,parameters:t.params,random:o});case 5:return s=e.sent,u=Zt(s,o),l=u.transparentColor,m=u.hasPartialTransparency,e.next=9,Xt({image:Lt(s,l),transparentColor:l,fps:i});case 9:if(f=e.sent,!m){e.next=22;break}return e.next=13,Yt.fn({image:s,parameters:[],random:o});case 13:return d=e.sent,e.t0=f,e.t1=s,e.next=18,Xt({image:d,transparentColor:void 0,fps:i});case 18:return e.t2=e.sent,e.abrupt("return",{gif:e.t0,image:e.t1,partiallyTransparent:!0,gifWithBackgroundColor:e.t2});case 22:if(null!=l){e.next=26;break}e.t3=void 0,e.next=29;break;case 26:return e.next=28,Yt.fn({image:s,parameters:[],random:o});case 28:e.t3=e.sent;case 29:if(p=e.t3,e.t4=f,e.t5=s,null!=p){e.next=36;break}e.t6=void 0,e.next=39;break;case 36:return e.next=38,Xt({image:p,transparentColor:void 0,fps:i});case 38:e.t6=e.sent;case 39:return e.t7=e.t6,e.abrupt("return",{gif:e.t4,image:e.t5,partiallyTransparent:!1,gifWithBackgroundColor:e.t7});case 41:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Lt=function(e,n){var a=e.frames.map((function(e){for(var a=new Uint8ClampedArray(e.length),t=0;t<e.length;t+=4)n&&e[t+3]<128?(a[t]=n[0],a[t+1]=n[1],a[t+2]=n[2],a[t+3]=0):(a[t]=e[t],a[t+1]=e[t+1],a[t+2]=e[t+2],a[t+3]=0);return a}));return{dimensions:e.dimensions,frames:a}},Xt=function(){var e=Object(b.a)(g.a.mark((function e(n){var a,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.image,i=n.transparentColor,o=n.fps,e.abrupt("return",new Promise((function(e){var n=Object(j.a)(a.dimensions,2),c=n[0],s=n[1],u=new Ut.a(c,s);if(u.setFrameRate(o),u.setRepeat(0),u.writeHeader(),i){var l=r.toHexColor(i).slice(1);u.setTransparent("0x".concat(l))}var m=[];u.on("data",(function(e){m.push(e)})),u.on("end",Object(b.a)(g.a.mark((function n(){var a,r;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new Blob(m,{type:"image/gif"}),n.next=3,t.blobOrFileToDataUrl(a);case 3:r=n.sent,e(r);case 5:case"end":return n.stop()}}),n)})))),a.frames.forEach((function(e){u.addFrame(e)})),u.finish()})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Zt=function(e,n){var a=!1,t=new Set,i=Object(j.a)(e.dimensions,2),c=i[0],s=i[1],u=!1,l=r.toHexColor([0,255,0,255]);return e.frames.forEach((function(i){for(var m=0;m<s;m+=1)for(var f=0;f<c;f+=1){var d=o.getPixelFromSource(e.dimensions,i,[f,m]);if(r.isPartiallyTransparent(d)&&(u=!0),r.isTransparent(d))a=!0;else{var p=r.toHexColor(d);t.add(p),p===l&&(l=Jt(n,t))}}})),{transparentColor:a?r.fromHexColor(l):void 0,hasPartialTransparency:u}},Jt=function e(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=r.toHexColor(r.randomColor(n));return t>2e3?i:a.has(i)?e(n,a,t+1):i};function Kt(){return new Worker(a.p+"static/js/effect.worker.a6b0bfcc.worker.js")}var _t=new Map,$t=function(e){return function(n){var a=_t.get(e);a&&(a.reject(n),_t.delete(e))}},er=An||"DEV"===Cn?Gt:function(e){return new Promise((function(n,a){var t=new Kt,r="".concat(Date.now(),"-").concat(Math.floor(1e5*Math.random()));_t.set(r,{resolve:n,reject:a}),t.addEventListener("error",$t(r)),t.addEventListener("messageerror",$t(r)),t.onmessage=function(e){var n=e.data;"complete"===n.status&&function(e,n){var a=_t.get(e);a&&(a.resolve(n),_t.delete(e))}(r,n.result)},t.postMessage(e)}))},nr=function(){var e=Object(b.a)(g.a.mark((function e(n){var a,r,i,o,c,s,u,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state,r=n.startEffectIndex,i=n.onCompute,t.assert(a.baseImage,"No source image, this button should be disabled!"),0===r?o=a.baseImage.image:(c=a.effects[r-1].state,t.assert("done"===c.status,"We should not be starting with this effect if the previous is not done computing"),o=c.image.image),s=r;case 4:if(!(s<a.effects.length)){e.next=14;break}return u=a.effects[s],e.next=8,er({randomSeed:a.baseImage.gif,image:o,effectInput:{effectName:u.effectName,params:u.paramsValues},fps:a.fps});case 8:l=e.sent,o=l.image,i(l,s);case 11:s+=1,e.next=4;break;case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ar=m.a.createContext({latestRunIdRef:null}),tr=function(e){var n=e.children,a=m.a.useRef(0);return Object(T.jsx)(ar.Provider,{value:{latestRunIdRef:a},children:n})};function rr(e){var n=e.onComplete,a=e.onError,t=m.a.useContext(ar).latestRunIdRef,r=m.a.useCallback((function(e,a){wn("Finished",{runId:e,latestRunIdRef:t}),e===t.current?n(a):wn("Throwing away an old compute")}),[n,t]);return m.a.useCallback((function(e){var n=Math.floor(1e5*Math.random());wn("Computing: ",{runId:n,args:e}),t.current=n,er(e).then((function(e){return r(n,e)})).catch(a)}),[a,r,t])}var ir=function(){return Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsx)(A.a,{children:"This is a static image"}),Object(T.jsx)(A.a,{variant:"caption",children:"This effect requires an animation in order to have any effect."}),Object(T.jsx)(A.a,{variant:"caption",children:'Be sure to add a "Set Animation Length" effect before this, so there are multiple animation frames.'})]})},or=function(){return Object(T.jsx)(H,{name:"warning",color:"warning",tooltip:Object(T.jsx)(ir,{}),htmlTooltip:!0})},cr=Object(E.a)("div")((function(e){return{position:"sticky",top:"-8px",padding:"4px 10px",backgroundColor:e.theme.palette.primary.contrastText}})),sr=Object(E.a)("ul")({padding:0}),ur=function(e){var n,a,r=e.open,i=e.initialImage,o=e.currentEffect,c=e.possibleEffects,s=e.currFps,u=e.currRandomSeed,l=e.onChangeEffect,f=e.onCancel,d=m.a.useState({computing:!0}),h=Object(j.a)(d,2),g=h[0],b=h[1],v=rr({onComplete:function(e){b({computing:!1,results:e})}}),w=m.a.useState(!1),y=Object(j.a)(w,2),I=y[0],F=y[1],k=m.a.useState(void 0),S=Object(j.a)(k,2),M=S[0],E=S[1],V=m.a.useState(!1),B=Object(j.a)(V,2),P=B[0],R=B[1];m.a.useEffect((function(){o&&E({effect:o.effect,params:Object(L.a)(o.params)})}),[o]),m.a.useEffect((function(){r||(F(!1),E(void 0),b({computing:!0}))}),[r]),m.a.useEffect((function(){if(i)return I?void 0:(wn("Initial loading"),b({computing:!1,results:i}),void F(!0))}),[i]),m.a.useEffect((function(){i&&M&&(b({computing:!0}),v({fps:s,randomSeed:u,image:i.image,effectInput:{effectName:M.effect.name,params:M.params}}))}),[i,M,s,u]);var D=function(e){e.save&&M?(l(M,g.computing?void 0:g.results),R(!1)):f()},H=null!==(n=null===M||void 0===M?void 0:M.effect)&&void 0!==n?n:void 0;return Object(T.jsx)(Pt.a,{fullWidth:!0,maxWidth:"sm",open:r,children:M&&H&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Tt.a,{children:Object(T.jsx)(x.a,{direction:"row",spacing:4,marginTop:2,children:Object(T.jsx)(Qn.a,{fullWidth:!0,children:Object(T.jsx)(Rt.a,{disableClearable:!0,value:M.effect,options:c,groupBy:function(e){return e.group},onChange:function(e,n){E({effect:n,params:n.params.map((function(e){var n;return e.defaultValue(null!==(n=null===i||void 0===i?void 0:i.image)&&void 0!==n?n:void 0)}))}),R(!0)},getOptionLabel:function(e){return e.name},renderGroup:function(e){return Object(T.jsxs)("li",{children:[Object(T.jsxs)(cr,{children:[Object(T.jsx)(A.a,{variant:"subtitle1",children:e.group}),Object(T.jsx)(O.a,{})]}),Object(T.jsx)(sr,{children:e.children})]},e.key)},renderOption:function(e,n){return Object(T.jsx)("li",Object(p.a)(Object(p.a)({},e),{},{children:Object(T.jsxs)(x.a,{marginLeft:2,marginRight:2,children:[Object(T.jsx)(A.a,{variant:"body2",children:n.name}),Object(T.jsx)(A.a,{variant:"caption",marginLeft:2,children:n.description})]})}))},renderInput:function(e){return Object(T.jsx)(Y.a,Object(p.a)(Object(p.a)({},e),{},{label:"Effect"}))}})})})}),Object(T.jsx)(Dt.a,{children:Object(T.jsxs)(x.a,{divider:Object(T.jsx)(O.a,{}),spacing:2,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:4,children:[Object(T.jsxs)(A.a,{variant:"body2",children:[H.description,Object(T.jsx)("div",{children:H.secondaryDescription&&Object(T.jsx)(A.a,{variant:"caption",marginLeft:2,children:H.secondaryDescription})})]}),H.requiresAnimation&&!g.computing&&g.results.image.frames.length<=1?Object(T.jsx)(or,{}):null]}),H.params.map((function(e,n){var a=e.fn({value:M.params[n],onChange:function(e){R(!0),E(Object(p.a)(Object(p.a)({},M),{},{params:t.replaceIndex(M.params,n,(function(){return e}))}))}});return Object(T.jsx)(m.a.Fragment,{children:a},"".concat(M.effect.name,"-").concat(e.name))})),Object(T.jsx)(x.a,{sx:{height:300},children:g.computing?Object(T.jsx)(Ht.a,{size:100}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(bn,{src:null!==(a=g.results.gifWithBackgroundColor)&&void 0!==a?a:g.results.gif,alt:"effect-".concat(M.effect.name),dimensions:g.results.image.dimensions}),g.results.partiallyTransparent?Object(T.jsx)(Wt,{}):null]})})]})}),Object(T.jsxs)(Qt.a,{children:[Object(T.jsx)(C.a,{variant:"outlined",autoFocus:!0,onClick:function(){D({save:!1})},children:"Cancel"}),Object(T.jsx)(C.a,{variant:"contained",autoFocus:!0,disabled:!P,onClick:function(){D({save:!0})},children:"Save and Close"})]})]})})},lr=128,mr=function(e){var n=e.result,a=e.effectName,t=n.image,r=t.frames,i=t.dimensions,o=Object(j.a)(i,2),c=o[0],s=o[1],u=m.a.useState(!0),l=Object(j.a)(u,2),f=l[0],d=l[1],p=m.a.useMemo((function(){var e=s/c,n=lr,a=lr;return c>s?a=Math.floor(e*lr):n=Math.floor(e*lr),{eleWidth:n,eleHeight:a,hScale:n/c,vScale:a/s}}),[s,c]),h=p.eleWidth,g=p.eleHeight,b=p.hScale,v=p.vScale,C=m.a.useMemo((function(){return r.map((function(e,a){return Object(T.jsxs)(x.a,{alignItems:"center",children:[Object(T.jsxs)(A.a,{variant:"caption",children:["Frame ",a+1]}),Object(T.jsx)(We,{width:h,height:g,onCanvasMount:function(n){He(n,{horizontalScale:b,verticalScale:v}),Pe({ctx:n.ctx,dimensions:i,frame:e})}},a)]},"".concat(n.gif.substring(0,16),"-").concat(a))}))}),[i,g,h,r,b,n.gif,v]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(x.a,{alignItems:"center",children:[Object(T.jsx)(A.a,{variant:"body1",children:"Full Gif"}),n.partiallyTransparent?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(bn,{src:n.gifWithBackgroundColor,dimensions:i,alt:a}),Object(T.jsx)(Wt,{})]}):Object(T.jsxs)(x.a,{spacing:1,pb:2,children:[Object(T.jsx)(bn,{src:f&&n.gifWithBackgroundColor?n.gifWithBackgroundColor:n.gif,dimensions:i,alt:a}),null!=n.gifWithBackgroundColor&&Object(T.jsxs)(x.a,{direction:"row",children:[Object(T.jsx)(A.a,{variant:"caption",children:"Show Transparency"}),Object(T.jsx)(Vn.a,{checked:f,onChange:function(e){return d(e.target.checked)}})]})]})]}),Object(T.jsx)(O.a,{orientation:"vertical"}),C]})},fr=function(e){var n=e.appStateEffect;return"done"!==n.state.status?Object(T.jsx)(Ht.a,{}):Object(T.jsx)(mr,{effectName:n.effectName,result:n.state.image})},dr=function(e){var n=e.effect,a=e.index,r=e.currentEffects,i=e.setEffectEditDialogState,o=e.onEffectsChange,c=e.newDefaultEffect,s=m.a.useCallback((function(){i({open:!0,idx:a,isNew:!1})}),[a,i]),u=m.a.useCallback((function(){o(t.removeIndex(r,a))}),[r,a,o]),l=m.a.useCallback((function(){var e=a+1;o(t.insertInto(r,e,c(a))),setTimeout((function(){return i({open:!0,idx:e,isNew:!0})}),2)}),[r,a,c,o,i]),f=m.a.useMemo((function(){return"done"!==n.state.status?null:Bt(n.effectName).requiresAnimation&&n.state.image.image.frames.length<=1?Object(T.jsx)(or,{}):null}),[n]);return Object(T.jsxs)(x.a,{children:[Object(T.jsx)(w.a,{style:{padding:8},elevation:4,children:Object(T.jsxs)(x.a,{alignItems:"center",spacing:2,children:[Object(T.jsxs)(x.a,{direction:"row",spacing:2,children:[Object(T.jsxs)(A.a,{variant:"h6",children:["#",a+1,": ",n.effectName]}),f]}),Object(T.jsxs)(x.a,{direction:"row",maxWidth:An?"300px":"md",spacing:2,sx:{overflowX:"auto"},children:[Object(T.jsxs)(x.a,{spacing:2,justifyContent:"center",children:[Object(T.jsx)(D,{label:"Edit",name:"settings",onClick:s}),Object(T.jsx)(D,{label:"Delete",name:"delete",onClick:u})]}),Object(T.jsx)(fr,{appStateEffect:n})]})]})}),Object(T.jsx)(O.a,{sx:{py:4},children:Object(T.jsx)(C.a,{onClick:l,startIcon:Object(T.jsx)(H,{name:"add"}),children:a<r.length-1?"Insert Effect Here":"Add New Effect"})})]})},pr=function(e){var n=e.appState,a=e.possibleEffects,r=e.onEffectsChange,i=n.effects,o=m.a.useState({open:!1}),c=Object(j.a)(o,2),s=c[0],u=c[1],l=m.a.useState(),f=Object(j.a)(l,2),d=f[0],p=f[1];m.a.useEffect((function(){n.baseImage&&(null===d||void 0===d?void 0:d.gif)!==n.baseImage.gif&&p(d)}),[n,d]);var h=m.a.useMemo((function(){if(s.open){var e=i[s.idx-1];return e?"done"===e.state.status?e.state.image:void 0:n.baseImage}}),[n,i,s]),g=m.a.useMemo((function(){if(s.open){var e=i[s.idx];return{effect:Bt(e.effectName),params:e.paramsValues}}}),[s,i]),b=m.a.useCallback((function(e){return{effectName:a[0].name,paramsValues:a[0].params.map((function(a){var t=void 0;if(0===e){var r;t=null===(r=n.baseImage)||void 0===r?void 0:r.image}else{var o=i[e];"done"===(null===o||void 0===o?void 0:o.state.status)&&(t=o.state.image.image)}return a.defaultValue(t)})),state:{status:"init"}}}),[n,i,a]),v=m.a.useCallback((function(){r(t.insertInto(i,0,b(0))),setTimeout((function(){return u({open:!0,idx:0,isNew:!0})}),2)}),[i,b,r]),y=m.a.useMemo((function(){var e=i[i.length-1];if(e&&"done"===e.state.status)return e.state.image.gif}),[i]),I=m.a.useCallback((function(e,n){s.open&&(r(t.replaceIndex(i,s.idx,(function(){return{effectName:e.effect.name,paramsValues:e.params,state:n?{status:"done",image:n}:{status:"init"}}}))),u({open:!1}))}),[i,s,r]),F=m.a.useCallback((function(){s.open&&s.isNew&&r(t.removeIndex(i,s.idx)),u({open:!1})}),[i,s,r]),k=m.a.useCallback((function(){null!=y&&Object(xn.saveAs)(y,n.fname||"image.gif")}),[y,n]),S=m.a.useMemo((function(){return s.open&&s.isNew?s.idx:Number.MAX_SAFE_INTEGER}),[s]);return Object(T.jsxs)(x.a,{children:[Object(T.jsx)(ur,{open:s.open,possibleEffects:a,onChangeEffect:I,onCancel:F,initialImage:h,currentEffect:g,currFps:n.fps,currRandomSeed:"partymoji"}),Object(T.jsxs)(G.a,{children:[Object(T.jsx)(O.a,{sx:{pb:4},children:Object(T.jsx)(C.a,{startIcon:Object(T.jsx)(H,{name:"add"}),onClick:v,name:"add",children:"Insert First Effect"})}),i.map((function(e,n){return n!==S&&Object(T.jsx)(dr,{index:n,currentEffects:i,effect:e,setEffectEditDialogState:u,onEffectsChange:r,newDefaultEffect:b},function(e,n){return"".concat(e.effectName,"-").concat(n,"-").concat("done"===e.state.status?e.state.image.gif.substring(0,16):"pending")}(e,n))}))]}),null!=y&&Object(T.jsx)(w.a,{style:{padding:8},elevation:4,children:Object(T.jsxs)(x.a,{alignItems:"center",spacing:2,children:[Object(T.jsx)(A.a,{variant:"h6",children:"Final Result"}),Object(T.jsx)(bn,{src:y,alt:n.fname||"image.gif"}),Object(T.jsx)(C.a,{variant:"contained",onClick:k,startIcon:Object(T.jsx)(H,{name:"save_alt"}),children:"Save Gif"})]})})]})},hr="partymoji-state",gr=function(){var e=Object(b.a)(g.a.mark((function e(){var n,a,r,i,s,u,l,m,f,d,h,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=window.localStorage.getItem(hr))){e.next=27;break}if(a=JSON.parse(n),!Array.isArray(a.effects)){e.next=27;break}if(i=void 0,s=20,"string"!==typeof(r=a).baseImage){e.next=26;break}if(!r.baseImage.startsWith("data:image/gif")){e.next=21;break}return u=t.dataURItoBlob(r.baseImage),l=new File([u],r.fname),e.next=14,c.readImage(l);case 14:m=e.sent,f=m.image,d=m.fps,i={gif:r.baseImage,gifWithBackgroundColor:r.baseImage,image:f,partiallyTransparent:!1},s=d,e.next=26;break;case 21:return e.next=23,c.readImage(a.baseImage);case 23:h=e.sent,b=h.image,i={gif:r.baseImage,gifWithBackgroundColor:r.baseImage,image:b,partiallyTransparent:o.isPartiallyTransparent(b)};case 26:return e.abrupt("return",Object(p.a)(Object(p.a)({},r),{},{baseImage:i,fps:s}));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.error("Error loading state from local storage",e.t0.stack||e.t0);case 32:return e.abrupt("return",void 0);case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}(),br=function(e){try{window.localStorage.setItem(hr,vr(e))}catch(n){console.error("Error saving state to local storage",n.stack||n)}},jr=function(){try{window.localStorage.removeItem(hr)}catch(e){console.error("Error clearing state from local storage",e.stack||e)}},vr=function(e){var n,a=Object(p.a)(Object(p.a)({},e),{},{baseImage:null===(n=e.baseImage)||void 0===n?void 0:n.gif,effects:e.effects.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{state:{status:"init"}})}))});return JSON.stringify(a)},xr=a(478),Or=a(472),Ar=m.a.createContext({alert:null,setAlert:function(){throw new Error("Context not initialized")}}),Cr=function(e){var n=e.children,a=m.a.useState(null),t=Object(j.a)(a,2),r=t[0],i=t[1];return Object(T.jsx)(Ar.Provider,{value:{alert:r,setAlert:i},children:n})},wr=function(){var e=m.a.useContext(Ar),n=e.alert,a=e.setAlert;return Object(T.jsx)(xr.a,{open:null!=n,children:null==n?void 0:Object(T.jsx)(Or.a,{severity:n.severity,onClose:function(){return a(null)},children:n.message})})},yr=ra({name:"Final Gif Frames per Second",defaultValue:20,min:1,max:60}),Ir={version:7,effects:[],baseImage:void 0,fps:20},Fr=function(){var e=m.a.useState(Ir),n=Object(j.a)(e,2),a=n[0],r=n[1],i=m.a.useState({compute:!1}),o=Object(j.a)(i,2),c=o[0],s=o[1],u=m.a.useState(null),l=Object(j.a)(u,2),f=l[0],d=l[1],h=m.a.useContext(Ar).setAlert;m.a.useEffect((function(){An&&h({severity:"warning",message:"This app is not well optimized for mobile. Your experience may not be great."})}),[h]),m.a.useEffect((function(){Object(b.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr();case 2:(n=e.sent)&&(7===n.version?(r(n),s({compute:!0,startIndex:0})):jr());case 4:case"end":return e.stop()}}),e)})))()}),[]);var w=m.a.useCallback((function(e,n){var a=n.compute;r((function(n){var t=e(n);if(br(t),"DEV"===Cn&&(window.STATE=t),"no"!==a&&null!=t.baseImage){f&&(clearTimeout(f),d(null));var r=function(e){var n=e.currState,a=e.prevState;if(n.fps!==a.fps||n.baseImage!==a.baseImage)return wn("FPS or base image is different"),{diff:!0,index:0};for(var t=n.effects,r=a.effects,i=0;i<t.length;i+=1){var o=t[i],c=r[i];if(!c)return wn("No prevE, index ",i),{diff:!0,index:i};if("done"!==c.state.status)return wn("PrevE not done ",i),{diff:!0,index:i};if(o.effectName!==c.effectName)return wn("Different effect name ",i),{diff:!0,index:i};for(var s=0;s<o.paramsValues.length;s+=1){var u=o.paramsValues[s],l=c.paramsValues[s];if(JSON.stringify(u)!==JSON.stringify(l))return wn("Param different",i,s),{diff:!0,index:i}}}return wn("No diff"),{diff:!1}}({prevState:n,currState:t});r.diff&&("now"===a?s({compute:!0,startIndex:r.index}):(s({compute:!1}),d(setTimeout((function(){d(null),s({compute:!0,startIndex:r.index})}),1e3))))}return t}))}),[]);return m.a.useEffect((function(){wn("UseEffect, doCompute",c),!1!==c.compute&&(s({compute:!1}),Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w((function(e){return Object(p.a)(Object(p.a)({},e),{},{effects:e.effects.map((function(e,n){return n<c.startIndex?e:Object(p.a)(Object(p.a)({},e),{},{state:{status:"computing"}})}))})}),{compute:"no"}),e.next=3,nr({state:a,onCompute:function(e,n){w((function(a){return Object(p.a)(Object(p.a)({},a),{},{effects:t.replaceIndex(a.effects,n,(function(n){return Object(p.a)(Object(p.a)({},n),{},{state:{status:"done",image:e}})}))})}),{compute:"no"})},startEffectIndex:c.startIndex});case 3:case"end":return e.stop()}}),e)})))())}),[c]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(y.a,{}),Object(T.jsx)(v.a,{maxWidth:An?"sm":"md",children:Object(T.jsxs)(x.a,{spacing:4,justifyContent:"space-evenly",alignItems:"center",width:An?"sm":void 0,divider:Object(T.jsx)(O.a,{}),children:[Object(T.jsx)(A.a,{variant:"h2",pt:4,children:"Partymoji"}),Object(T.jsxs)(x.a,{spacing:4,divider:Object(T.jsx)(O.a,{}),children:[Object(T.jsx)(kr,{children:Object(T.jsx)(N,{})}),Object(T.jsx)(kr,{children:Object(T.jsxs)(x.a,{spacing:1,alignItems:"center",children:[Object(T.jsx)(A.a,{variant:"h5",children:"Source Image"}),Object(T.jsx)(vn,{name:"Upload a source image",currentImage:a.baseImage,onChange:function(e,n,a){if(An){var t=Object(j.a)(e.image.dimensions,2),r=t[0],i=t[1];if(r>512||i>512)return void h({severity:"error",message:"The image you chose is too large to work well on mobile."})}w((function(t){return Object(p.a)(Object(p.a)({},t),{},{baseImage:e,fname:n,fps:a})}),{compute:"now"})}}),yr.fn({value:a.fps,onChange:function(e){return w((function(n){return Object(p.a)(Object(p.a)({},n),{},{fps:e})}),{compute:"later"})}})]})}),null!=a.baseImage&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(kr,{children:Object(T.jsx)(pr,{appState:a,possibleEffects:Vt,onEffectsChange:function(e){return w((function(n){return Object(p.a)(Object(p.a)({},n),{},{effects:e})}),{compute:"now"})}})}),Object(T.jsx)(kr,{children:Object(T.jsxs)(x.a,{spacing:3,children:[Object(T.jsx)(A.a,{variant:"h5",children:"Clear Effects"}),Object(T.jsxs)(A.a,{variant:"body1",children:[Object(T.jsx)(H,{name:"warning",color:"warning"})," Clicking this button will clear all effects for the image"]}),Object(T.jsx)(C.a,{startIcon:Object(T.jsx)(H,{name:"clear"}),sx:{maxWidth:"300px"},variant:"contained",color:"warning",onClick:function(){var e=Object(p.a)(Object(p.a)({},Ir),{},{baseImage:a.baseImage});r(e),br(e)},children:"Clear Effects"})]})})]}),Object(T.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(T.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:64,height:64,alt:"Github Link"})})]})]})}),Object(T.jsx)(x.a,{pt:8,children:Object(T.jsx)(wr,{})})]})},kr=function(e){var n=e.children;return Object(T.jsx)(w.a,{style:{padding:16,maxWidth:An?"300px":void 0},children:n})},Sr=function(){return Object(T.jsx)(tr,{children:Object(T.jsx)(Cr,{children:Object(T.jsx)(Fr,{})})})},Mr=a(108),Er=a(109),Vr=a(209),Br=a(208),Pr=function(e){Object(Vr.a)(a,e);var n=Object(Br.a)(a);function a(){var e;Object(Mr.a)(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).state={hasError:!1},e}return Object(Er.a)(a,[{key:"componentDidCatch",value:function(e,n){console.error("Uncaught error:",e,n)}},{key:"render",value:function(){return this.state.hasError?Object(T.jsxs)(x.a,{spacing:1,children:[Object(T.jsx)(A.a,{variant:"h2",children:"Oh no!"}),Object(T.jsx)(A.a,{variant:"body1",children:"There seems to have been an issue"}),Object(T.jsx)(A.a,{variant:"body2",children:"If refreshing the page doesn't fix things, click the below button to clear local storage"}),Object(T.jsx)(C.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:Object(T.jsx)(I.a,{children:"priority_high"}),startIcon:Object(T.jsx)(I.a,{children:"priority_high"}),onClick:this.props.onClearLocalStorage,children:"Clear storage and reload"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),a}(m.a.Component),Tr=Object(s.a)({typography:{fontFamily:"Raleway, Arial"}});d.a.render(Object(T.jsx)(m.a.StrictMode,{children:Object(T.jsx)(u.a,{theme:Tr,children:Object(T.jsx)(Pr,{onClearLocalStorage:function(){jr(),window.location.reload()},children:Object(T.jsx)(Sr,{})})})}),document.getElementById("root"))}},[[406,1,2]]]);
//# sourceMappingURL=main.05a03550.chunk.js.map