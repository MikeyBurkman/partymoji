(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{134:function(e,a){},136:function(e,a){},149:function(e,a){},160:function(e,a){},269:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),i=n(105),s=n.n(i),c=n(14),o=n(4),l=function(e){return{name:e.name,params:e.params,description:e.description,fn:e.fn}},u=n(27),m=n(68),d=function(e){var a=Object(o.a)(e,3),n=a[0],t=a[1],r=a[2],i=function(e){var a=e.toString(16).toUpperCase();return 2===a.length?a:"0"+a};return"#".concat(i(n)).concat(i(t)).concat(i(r))},f=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},h=function(e){return e[3]<64},v=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},j=function(e){var a=Object(o.a)(e,3),n=a[0],t=a[1],r=a[2];return Math.round((n+t+r)/3)},b=function(e){var a=Object(o.a)(e,4),n=a[0],t=a[1],r=a[2],i=a[3],s=function(e){return Math.max(Math.min(e,255),0)};return[s(n),s(t),s(r),s(i)]},p=function(e,a,n){var t=Object(o.a)(e,2),r=t[0],i=t[1],s=Object(o.a)(n,2),c=s[0],l=s[1];if(c<0||c>=r||l<0||l>=i)return[0,0,0,0];var u=w(e,c,l);return[a[u],a[u+1],a[u+2],a[u+3]]};function x(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new m.AssertionError({message:a,actual:e})}var g=function(e,a){var n=e.frames.map((function(n,t){return{data:a(n.data,t,e.frames.length)}}));return{dimensions:e.dimensions,frames:n}},O=function(e,a){for(var n=Object(o.a)(e,2),t=n[0],r=n[1],i=new Uint8Array(t*r*4),s=0;s<r;s+=1)for(var c=0;c<t;c+=1){var l=b(a([c,s])),u=w(e,c,s);i[u]=l[0],i[u+1]=l[1],i[u+2]=l[2],i[u+3]=l[3]}return i},N=function(e){return function(a){var n=a.image,t=a.random,r=a.parameters;return g(n,(function(a,i,s){return O(n.dimensions,(function(c){return e({image:n,dimensions:n.dimensions,random:t,parameters:r,coord:c,frameCount:s,frameIndex:i,getSrcPixel:function(e){return p(n.dimensions,a,e)}})}))}))}},C=function(e){return Object(u.a)(new Array(e)).map((function(e,a){return a}))},w=function(e,a,n){return 4*(a+n*Object(o.a)(e,1)[0])},M=function(e){var a=w(e.dimensions,e.coord[0],e.coord[1]);e.image[a]=e.color[0],e.image[a+1]=e.color[1],e.image[a+2]=e.color[2],e.image[a+3]=e.color[3]},V=function(e){var a=e.image,n=e.newWidth,t=e.newHeight,r=Object(o.a)(a.dimensions,2),i=r[0],s=r[1],c=i/n,l=s/t,u=[n,t];return{frames:a.frames.map((function(e){for(var r=new Uint8Array(n*t*4),i=0;i<t;i+=1)for(var s=0;s<n;s+=1){var o=Math.floor(s*c),m=Math.floor(i*l),d=p(a.dimensions,e.data,[o,m]);M({color:d,coord:[s,i],dimensions:u,image:r})}return{data:r}})),dimensions:[n,t]}},k=[[255,141,139,255],[254,214,137,255],[136,255,137,255],[135,255,255,255],[139,181,254,255],[215,140,255,255],[255,140,255,255],[255,104,247,255],[254,108,183,255],[255,105,104,255]],y=l({name:"Background Party",description:"Transparent pixels will flash bright party colors",params:[],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=(0,e.getSrcPixel)(a);if(h(r)){var i=Math.floor(t/n*k.length);return k[i]}return r}))}),S=n(18),F=n.n(S),P=n(1),I=function(e){var a,n,t=e.selected,i=e.options,s=e.onChange,c=r.a.useState(!0),l=Object(o.a)(c,2),u=l[0],m=l[1],d=r.a.useCallback((function(){document.removeEventListener("click",d),m(!0)}),[]),f=null!==(a=null===(n=i.find((function(e){return e.value===t})))||void 0===n?void 0:n.name)&&void 0!==a?a:"";return Object(P.jsxs)("div",{className:"dropdown is-active",children:[Object(P.jsx)("div",{className:"dropdown-trigger",children:Object(P.jsxs)("button",{className:"button","aria-haspopup":"true",onClick:function(e){e.preventDefault(),u?(m(!1),setTimeout((function(){return document.addEventListener("click",d)}),0)):d()},children:[Object(P.jsx)("span",{children:f}),Object(P.jsx)("span",{className:"icon is-small",children:Object(P.jsx)("i",{className:"fas fa-angle-down","aria-hidden":"true"})})]})}),Object(P.jsx)("div",{className:"dropdown-menu",role:"menu",style:{visibility:u?"hidden":"visible"},children:Object(P.jsx)("div",{className:"dropdown-content",style:{maxHeight:"16em",overflowY:"auto"},children:i.map((function(e){var a=e.name,n=e.value;return Object(P.jsx)("a",{href:"#",className:F()("dropdown-item",{"is-active":t===n}),onClick:function(e){e.preventDefault(),d(),s(n)},children:a},n)}))})})]})},T=function(e){var a=e.text;return Object(P.jsx)("span",{className:"icon column",style:{display:"revert"},children:Object(P.jsx)("i",{className:"fas fa-question-circle","aria-hidden":"true",title:a})})},U=function(e){var a=e.name,n=e.options,t=e.value,r=e.description,i=e.onChange;return Object(P.jsxs)("div",{className:"field",style:{maxWidth:"12em"},children:[Object(P.jsxs)("label",{className:"label",children:[a,r&&Object(P.jsx)(T,{text:r})]}),Object(P.jsx)("div",{className:"control",children:Object(P.jsx)(I,{onChange:function(e){return i({valid:!0,value:e})},selected:t,options:n})})]})};function R(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(P.jsx)(U,{name:e.name,value:a.value.valid?a.value.value:void 0,options:e.options,description:e.description,onChange:a.onChange})}}}var B=n(6),A=n.n(B),W=n(11),q=n(106),H=n.n(q),E=n(107),L=n.n(E),D=n(46),G=n.n(D),z=function(){var e=Object(W.a)(A.a.mark((function e(a,n,t){var r,i,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G()(a),e.next=3,X(a);case 3:return i=e.sent,s=[],n.reduce((function(e,a){var n=a.transform.fn({image:e,parameters:a.params,random:r});return s.push(n),n}),i),e.next=8,Promise.all(s.map(function(){var e=Object(W.a)(A.a.mark((function e(a){var n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_(a,r),i=Y(a.frames.map((function(e){return e.data})),n),e.next=4,J(a.dimensions,i,n,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(a,n,t){return e.apply(this,arguments)}}(),Y=function(e,a){return e.map((function(e){for(var n=new Uint8Array(e.length),t=0;t<e.length;t+=4)a&&e[t+3]<128?(n[t]=a[0],n[t+1]=a[1],n[t+2]=a[2],n[t+3]=a[3]):(n[t]=e[t],n[t+1]=e[t+1],n[t+2]=e[t+2],n[t+3]=255);return n}))},J=function(){var e=Object(W.a)(A.a.mark((function e(a,n,t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var i=Object(o.a)(a,2),s=i[0],c=i[1],l=new L.a(s,c);if(l.setFrameRate(r),l.setRepeat(0),t){var u=d(t).slice(1);l.setTransparent("0x".concat(u))}l.writeHeader();var m=[];l.on("data",(function(e){m.push(e)})),l.on("end",(function(){var a=URL.createObjectURL(new Blob(m,{type:"image/gif"}));e(a)})),n.forEach((function(e){l.addFrame(e)})),l.finish()})));case 1:case"end":return e.stop()}}),e)})));return function(a,n,t,r){return e.apply(this,arguments)}}(),X=function(e){return new Promise((function(a,n){return H()(e,(function(e,t){return e?n(e):a({frames:[{data:Uint8Array.from(t.data)}],dimensions:[t.shape[0],t.shape[1]]})}))}))},_=function(e,a){var n=!1,t=new Set,r=Object(o.a)(e.dimensions,2),i=r[0],s=r[1],c=d([0,255,0,255]);return e.frames.forEach((function(r){for(var o=0;o<s;o+=1)for(var l=0;l<i;l+=1){var u=p(e.dimensions,r.data,[l,o]);if(h(u))n=!0;else{var m=d(u);t.add(m),m===c&&(c=K(a,t))}}})),n?f(c):void 0},K=function e(a,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=d(v(a));return t>2e3?r:n.has(r)?e(a,n,t+1):r},Q=function(e){var a=e.currentImageUrl,n=e.name,t=e.width,r=e.height,i=e.onChange;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"file block",children:Object(P.jsxs)("label",{className:"file-label",children:[Object(P.jsx)("input",{className:"file-input",type:"file",accept:"image/png,image/jpg",name:"source-png",onChange:function(){var e=Object(W.a)(A.a.mark((function e(a){var n,t,r,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(null!==(n=a.target.files)&&void 0!==n?n:[]),r=t[0],e.next=4,Z(r);case 4:s=e.sent,i(s);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}),Object(P.jsxs)("span",{className:"file-cta",children:[Object(P.jsx)("span",{className:"file-icon",children:Object(P.jsx)("i",{className:"fas fa-upload"})}),Object(P.jsx)("span",{className:"file-label",children:n})]})]})}),a&&Object(P.jsx)("img",{width:t,height:r,src:a,alt:"Source"})]})},Z=function(e){return new Promise((function(a){var n=new FileReader;n.onload=function(){return a(n.result)},n.readAsDataURL(e)}))};var $,ee=l({name:"Background Image",description:"Select another image to be used as a background or foreground",params:[function(e){var a=e.name;return{name:a,defaultValue:{valid:!1},fn:function(e){return Object(P.jsxs)("div",{className:"field",style:{maxWidth:"12em"},children:[Object(P.jsx)("label",{className:"label",children:a}),Object(P.jsx)("div",{className:"control has-icons-left has-icons-right",children:Object(P.jsx)(Q,{currentImageUrl:e.value.valid?e.value.value.dataUrl:void 0,width:64,height:64,onChange:function(){var a=Object(W.a)(A.a.mark((function a(n){var t;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,X(n);case 2:t=a.sent,e.onChange({valid:!0,value:{dataUrl:n,image:t}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()})})]})}}}({name:"Image"}),R({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]})],fn:function(e){var a=e.image,n=e.parameters,t=V({image:n[0].image,newWidth:a.dimensions[0],newHeight:a.dimensions[1]}),r=n[1];return g(a,(function(e){return O(a.dimensions,(function(n){var i=p(a.dimensions,e,n),s=p(t.dimensions,t.frames[0].data,n);return"background"===r?h(i)?s:i:h(s)?i:s}))}))}}),ae=function(e){var a=e.name,n=e.value,t=e.description,i=e.parse,s=e.onChange,c=r.a.useState(void 0===n?void 0:n.toString()),l=Object(o.a)(c,2),u=l[0],m=l[1],d=r.a.useState(""),f=Object(o.a)(d,2),h=f[0],v=f[1];return Object(P.jsxs)("div",{className:"field",style:{maxWidth:"12em"},children:[Object(P.jsx)("label",{className:"label",children:Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:a}),t&&Object(P.jsx)(T,{text:t})]})}),Object(P.jsx)("div",{className:"control has-icons-left has-icons-right",children:Object(P.jsx)("input",{className:"input",type:"text",defaultValue:n,onChange:function(e){m(e.target.value)},onBlur:function(){if(void 0!==u&&(!n||u!==n.toString())){var e=i(u);e.valid?v(""):v(e.reason),s(e)}}})}),h&&Object(P.jsx)("p",{className:"help is-danger",children:h})]})},ne=function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){var n=e.min,t=e.max;return Object(P.jsx)(ae,{name:e.name,description:e.description,parse:function(e){var a=parseFloat(e);return isNaN(a)?{valid:!1,reason:"Must be a number"}:void 0!==n&&a<n?{valid:!1,reason:"Must be greater than or equal to ".concat(n)}:void 0!==t&&a>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:a}},onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}},te=l({name:"Bounce",description:"Make the image bounce up and down",params:[ne({name:"Bounce Speed",defaultValue:5,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,s=Object(o.a)(a,2);return r([s[0],s[1]+Math.round(i[0]*Math.sin(t/n*2*Math.PI))])}))}),re=function(e){var a=e.name,n=e.value,t=e.parse,i=e.onChange,s=r.a.useState(void 0===n?void 0:n.toString()),c=Object(o.a)(s,2),l=c[0],u=c[1],m=r.a.useState(""),d=Object(o.a)(m,2),f=d[0],h=d[1];return Object(P.jsxs)("div",{className:"field",style:{maxWidth:"12em"},children:[Object(P.jsx)("label",{className:"label",children:a}),Object(P.jsx)("div",{className:"control has-icons-left has-icons-right",children:Object(P.jsx)("input",{className:"input",type:"text",defaultValue:n,onChange:function(e){u(e.target.value)},onBlur:function(){if(void 0!==l&&(!n||l!==n.toString())){var e=t(l);e.valid?h(""):h(e.reason),i(e)}}})}),f&&Object(P.jsx)("p",{className:"help is-danger",children:f})]})},ie=function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){var n=e.min,t=e.max;return Object(P.jsx)(re,{name:e.name,parse:function(e){var a=parseInt(e,10);return isNaN(a)?{valid:!1,reason:"Must be an integer"}:void 0!==n&&a<n?{valid:!1,reason:"Must be greater than or equal to ".concat(n)}:void 0!==t&&a>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:a}},onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}},se=l({name:"Brightness",description:"Increase or decrease the brightness of the image",params:[ie({name:"Amount",defaultValue:0,min:-100,max:100})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=Object(o.a)(t,1)[0]/100*255,i=n(a);return b([i[0]+r,i[1]+r,i[2]+r,i[3]])}))}),ce=l({name:"Circle",params:[ne({name:"Radius",defaultValue:10,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,s=Object(o.a)(i,1)[0],c=Object(o.a)(a,2),l=c[0],u=c[1];return r([l+Math.round(s*Math.sin(-2*Math.PI*(t/n))),u+Math.round(s*Math.cos(-2*Math.PI*(t/n)))])}))}),oe=l({name:"Expand",params:[ne({name:"Radius",defaultValue:10,min:0})],fn:N((function(e){var a=e.dimensions,n=e.coord,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,s=e.parameters,c=r/t,l=Math.cos(2*c*Math.PI)*s[0],u=Object(o.a)(a,2),m=u[0],d=u[1],f=m/2,h=d/2,v=Object(o.a)(n,2),j=v[0],b=v[1],p=(j-f)/m,x=(b-h)/d;return i([j-Math.floor(l*p),b-Math.round(l*x)])}))}),le=l({name:"Fisheye",params:[ne({name:"radius",defaultValue:10,min:0})],fn:N((function(e){var a=e.dimensions,n=e.coord,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,s=e.parameters,c=r/t,l=c<.5,u=Object(o.a)(a,2),m=u[0],d=u[1],f=(l?c:1-c)*s[0],h=m/2,v=d/2,j=Object(o.a)(n,2),b=j[0],p=j[1],x=Math.atan2(v-p,h-b);return i([b+Math.round(f*Math.cos(x)),p+Math.round(f*Math.sin(x))])}))}),ue=l({name:"Frame Count",description:"Set how many frames of animation there will be. This is required for all animation transforms",params:[ie({name:"Number of Frames",defaultValue:10,min:1})],fn:function(e){var a=e.image,n=e.parameters,t=Object(o.a)(n,1)[0],r=a.frames,i=C(t).map((function(e){return{data:r[e]?r[e].data:r[r.length-1].data}}));return{dimensions:a.dimensions,frames:i}}}),me=l({name:"Grayscale",params:[],fn:N((function(e){var a=e.coord,n=(0,e.getSrcPixel)(a);if(h(n))return[0,0,0,0];var t=j(n);return[t,t,t,255]}))}),de=function(e){var a=e.name,n=e.value,t=e.onChange,i=r.a.useState(n),s=Object(o.a)(i,2),c=s[0],l=s[1];return Object(P.jsxs)("div",{className:"field",style:{maxWidth:"12em"},children:[Object(P.jsx)("label",{className:"label",children:a}),Object(P.jsx)("div",{className:"control has-icons-left has-icons-right",children:Object(P.jsx)("input",{type:"text",value:c,name:a,onChange:function(e){return l(e.target.value)},onBlur:function(){return t(n?{valid:!0,value:n}:{valid:!1})}})})]})},fe=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],he=l({name:"Lightning",params:[($={name:"Random Seed",defaultValue:"lightning"},{name:$.name,defaultValue:void 0!==$.defaultValue?{valid:!0,value:$.defaultValue}:{valid:!1},fn:function(e){return Object(P.jsx)(de,{name:$.name,onChange:e.onChange,value:e.value.valid?e.value.value:void 0})}})],fn:function(e){var a=e.image,n=e.parameters,t=G()(n[0]);return g(a,(function(e){var n=t(),r=n<.9?0:n<.95?1:n<.98?2:3;return O(a.dimensions,(function(n){var t=p(a.dimensions,e,n);if(h(t))return fe[r];if(r>0){var i=1.02*r;return[t[0]*i,t[1]*i,t[2]*i,t[3]]}return t}))}))}}),ve=[[255,141,139,255],[254,214,137,255],[136,255,137,255],[135,255,255,255],[139,181,254,255],[215,140,255,255],[255,140,255,255],[255,104,247,255],[254,108,183,255],[255,105,104,255]],je=l({name:"Party",params:[],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=(0,e.getSrcPixel)(a);if(h(r))return[0,0,0,0];var i=Math.floor(t/n*ve.length),s=ve[i],c=j(r);return[c*s[0]/255,c*s[1]/255,c*s[2]/255,255]}))}),be=n(112),pe=function(e){var a=e.mainEle,n=e.children,t=r.a.useState(!0),i=Object(o.a)(t,2),s=i[0],c=i[1];return Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"is-clickable columns",onClick:function(){return c(!s)},children:[Object(P.jsx)("div",{className:"column is-four-fifths",children:a}),Object(P.jsx)("span",{className:"icon column",children:Object(P.jsx)("i",{className:F()("fas",s?"fa-chevron-down":"fa-chevron-up")})})]}),!s&&Object(P.jsx)("div",{children:n})]})},xe=function(e){var a=e.color;return Object(P.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:d(a)}})},ge=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange;return Object(P.jsx)(pe,{mainEle:Object(P.jsxs)("div",{className:"columns",children:[Object(P.jsxs)("label",{className:"label column is-four-fifths",children:[a,t&&Object(P.jsx)(T,{text:t})]}),Object(P.jsx)("span",{className:"column",children:n&&Object(P.jsx)(xe,{color:n})})]}),children:Object(P.jsx)(be.a,{disableAlpha:!0,presetColors:[],color:n?d(n):void 0,onChangeComplete:function(e){return r({valid:!0,value:f(e.hex)})}})})};function Oe(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(P.jsx)(ge,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange})}}}var Ne=function(e){var a=e.iconClassName,n=e.onClick;return Object(P.jsx)("span",{className:F()("icon","column",n?"is-clickable":void 0),style:{display:"revert"},onClick:n,children:Object(P.jsx)("i",{className:F()("fas",a),"aria-hidden":"true"})})},Ce=function(e){var a=e.name,n=e.newParamText,t=e.createNewParam,i=e.value,s=e.description,c=e.onChange,l=r.a.useState(void 0===i?[]:i.map((function(e,a){return{param:t(),pValue:e}}))),m=Object(o.a)(l,2),d=m[0],f=m[1];return Object(P.jsxs)("div",{className:"field",style:{maxWidth:"12em"},children:[Object(P.jsx)("label",{className:"label",children:Object(P.jsxs)("div",{children:[a," ",s&&Object(P.jsx)(T,{text:s})]})}),Object(P.jsxs)("div",{className:"control",children:[d.map((function(e,n){var t=e.param,r=e.pValue,i=t.fn({value:{valid:!0,value:r},onChange:function(e){if(e.valid){var a=d.map((function(a,r){return n===r?{param:t,pValue:e.value}:a}));f(a),c({valid:!0,value:a.map((function(e){return e.pValue}))})}}});return Object(P.jsxs)("div",{className:"columns",children:[Object(P.jsx)("div",{className:"column is-narrow",children:Object(P.jsx)(Ne,{iconClassName:"fa-trash",onClick:function(){f(d.filter((function(e,a){return a!==n})))}})}),Object(P.jsx)("div",{className:"column",children:i})]},"".concat(a,"-").concat(n))})),Object(P.jsx)("div",{children:Object(P.jsx)("button",{className:"button",onClick:function(){var e=t();f([].concat(Object(u.a)(d),[{param:e,pValue:e.defaultValue}]))},children:n})})]})]})};function we(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(P.jsx)(Ce,{name:e.name,newParamText:e.newParamText,value:a.value.valid?a.value.value:void 0,createNewParam:e.createNewParam,description:e.description,onChange:a.onChange})}}}var Me=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(f),Ve=l({name:"Pinwheel",description:"Create a pinwheel of colors",params:[ie({name:"Offset X",defaultValue:0}),ie({name:"Offset Y",defaultValue:40}),ie({name:"Group Count",defaultValue:1,min:1}),we({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:Me,createNewParam:function(){return Oe({name:"Color"})}})],fn:N((function(e){for(var a=e.coord,n=e.dimensions,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,s=e.parameters,c=i(a),l=Object(o.a)(s,4),u=l[0],m=l[1],d=l[2],f=l[3],v=f.length*d,j=Math.round(360/v),b=f.length;"00"!==(v/b).toFixed(2).slice(-2);)b-=1;if(h(c)){var p=n[0]/2+u,x=n[1]/2+m,g=Object(o.a)(a,2),O=g[0]-p,N=g[1]-x,C=(360+180*Math.atan2(N,O)/Math.PI)%360,w=Math.floor(C/j)%b,M=r/t;return f[(Math.floor(M*b)+w)%b]}return c}))}),ke=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(f),ye=[ee,y,te,se,ce,oe,le,ue,me,he,je,Ve,l({name:"Radiance",params:[ie({name:"Group Count",defaultValue:1,min:1}),we({name:"Colors",newParamText:"New Color",description:"Colors radiating outwards",defaultValue:ke,createNewParam:function(){return Oe({name:"Color"})}})],fn:N((function(e){var a=e.coord,n=e.dimensions,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,s=e.parameters,c=i(a),l=Object(o.a)(s,2),u=l[0],m=l[1],d=C(u).flatMap((function(){return m}));if(h(c)){var f=Object(o.a)(n,2),v=f[0],j=f[1],b=v/2,p=j/2,x=Object(o.a)(a,2),g=x[0]-b,O=x[1]-p,N=Math.sqrt(v/2*(v/2)+j/2*(j/2)),w=Math.sqrt(O*O+g*g),M=Math.floor((1-w/N)*d.length)%d.length,V=r/t;return d[(Math.floor(V*d.length)+M)%d.length]}return c}))}),l({name:"Resize",params:[ie({name:"Width",defaultValue:128,min:1}),ie({name:"Height",defaultValue:128,min:1})],fn:function(e){var a=e.image,n=e.parameters,t=Object(o.a)(n,2),r=t[0],i=t[1];return V({image:a,newWidth:r,newHeight:i})}}),l({name:"Resize Background",params:[ie({name:"Width",defaultValue:128,min:0}),ie({name:"Height",defaultValue:128,min:0})],fn:function(e){var a=e.image,n=e.parameters,t=Object(o.a)(a.dimensions,2),r=t[0],i=t[1],s=Object(o.a)(n,2),c=s[0],l=s[1];x(c>=r,"New width for resize-background needs to be greater than or equal to the original"),x(l>=i,"New height for resize-background needs to be greater than or equal to the original");var u=[c,l],m=(c-r)/2,d=(l-i)/2;return{frames:a.frames.map((function(e){for(var n=new Uint8Array(c*l*4),t=0;t<l;t+=1)for(var r=0;r<c;r+=1){var i=r>m&&r<c-m&&t>d&&t<l-d?p(a.dimensions,e.data,[r-m,t-d]):[0,0,0,0];M({color:i,coord:[r,t],dimensions:u,image:n})}return{data:n}})),dimensions:u}}}),l({name:"Ripple",params:[ne({name:"Amplitude",defaultValue:10,description:"How strong the ripple effect should be"}),ne({name:"Period",defaultValue:2,min:0,description:"How many ripples you want"})],fn:function(e){var a=e.image,n=e.parameters;return g(a,(function(e,t,r){var i=Object(o.a)(n,2),s=i[0],c=i[1],l=a.dimensions[1],u=t/r*2*Math.PI;return O(a.dimensions,(function(n){var t=Object(o.a)(n,2),r=t[0],i=t[1],m=Math.round(s*Math.sin(i/l*c*Math.PI+u));return p(a.dimensions,e,[r+m,i])}))}))}}),l({name:"Rotate",params:[R({name:"Direction",defaultValue:-1,options:[{name:"Clockwise",value:-1},{name:"Counter-Clockwise",value:1}]})],fn:N((function(e){var a=e.dimensions,n=e.coord,t=e.frameCount,r=e.frameIndex,i=e.getSrcPixel,s=e.parameters,c=Object(o.a)(s,1)[0],l=a[0]/2,u=a[1]/2,m=Object(o.a)(n,2),d=m[0]-l,f=m[1]-u,h=r/t*(c||1),v=Math.cos(2*Math.PI*h),j=Math.sin(2*Math.PI*h);return i([Math.round(l+d*v-f*j),Math.round(u+f*v+d*j)])}))}),l({name:"Roxbury",params:[],fn:function(e){var a=e.image;return g(a,(function(e,n,t){var r=n/t,i=Math.floor(4*r),s=4*(r-i/4),c=Math.PI/2*.2,l=0===i?0:1===i?s*c:2===i?c:(1-s)*c,u=Math.cos(1.35*-l),m=Math.sin(1.35*-l),d=.25*a.dimensions[0],f=.7*a.dimensions[1];return O(a.dimensions,(function(n){var t=Object(o.a)(n,2),r=t[0],i=t[1],s=Math.floor(r-d+8*Math.sin(l)),c=Math.floor(i-f+8*Math.cos(l)),h=[Math.round(d+s*u-c*m),Math.round(f+c*u+s*m)];return p(a.dimensions,e,h)}))}))}}),l({name:"Shake",params:[ne({name:"Shake Speed",defaultValue:10,min:0})],fn:N((function(e){var a=e.coord,n=e.frameCount,t=e.frameIndex,r=e.getSrcPixel,i=e.parameters,s=Object(o.a)(i,1)[0],c=Object(o.a)(a,2),l=c[0],u=c[1];return r([l+Math.round(s*Math.cos(t/n*2*Math.PI)),u])}))}),l({name:"Solid Background",params:[Oe({name:"Background Color",defaultValue:f("#000000")})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=Object(o.a)(t,1)[0],i=n(a);return h(i)?r:i}))}),l({name:"Static",params:[ne({name:"Strength",defaultValue:10,min:0})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=e.random,i=Object(o.a)(t,1)[0],s=n(a);return h(s)?[0,0,0,0]:Math.ceil(r()*i)>1?[255-s[0],255-s[1],255-s[2],s[3]]:s}))}),l({name:"Transparent Color",params:[Oe({name:"Transparent Color",defaultValue:f("#000000")}),ie({name:"Tolerance",defaultValue:10,min:0,max:100})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=Object(o.a)(t,2),i=r[0],s=r[1],c=n(a),l=c[0]-i[0],u=c[1]-i[1],m=c[2]-i[2];return Math.sqrt(l*l+u*u+m*m)/255*100<=s?[c[0],c[1],c[2],0]:c}))}),l({name:"Transpose",params:[ie({name:"X",defaultValue:0}),ie({name:"Y",defaultValue:0})],fn:N((function(e){var a=e.coord,n=e.getSrcPixel,t=e.parameters,r=Object(o.a)(t,2),i=r[0],s=r[1],c=Object(o.a)(a,2);return n([c[0]+i,c[1]+s])}))})],Se=ie({name:"Frames per Second",defaultValue:20,min:0}),Fe=function(e){var a=e.isDirty,n=e.computeDisabled,t=e.baseImageUrl,i=e.transforms,s=e.onComputed,c=r.a.useState({loading:!1,results:[]}),l=Object(o.a)(c,2),u=l[0],m=l[1],d=r.a.useState(!1),f=Object(o.a)(d,2),h=f[0],v=f[1],j=r.a.useState(20),b=Object(o.a)(j,2),p=b[0],g=b[1],O=n&&!h;return Object(P.jsxs)("div",{className:"box",children:[Object(P.jsx)("h3",{className:"title",children:"Create Gif"}),Object(P.jsx)("div",{className:"block",children:Se.fn({value:{valid:!0,value:p},onChange:function(e){e.valid&&(g(e.value),v(!0))}})}),Object(P.jsx)("div",{className:"block",children:Object(P.jsxs)("button",{className:F()("button","block",{"is-loading":u.loading}),disabled:O,onClick:Object(W.a)(A.a.mark((function e(){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.map((function(e){return{transform:e.transform,params:e.paramsValues.map((function(e){return x(e.valid),e.value}))}})),m({loading:!0}),setTimeout(Object(W.a)(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(t,"No source image, this button should be disabled!"),e.next=4,z(t,a,p);case 4:n=e.sent,m({loading:!1,results:n}),v(!1),s(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.error(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))));case 3:case"end":return e.stop()}}),e)}))),children:[Object(P.jsx)("span",{children:"Compute"})," ",(a||h)&&Object(P.jsx)("span",{className:"icon is-small",children:Object(P.jsx)("i",{className:"fas fa-exclamation-circle","aria-hidden":"true"})})]})}),Object(P.jsx)("div",{className:"block",children:Object(P.jsx)("div",{className:"columns",children:!u.loading&&u.results.map((function(e,a){return Object(P.jsxs)("div",{className:"column",children:[Object(P.jsx)("div",{children:i[a].transform.name}),Object(P.jsx)("img",{src:e,alt:"gif-".concat(i[a].transform.name)})]})}))})})]})},Pe=function(e){var a=e.selectedTransform,n=e.possibleTransforms,t=e.index,r=e.onSelect,i=e.onRemove,s=e.onMoveLeft,o=e.onMoveRight;return Object(P.jsxs)("div",{className:"card",style:{padding:"0.75rem",maxWidth:"24rem"},children:[Object(P.jsx)("div",{className:"card-header-title",children:Object(P.jsxs)("div",{className:"columns is-desktop",children:[Object(P.jsxs)("div",{className:"column",children:[Object(P.jsxs)("div",{className:"block columns",children:[Object(P.jsx)("div",{className:"column is-narrow",children:t+1}),Object(P.jsx)("div",{className:"column",children:Object(P.jsx)(I,{selected:a.transform.name,options:n.map((function(e){return{name:e.name,value:e.name}})),onChange:function(e){var a=n.find((function(a){return a.name===e}));r({transform:a,paramValues:a.params.map((function(e){return e.defaultValue}))})}})})]}),a.transform.description&&Object(P.jsx)("div",{className:"block",style:{fontSize:"0.75rem"},children:a.transform.description})]}),Object(P.jsxs)("div",{className:"column columns",children:[s&&Object(P.jsx)("div",{className:"icon column is-clickable",onClick:s,children:Object(P.jsx)("i",{className:"fas fa-arrow-left","aria-hidden":"true"})}),o&&Object(P.jsx)("div",{className:"icon column is-clickable",onClick:o,children:Object(P.jsx)("i",{className:"fas fa-arrow-right","aria-hidden":"true"})}),Object(P.jsx)("div",{className:"icon column is-clickable",onClick:i,children:Object(P.jsx)("i",{className:"fas fa-trash","aria-hidden":"true"})})]})]})}),Object(P.jsx)("div",{className:"card-content",children:a.transform.params.map((function(e,n){var t=e.fn({value:a.paramValues[n],onChange:function(e){r(Object(c.a)(Object(c.a)({},a),{},{paramValues:a.paramValues.map((function(a,t){return t===n?e:a}))}))}});return Object(P.jsx)("div",{className:"block",children:t},e.name)}))})]})},Ie=function(e){var a=e.currentTransforms,n=e.possibleTransforms,t=e.onTransformsChange;return Object(P.jsxs)("div",{className:"box",children:[Object(P.jsx)("h3",{className:"title",children:"Image Transforms"}),Object(P.jsx)("div",{className:"block",children:Object(P.jsx)("button",{className:"button",onClick:function(){return t([].concat(Object(u.a)(a),[{transform:n[0],paramsValues:n[0].params.map((function(e){return e.defaultValue}))}]))},children:"New Transform"})}),Object(P.jsxs)("div",{className:"columns",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)"},children:[a.map((function(e,r){return Object(P.jsx)("div",{className:"column",children:Object(P.jsx)(Pe,{index:r,possibleTransforms:n,selectedTransform:{transform:e.transform,paramValues:e.paramsValues},onRemove:function(){return t(a.filter((function(e,a){return a!==r})))},onMoveLeft:r>0?function(){return t(a.map((function(e,n){return n===r-1?a[n+1]:r===n?a[r-1]:e})))}:void 0,onMoveRight:r<a.length-1?function(){return t(a.map((function(e,n){return n===r+1?a[n-1]:r===n?a[r+1]:e})))}:void 0,onSelect:function(e){return t(a.map((function(a,n){return r===n?{transform:e.transform,paramsValues:e.paramValues,computedImage:void 0}:{transform:a.transform,paramsValues:a.paramsValues,computedImage:void 0}})))}})})})),Object(P.jsx)("div",{className:"box",style:{display:"none"}})]})]})},Te=function(){var e=r.a.useState({dirty:!1,transforms:[],baseImage:void 0}),a=Object(o.a)(e,2),n=a[0],t=a[1];var i=!n.baseImage||0===n.transforms.length||!n.dirty||n.transforms.some((function(e){return e.transform.params.length>0&&e.paramsValues.every((function(e,a){return!1===e.valid}))}));return Object(P.jsx)("section",{children:Object(P.jsxs)("div",{className:"container",children:[Object(P.jsx)("h1",{className:"title",style:{paddingTop:"16px"},children:"Partymoji"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"box",children:[Object(P.jsx)("h3",{className:"title",children:"Source Image"}),Object(P.jsx)(Q,{name:"Choose a source image",currentImageUrl:n.baseImage,onChange:function(e){t(Object(c.a)(Object(c.a)({},n),{},{baseImage:e,dirty:!0}))}})]}),Object(P.jsx)(Ie,{currentTransforms:n.transforms,possibleTransforms:ye,onTransformsChange:function(e){return t(Object(c.a)(Object(c.a)({},n),{},{dirty:!0,transforms:e}))}}),Object(P.jsx)(Fe,{isDirty:n.dirty,baseImageUrl:n.baseImage,computeDisabled:i,transforms:n.transforms,onComputed:function(){return t(Object(c.a)(Object(c.a)({},n),{},{dirty:!1}))}}),false,Object(P.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(P.jsx)("img",{src:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",width:64,height:64,alt:"Github Link"})})]})]})})};s.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(Te,{})}),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.c356b07b.chunk.js.map