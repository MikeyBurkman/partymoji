(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{355:function(e,t){},357:function(e,t){},370:function(e,t){},381:function(e,t){},382:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(54),o=a.n(i),c=a(21),s=a.n(c),u=a(17),l=a(29),d=a(3),f=a(470),m=a(424),h=a(458),p=a(457),g=a(460),j=a(454),b=a(455),v=a(450),O=a(419),x=a(453),A=a(456),w=a(1),C=function(e){var t=e.mainEle,a=e.children,n=r.a.useState(!0),i=Object(d.a)(n,2),o=i[0],c=i[1];return Object(w.jsx)(O.a,{onClickAway:function(){return c(!0)},children:Object(w.jsxs)(x.a,{children:[Object(w.jsx)(j.a,{onClick:function(){return c(!o)},style:{textTransform:"none",color:"black"},children:Object(w.jsxs)(m.a,{direction:"row",spacing:4,children:[Object(w.jsx)("div",{children:t}),Object(w.jsx)(b.a,{children:o?"expand_less":"expand_more"})]})}),Object(w.jsx)(A.a,{in:!o,children:a})]})})},y=[{header:"Getting Started",data:[{header:"Start by importing an image from your device",data:["You may choose a png, jpg, or gif","The frames per second controls how fast the final gif will animate"]}]},{header:"Adding effects",data:[{header:"Effects are applied to an image to manipulate it",data:["Some may adjust the basic attributes of an image, such as size, or number of animation frames.","Others may apply animated effects, such as making the image spin, or cycle through colors."]},{header:"Animation effects require multiple animaion frames",data:['The "Adjust Image" effect has a "Frame Count" paramter.',"This controls how many frames are in the animation. Typically this is between 10 and 20","More frames will increase both the time to compute the image, and the final file size","Remember that some places (like Slack and Discord) have strict limits on the size of emojis."]},{header:"The order of effects matters",data:["The result of each effect is send to the next effect.","Because of this, the order of effects matter.","Experiment with moving effects around to see different effects.","For instance, applying a background color before rotating the image will have a very different effect than rotating before setting a background color"]}]},{header:"Creating Gifs",data:[{header:"Gifs will compute automatically",data:["Whenever you add or change an effect, it will compute a new gif next to that effect","The gif next to each effect shows what the results of that effect on the previous gif were"]},{header:"Exporting a GIF",data:['To export a gif, just right click on the gif next to an effect, and click "Save Image As..."',"Importing/exporting further down on the page is used if you want to share your Partymoji steps with someone else!"]}]}],M=function(){return Object(w.jsx)(C,{mainEle:Object(w.jsx)(p.a,{variant:"h5",children:"Help"}),children:Object(w.jsx)(m.a,{spacing:1,children:y.map((function(e,t){return Object(w.jsxs)(w.Fragment,{children:[t>0&&Object(w.jsx)(h.a,{}),Object(w.jsx)(p.a,{variant:"h6",children:e.header}),e.data.map((function(e){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.a,{variant:"body1",paddingLeft:"0.5rem",children:e.header}),e.data.map((function(e){return Object(w.jsxs)(p.a,{variant:"caption",paddingLeft:"1.0rem",children:["* ",e]})}))]})}))]})}))})})},k=function(e){var t=e.currentImageUrl,a=e.name,n=e.onChange;return Object(w.jsxs)(m.a,{spacing:4,children:[Object(w.jsxs)(j.a,{startIcon:Object(w.jsx)(b.a,{children:"image"}),sx:{maxWidth:"300px"},variant:"contained",component:"label",children:[a,Object(w.jsx)("input",{type:"file",hidden:!0,accept:"image/png,image/jpg,image/jpeg,image/gif",name:"source-png",onChange:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.from(null!==(a=t.target.files)&&void 0!==a?a:[]),!(i=r[0])){e.next=7;break}return e.next=5,S(i);case 5:o=e.sent,n(o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}),t&&Object(w.jsx)("img",{style:{maxWidth:"200px",maxHeight:"auto"},src:t,alt:"Source"})]})},S=function(e){return new Promise((function(t){var a=new FileReader;a.onload=function(){return t(a.result)},a.readAsDataURL(e)}))},V=a(16),P=a(469),F=a(137),I=a(30),B=a(425),E=function(e){var t=Object(d.a)(e,3),a=t[0],n=t[1],r=t[2],i=function(e){var t=e.toString(16).toUpperCase();return 2===t.length?t:"0"+t};return"#".concat(i(a)).concat(i(n)).concat(i(r))},T=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},N=function(e){return e[3]<64},Q=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},R=function(e,t,a){return Math.max(Math.min(e,a),t)},W=function(e){var t=Object(d.a)(e,4),a=t[0],n=t[1],r=t[2],i=t[3];return[R(a,0,255),R(n,0,255),R(r,0,255),R(i,0,255)]},H=[0,0,0,0],D=function(e,t,a){var n=Object(d.a)(e,2),r=n[0],i=n[1],o=Object(d.a)(a,2),c=o[0],s=o[1];if(c<0||c>=r||s<0||s>=i)return H;var u=q(e,c,s);return[t[u],t[u+1],t[u+2],t[u+3]]};function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new F.AssertionError({message:t,actual:e})}var Y=function(e,t){return{dimensions:e.dimensions,frames:e.frames.map((function(a,n){return t(a,n,e.frames.length)}))}},L=function(e,t){for(var a=Object(d.a)(e,2),n=a[0],r=a[1],i=new Uint8Array(n*r*4),o=0;o<r;o+=1)for(var c=0;c<n;c+=1){var s=W(t([c,o])),u=q(e,c,o);i[u]=s[0],i[u+1]=s[1],i[u+2]=s[2],i[u+3]=s[3]}return i},G=function(e){return function(t){var a=t.image,n=t.random,r=t.parameters;return Y(a,(function(t,i,o){return L(a.dimensions,(function(c){return e({image:a,dimensions:a.dimensions,random:n,parameters:r,coord:c,frameCount:o,frameIndex:i,animationProgress:i/o,getSrcPixel:function(e){return D(a.dimensions,t,e)}})}))}))}},X=function(e,t){return function(a){var n=a.image,r=a.random,i=a.parameters;return Y(n,(function(a,o,c){var s=o/c,u=e({image:n,dimensions:n.dimensions,random:r,parameters:i,frameCount:c,frameIndex:o,animationProgress:s});return L(n.dimensions,(function(e){return t({computed:u,image:n,dimensions:n.dimensions,random:r,parameters:i,coord:e,frameCount:c,frameIndex:o,animationProgress:s,getSrcPixel:function(e){return D(n.dimensions,a,e)}})}))}))}},q=function(e,t,a){return 4*(t+a*Object(d.a)(e,1)[0])},z=function(e){for(var t=e.image,a=e.newWidth,n=e.newHeight,r=Object(d.a)(t.dimensions,2),i=r[0]/a,o=r[1]/n,c=Z({dimensions:[a,n],frameCount:t.frames.length}),s=0;s<c.frames.length;s+=1)for(var u=0;u<n;u+=1)for(var l=0;l<a;l+=1){var f=Math.floor(l*i),m=Math.floor(u*o),h=K({image:t,frameIndex:s,coord:[f,m]});_({image:c,frameIndex:s,color:h,coord:[l,u]})}return c},J=function(e){for(var t=e.image,a=e.newWidth,n=e.newHeight,r=Object(d.a)(t.dimensions,2),i=r[0],o=r[1],c=Math.round((a-i)/2),s=Math.round((n-o)/2),u=Z({dimensions:[a,n],frameCount:t.frames.length}),l=0;l<u.frames.length;l+=1)for(var f=0;f<n;f+=1)for(var m=0;m<a;m+=1){var h=m>c&&m<a-c&&f>s&&f<n-s?K({image:t,frameIndex:l,coord:[m-c,f-s]}):H;_({image:u,frameIndex:l,coord:[m,f],color:h})}return u},Z=function(e){return{dimensions:e.dimensions,frames:Object(B.a)(0,e.frameCount).map((function(){return new Uint8Array(e.dimensions[0]*e.dimensions[1]*4)}))}},K=function(e){return D(e.image.dimensions,e.image.frames[e.frameIndex],e.coord)},_=function(e){var t=q(e.image.dimensions,e.coord[0],e.coord[1]),a=e.image.frames[e.frameIndex];a[t]=e.color[0],a[t+1]=e.color[1],a[t+2]=e.color[2],a[t+3]=e.color[3]},$=function(e,t,a){return(1-e/100)*t+e/100*a},ee=function(e,t,a){var n=Object(d.a)(e,4),r=n[0],i=n[1],o=n[2],c=n[3],s=I.rgb.hsl([r,i,o]),u=Object(d.a)(s,3),l=u[1],f=u[2],m=I.hsl.rgb([t,$(a,l,100),f]),h=Object(d.a)(m,3),p=h[0],g=h[1],j=h[2];return[$(a,r,p),$(a,i,g),$(a,o,j),c]},te=function(e,t){var a=Object(d.a)(e,4),n=a[0],r=a[1],i=a[2],o=a[3],c=I.rgb.hsl([n,r,i]),s=Object(d.a)(c,3),u=s[0],l=s[1],f=s[2],m=I.hsl.rgb([(u+t)%360,l,f]),h=Object(d.a)(m,3);return[h[0],h[1],h[2],o]},ae=function(e,t){var a=t[0]-e[0],n=t[1]-e[1];return(360+180*Math.atan2(n,a)/Math.PI)%360},ne=function(e){return[].concat(Object(V.a)(I.hsl.rgb([e,100,50])),[255])},re=function(e,t){var a=Object(d.a)(e,4),n=a[0],r=a[1],i=a[2],o=a[3],c=I.rgb.hsl(n,r,i),s=Object(d.a)(c,3),u=s[0],l=s[1],f=s[2],m=$(Math.abs(t),l,t>=0?100:0),h=I.hsl.rgb([u,m,f]),p=Object(d.a)(h,3);return[p[0],p[1],p[2],o]},ie=function(e,t){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],i=(e[0]+t[0])/2,o=(2+i/256)*a*a,c=(2+(255-i)/256)*n*n,s=4*r*r;return Math.sqrt(o+c+s)/765},oe=function(e,t){var a=e.frames;return{dimensions:e.dimensions,frames:Object(B.a)(0,t).map((function(e){var n=Math.floor(e/t*a.length);return a[n]}))}},ce=function(e,t,a){return e.map((function(e,n){return t===n?a(e):e}))},se=a(434),ue=a(437),le=a(464),de=function(e){var t;return{name:e.name,params:e.params,description:e.description,fn:e.fn,disabled:null!==(t=e.disabled)&&void 0!==t&&t}},fe=a(448),me=a(440),he=a(461),pe=a(459),ge=function(e){var t=e.description;return t?Object(w.jsx)(pe.a,{title:t,children:Object(w.jsx)(b.a,{fontSize:"small",color:"action",children:"help"})}):null},je=function(e){var t=e.name,a=e.value,n=e.description,i=e.parse,o=e.onChange,c=r.a.useState(a.toString()),s=Object(d.a)(c,2),u=s[0],l=s[1],f=r.a.useState(""),h=Object(d.a)(f,2),g=h[0],j=h[1];return Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:n})]}),Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(me.a,{error:!!g,value:u,onBlur:function(){if(u!==a.toString()){var e=i(u);e.valid?(j(""),o(e.value)):j(e.reason)}},onChange:function(e){l(e.target.value)}}),g&&Object(w.jsx)(he.a,{children:g})]})]})},be=function(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){var a=e.min,n=e.max;return Object(w.jsx)(je,{name:e.name,description:e.description,parse:function(e){var t=parseInt(e,10);return isNaN(t)||t.toString()!==e?{valid:!1,reason:"Must be an integer"}:void 0!==a&&t<a?{valid:!1,reason:"Must be greater than or equal to ".concat(a)}:void 0!==n&&t>n?{valid:!1,reason:"Must be less than or equal to ".concat(n)}:{valid:!0,value:t}},onChange:t.onChange,value:t.value})}}},ve=a(446),Oe=function(e){var t=e.name,a=e.value,n=e.min,r=e.max,i=e.step,o=e.description,c=e.onChange;return Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:o})]}),Object(w.jsxs)(m.a,{direction:"row",spacing:2,sx:{paddingLeft:"8px",paddingRight:"8px"},children:[Object(w.jsx)(ve.a,{"aria-label":t,value:a,step:i,valueLabelDisplay:"off",getAriaValueText:function(e){return e.toString()},min:n,max:r,onChange:function(e,t){return c(t)}}),Object(w.jsx)(p.a,{variant:"body2",children:a})]})]})};function xe(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){return Object(w.jsx)(Oe,{name:e.name,value:t.value,onChange:t.onChange,min:e.min,max:e.max,step:e.step,description:e.description})}}}var Ae=de({name:"Adjust Image",description:"Leave a parameter at 0 if you want to not change it",params:[xe({name:"Number of Frames",description:"Set how many frames of animation there will be. Leave at 0 to not change the current frame count.",defaultValue:0,min:0,max:60}),be({name:"Width",description:"Leave at 0 to not change the width. If height is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),be({name:"Height",description:"Leave at 0 to not change the height. If width is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),xe({name:"Brightness",min:-100,max:100,step:5,defaultValue:0}),xe({name:"Contrast",min:-100,max:100,step:5,defaultValue:0}),xe({name:"Saturation",min:-100,max:100,step:5,defaultValue:0})],fn:function(e){var t=e.image,a=Object(d.a)(e.parameters,6),n=a[0],r=a[1],i=a[2],o=a[3],c=a[4],s=a[5],u=0!==n,l=Object(d.a)(t.dimensions,2),f=l[0],m=l[1],h=r>0||i>0,p=h&&0===r?Math.ceil(f/m*i):r,g=h&&0===i?Math.ceil(m/f*r):i,j=p*g>f*m,b=t;return u&&n<t.frames.length&&(b=oe(b,n)),h&&!j&&(b=z({image:b,newWidth:p,newHeight:g})),b=Y(b,(function(e){return L(b.dimensions,(function(t){var a=D(b.dimensions,e,t);return 0!==o&&(a=function(e,t){var a=t/100*128,n=Object(d.a)(e,4),r=n[0],i=n[1],o=n[2],c=n[3];return W([r+a,i+a,o+a,c])}(a,o)),0!==c&&(a=function(e,t){var a=t/100+1,n=Object(d.a)(e,4),r=n[0],i=n[1],o=n[2],c=n[3];return W([a*(r-128)+128,a*(i-128)+128,a*(o-128)+128,c])}(a,c)),0!==s&&(a=re(a,s)),a}))})),h&&j&&(b=z({image:b,newWidth:p,newHeight:g})),u&&n>t.frames.length&&(b=oe(b,n)),b}}),we=a(105),Ce=function(e){var t=e.color;return Object(w.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:E(t)}})},ye=function(e){var t=e.name,a=e.value,n=e.description,r=e.onChange;return Object(w.jsx)(C,{mainEle:Object(w.jsxs)(m.a,{direction:"row",spacing:4,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:n}),a&&Object(w.jsx)(Ce,{color:a})]}),children:Object(w.jsx)(we.b,{disableAlpha:!0,presetColors:[],color:E(a),onChangeComplete:function(e){r(T(e.hex))}})})};function Me(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){return Object(w.jsx)(ye,{name:e.name,value:t.value,onChange:t.onChange,description:e.description})}}}var ke=de({name:"Background Color",description:"Change all transparent pixles to the given color",params:[Me({name:"Color",defaultValue:T("#000000")})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=Object(d.a)(e.parameters,1)[0],r=a(t);return N(r)?n:r}))}),Se=a(189),Ve=a.n(Se),Pe=a(190),Fe=a.n(Pe),Ie=a(100),Be=a.n(Ie),Ee=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r,i,o,c,u,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.image,n=t.effectInput,r=t.randomSeed,i=t.fps,o=Be()(r),c=Zt(n.effectName),u=c.fn({image:a,parameters:n.params,random:o}),l=Re(u,o),e.next=7,Ne({image:Te(u,l),transparentColor:l,fps:i});case 7:return d=e.sent,e.abrupt("return",{gif:d,image:u});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e,t){var a=e.frames.map((function(e){for(var a=new Uint8Array(e.length),n=0;n<e.length;n+=4)t&&e[n+3]<128?(a[n]=t[0],a[n+1]=t[1],a[n+2]=t[2],a[n+3]=0):(a[n]=e[n],a[n+1]=e[n+1],a[n+2]=e[n+2],a[n+3]=0);return a}));return{dimensions:e.dimensions,frames:a}},Ne=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.image,n=t.transparentColor,r=t.fps,e.abrupt("return",new Promise((function(e){var t=Object(d.a)(a.dimensions,2),i=t[0],o=t[1],c=new Fe.a(i,o);if(c.setFrameRate(r),c.setRepeat(0),c.writeHeader(),n){var s=E(n).slice(1);c.setTransparent("0x".concat(s))}var u=[];c.on("data",(function(e){u.push(e)})),c.on("end",(function(){var t=URL.createObjectURL(new Blob(u,{type:"image/gif"}));e(t)})),a.frames.forEach((function(e){c.addFrame(e)})),c.finish()})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(e){return new Promise((function(t,a){return Ve()(e,(function(e,n){if(e)return a(e);if(3===n.shape.length){var r=Object(d.a)(n.shape,2),i=r[0],o=r[1];return t({frames:[Uint8Array.from(n.data)],dimensions:[i,o]})}for(var c=Object(d.a)(n.shape,3),s=c[0],u=c[1],l=c[2],f=u*l*4,m=[],h=0;h<s;h+=1)m.push(n.data.subarray(h*f,(h+1)*f));return t({frames:m,dimensions:[u,l]})}))}))},Re=function(e,t){var a=!1,n=new Set,r=Object(d.a)(e.dimensions,2),i=r[0],o=r[1],c=E([0,255,0,255]);return e.frames.forEach((function(r){for(var s=0;s<o;s+=1)for(var u=0;u<i;u+=1){var l=D(e.dimensions,r,[u,s]);if(N(l))a=!0;else{var d=E(l);n.add(d),d===c&&(c=We(t,n))}}})),a?T(c):void 0},We=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=E(Q(t));return n>2e3?r:a.has(r)?e(t,a,n+1):r},He={dataUrl:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAAQABAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAgEBAgICAgICAwICAgIDBAMDAwMDBAUEBAQEBAQFBQUFBQUFBQYGBgYGBgcHBwcHCAgICAgICAgICP/bAEMBAQEBAgICAwICAwgFBAUICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICP/dAAQAAf/aAAwDAQACEQMRAD8A/wA/+iiigD//2Q==",image:{dimensions:[1,1],frames:[new Uint8Array([0,0,0,255])]}};var De=a(452),Ue=a(462),Ye=a(443),Le=function(e){var t=e.name,a=e.options,n=e.value,r=e.description,i=e.onChange;return Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:r})]}),Object(w.jsx)(fe.a,{component:"fieldset",children:Object(w.jsx)(De.a,{"aria-label":t,defaultValue:n,onChange:function(e){return i(e.target.value)},children:a.map((function(e){return Object(w.jsx)(Ue.a,{value:e.value,control:Object(w.jsx)(Ye.a,{}),label:e.name},e.value)}))})})]})};function Ge(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){return Object(w.jsx)(Le,{name:e.name,value:t.value,options:e.options,description:e.description,onChange:function(e){return t.onChange(e)}})}}}var Xe=de({name:"Background Image",description:"Select another image to be used as a background or foreground",params:[function(e){var t=e.name;return{name:t,defaultValue:He,fn:function(e){return Object(w.jsx)(k,{currentImageUrl:e.value.dataUrl,name:t,width:64,height:64,onChange:function(){var t=Object(l.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qe(a);case 2:n=t.sent,e.onChange({dataUrl:a,image:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}}}({name:"Image"}),Ge({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]})],fn:X((function(e){var t=e.image.dimensions,a=Object(d.a)(e.parameters,2),n=a[0],r=a[1];return{otherImage:J({image:n.image,newWidth:t[0],newHeight:t[1]}),type:r}}),(function(e){var t=e.coord,a=e.animationProgress,n=e.computed,r=n.otherImage,i=n.type,o=e.getSrcPixel,c=Math.floor(a*r.frames.length),s=K({image:r,frameIndex:c,coord:t}),u=o(t);return"background"===i?N(u)?s:u:N(s)?u:s}))}),qe=de({name:"Bounce",description:"Make the image bounce up and down",params:[be({name:"Bounce Speed",description:"Positive number",defaultValue:5,min:0})],fn:X((function(e){var t=e.animationProgress,a=Object(d.a)(e.parameters,1)[0];return{yOffset:Math.round(a*Math.sin(2*t*Math.PI))}}),(function(e){var t=e.computed.yOffset,a=Object(d.a)(e.coord,2),n=a[0],r=a[1];return(0,e.getSrcPixel)([n,r+t])}))}),ze=a(433),Je=a(435),Ze=a(436),Ke=de({name:"Bounce Animation",description:"When the animation finishes, it will be replayed in reverse",params:[],fn:function(e){var t=e.image;return{dimensions:t.dimensions,frames:Object(ze.a)(t.frames,Object(se.a)(t.frames,Object(Je.a)(1),Object(Ze.a)(),Object(Je.a)(1)))}}}),_e=de({name:"Circle",description:"Make the image move in a circular pattern",params:[be({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:X((function(e){var t=e.animationProgress,a=Object(d.a)(e.parameters,1)[0];return{xOffset:Math.round(a*Math.sin(-2*Math.PI*t)),yOffset:Math.round(a*Math.cos(-2*Math.PI*t))}}),(function(e){var t=e.computed,a=t.xOffset,n=t.yOffset,r=Object(d.a)(e.coord,2),i=r[0],o=r[1];return(0,e.getSrcPixel)([i+a,o+n])}))}),$e=a(463),et=function(e){var t=e.name,a=e.newParamText,n=e.createNewParam,i=e.value,o=e.description,c=e.onChange,s=r.a.useState(i.map((function(e){return{param:n(),pValue:e}}))),u=Object(d.a)(s,2),l=u[0],f=u[1];return Object(w.jsx)(g.a,{children:Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:o})]}),l.map((function(e,a){var n=e.param,r=e.pValue,i=n.fn({value:r,onChange:function(e){var t=l.map((function(t,r){return a===r?{param:n,pValue:e}:t}));f(t),c(t.map((function(e){return e.pValue})))}});return Object(w.jsxs)(m.a,{direction:"row",children:[Object(w.jsx)($e.a,{onClick:function(){var e=l.filter((function(e,t){return t!==a}));f(e),c(e.map((function(e){return e.pValue})))},style:{visibility:0===a?"hidden":void 0},children:Object(w.jsx)(b.a,{children:"delete"})}),i]},"".concat(t,"-").concat(a))})),Object(w.jsx)(j.a,{variant:"contained",onClick:function(){var e=n(),t=[].concat(Object(V.a)(l),[{param:e,pValue:e.defaultValue}]);f(t),c(t.map((function(e){return e.pValue})))},children:a})]})})};function tt(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){return Object(w.jsx)(et,{name:e.name,newParamText:e.newParamText,value:t.value,createNewParam:e.createNewParam,description:e.description,onChange:t.onChange})}}}var at=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(T),nt=de({name:"Colors",description:"Make the image flash different colors",params:[tt({name:"Colors",newParamText:"New Color",defaultValue:at,createNewParam:function(){return Me({name:"Color",defaultValue:at[0]})}})],fn:X((function(e){var t=e.animationProgress,a=Object(d.a)(e.parameters,1)[0];return{chosenColor:a[Math.floor(t*a.length)]}}),(function(e){var t=e.computed.chosenColor,a=e.coord,n=(0,e.getSrcPixel)(a);if(N(n))return[0,0,0,0];var r=function(e){var t=Object(d.a)(e,3),a=t[0],n=t[1],r=t[2];return Math.round((a+n+r)/3)}(n);return[r*t[0]/255,r*t[1]/255,r*t[2]/255,255]}))}),rt=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(T),it=de({name:"Colors Background",description:"Transparent pixels will flash different colors",params:[tt({name:"Colors",newParamText:"New Color",defaultValue:rt,createNewParam:function(){return Me({name:"Color",defaultValue:rt[0]})}})],fn:X((function(e){var t=e.animationProgress,a=Object(d.a)(e.parameters,1)[0];return{bgColor:a[Math.floor(t*a.length)]}}),(function(e){var t=e.computed.bgColor,a=e.coord,n=(0,e.getSrcPixel)(a);return N(n)?t:n}))}),ot=function(e){var t=e.name,a=e.value,n=e.description,i=e.parse,o=e.onChange,c=r.a.useState(a.toString()),s=Object(d.a)(c,2),u=s[0],l=s[1],f=r.a.useState(""),h=Object(d.a)(f,2),g=h[0],j=h[1];return Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:n})]}),Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(me.a,{error:!!g,value:u,onBlur:function(){if(u!==a.toString()){var e=i(u);e.valid?(j(""),o(e.value)):j(e.reason)}},onChange:function(e){l(e.target.value)}}),g&&Object(w.jsx)(he.a,{children:g})]})]})},ct=function(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){var a=e.min,n=e.max;return Object(w.jsx)(ot,{name:e.name,description:e.description,parse:function(e){var t=parseFloat(e);return isNaN(t)||t.toString()!==e?{valid:!1,reason:"Must be a number"}:void 0!==a&&t<a?{valid:!1,reason:"Must be greater than or equal to ".concat(a)}:void 0!==n&&t>n?{valid:!1,reason:"Must be less than or equal to ".concat(n)}:{valid:!0,value:t}},onChange:t.onChange,value:t.value})}}},st=de({name:"Double Vision",description:"See the image in double",params:[ct({name:"Amplitude",defaultValue:10,min:0})],fn:X((function(e){var t=e.animationProgress;return{xOffset:Object(d.a)(e.parameters,1)[0]*Math.sin(-2*Math.PI*t)}}),(function(e){var t=e.computed.xOffset,a=Object(d.a)(e.coord,2),n=a[0],r=a[1],i=n%2===0?-1:1;return(0,e.getSrcPixel)([n+Math.round(i*t),r])}))}),ut=de({name:"Expand",description:"Make the image grow and shrink",params:[be({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:X((function(e){var t=Object(d.a)(e.dimensions,2),a=t[0],n=t[1],r=e.animationProgress,i=Object(d.a)(e.parameters,1)[0];return{dist:Math.cos(2*r*Math.PI)*i,centerX:a/2,centerY:n/2}}),(function(e){var t=e.computed,a=t.centerX,n=t.centerY,r=t.dist,i=Object(d.a)(e.dimensions,2),o=i[0],c=i[1],s=Object(d.a)(e.coord,2),u=s[0],l=s[1],f=(u-a)/o,m=(l-n)/c;return(0,e.getSrcPixel)([u-Math.floor(r*f),l-Math.round(r*m)])}))}),lt=de({disabled:!0,name:"Fill Transparent",description:"Makes transparent all pixels of similar color surrounding a point",params:[xe({name:"Tolerance",defaultValue:50,min:0,max:100})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=(Object(d.a)(e.parameters,1)[0],a([0,0]),a(t),Object(d.a)(t,2));n[0],n[1];return[0,0,0,0]}))}),dt=de({name:"Fisheye",description:"Make the image grow and shrink in a distorted fashion",params:[be({name:"Radius",description:"Positive Number",defaultValue:10,min:0})],fn:X((function(e){var t=e.animationProgress,a=Object(d.a)(e.dimensions,2),n=a[0],r=a[1];return{dist:(t<.5?t:1-t)*Object(d.a)(e.parameters,1)[0],centerX:n/2,centerY:r/2}}),(function(e){var t=e.computed,a=t.dist,n=t.centerX,r=t.centerY,i=Object(d.a)(e.coord,2),o=i[0],c=i[1],s=e.getSrcPixel,u=Math.atan2(r-c,n-o);return s([o+Math.round(a*Math.cos(u)),c+Math.round(a*Math.sin(u))])}))}),ft=de({name:"Grid",description:"Removes the color from all pixels not aligned with a grid",params:[xe({name:"Grid Size",description:"The length of each square in the grid",defaultValue:24,min:2,max:64,step:2}),xe({name:"Grid Angle",defaultValue:45,min:0,max:90})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=Object(d.a)(e.parameters,2),r=n[0],i=n[1],o=a(t),c=Object(d.a)(t,2),s=c[0],u=c[1],l=!1;if(i%90===0)l=s%r===0||u%r===0;else{var f=(64-r)/64*.1+.03,m=function(e){var t=1/r*(u-Math.tan(mt(e))*s);return Math.abs(Math.round(t)-t)<f};l=m(i)||m(i+90)}return l?o:re(o,-100)}))}),mt=function(e){return e*Math.PI/180},ht=function(e){var t=e.name,a=e.value,n=e.description,r=e.onChange,i=void 0===a?void 0:E([].concat(Object(V.a)(I.hsl.rgb([a,255,255])),[255]));return Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:n})]}),Object(w.jsx)(we.a,{color:i,onChangeComplete:function(e){var t=e.hsl;return r(t.h)}})]})};function pt(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){return Object(w.jsx)(ht,{name:e.name,value:t.value,onChange:t.onChange})}}}var gt,jt=de({name:"Hue Change",description:"Change the hue of the image to some other color",params:[pt({name:"Hue",defaultValue:180}),xe({name:"Amount",description:"How strong the effect is.",min:0,max:100,step:5,defaultValue:75})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=Object(d.a)(e.parameters,2),r=n[0],i=n[1];return ee(a(t),r,i)}))}),bt=de({name:"Hue Shift",description:"Shift the hue of each pixel in the image by some amount",params:[xe({name:"Amount",description:"How much to shift the hue of each pixel",min:0,max:100,step:5,defaultValue:50})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=Object(d.a)(e.parameters,1)[0];return te(a(t),n/100*360)}))}),vt=de({name:"Hue Shift Pulse",description:"Shift the hue to the given value in a pulsating manner",params:[pt({name:"Hue",defaultValue:180})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=e.frameCount,r=e.frameIndex,i=Object(d.a)(e.parameters,1)[0],o=a(t);if(N(o))return o;var c=Math.abs(Math.sin(Math.PI*(r/n)));return ee(o,i,360*c)}))}),Ot=de({name:"Hue Wave",description:"Shifts the hue of pixels in the image in a wave motion",params:[xe({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the hue shift effect should be"}),xe({name:"Period",defaultValue:1,min:1,max:20,description:"How many waves you want"})],fn:X((function(e){return{shift:-1*e.animationProgress*2*Math.PI}}),(function(e){var t=e.computed.shift,a=e.coord,n=Object(d.a)(e.dimensions,2)[1],r=Object(d.a)(e.parameters,2),i=r[0],o=r[1],c=e.getSrcPixel,s=Object(d.a)(a,2),u=(s[0],s[1]),l=Math.round(i*Math.sin(u/n*o*Math.PI+t));return te(c(a),l/100*360)}))}),xt=function(e){var t=e.name,a=e.value,n=e.description,i=e.onChange,o=r.a.useState(a),c=Object(d.a)(o,2),s=c[0],u=c[1];return Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",children:t}),Object(w.jsx)(ge,{description:n})]}),Object(w.jsx)(fe.a,{children:Object(w.jsx)(me.a,{value:s,onChange:function(e){return u(e.target.value)},onBlur:function(){s.length>0&&i(s)}})})]})},At=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],wt=de({name:"Lightning",description:"Make the background look like a thunderstorm",params:[(gt={name:"Random Seed",description:"Can be anything. Will determine the randomness of the lightning.",defaultValue:"lightning"},{name:gt.name,defaultValue:gt.defaultValue,fn:function(e){return Object(w.jsx)(xt,{name:gt.name,description:gt.description,onChange:e.onChange,value:e.value})}})],fn:function(e){var t=e.image,a=Object(d.a)(e.parameters,1)[0],n=Be()(a);return Y(t,(function(e){var a=n(),r=a<.9?0:a<.95?1:a<.98?2:3;return L(t.dimensions,(function(a){var n=D(t.dimensions,e,a);if(N(n))return At[r];if(r>0){var i=1.02*r;return[n[0]*i,n[1]*i,n[2]*i,n[3]]}return n}))}))}}),Ct=de({name:"Nuke",description:"Oh no...",params:[],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=255*e.animationProgress,r=a(t),i=Object(d.a)(r,4),o=i[0],c=i[1],s=i[2],u=i[3],l=I.rgb.hsl(o,c,s),f=Object(d.a)(l,3),m=f[0],h=f[1],p=f[2],g=I.hsl.rgb([m,h,p>n?p:0]),j=Object(d.a)(g,3);return[j[0],j[1],j[2],p>n?u:0]}))}),yt=de({name:"Party",description:"Shift the hue of the image over the course of the animation",params:[Ge({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),xe({name:"Amount",description:"How strong the effect is",min:0,max:100,step:5,defaultValue:50}),xe({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=e.animationProgress,r=Object(d.a)(e.parameters,3),i=r[0],o=r[1],c=r[2],s=a(t),u=N(s),l=n*c*360%360;return u&&"background"===i?ne(l):u||"foreground"!==i?s:ee(s,l,o)}))}),Mt=de({name:"Party Two",description:"Shift the hue of each individual pixel over the course of the animation",params:[],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=e.animationProgress,r=a(t);return N(r)?r:te(r,360*n)}))}),kt=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(T),St=de({name:"Pinwheel",description:"Create a pinwheel of colors",params:[xe({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),tt({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:kt,createNewParam:function(){return Me({name:"Color",defaultValue:kt[0]})}}),be({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),be({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:X((function(e){for(var t=Object(d.a)(e.parameters,4),a=t[0],n=t[1],r=(t[2],t[3],n.length*a),i=Math.round(360/r),o=n.length;"00"!==(r/o).toFixed(2).slice(-2);)o-=1;return{colorsLength:o,ribbonArcDegrees:i}}),(function(e){var t=e.computed,a=t.ribbonArcDegrees,n=t.colorsLength,r=e.coord,i=e.dimensions,o=e.animationProgress,c=e.getSrcPixel,s=Object(d.a)(e.parameters,4),u=(s[0],s[1]),l=s[2],f=s[3],m=c(r);if(!N(m))return m;var h=[i[0]/2+l,i[1]/2-f],p=ae(r,h),g=Math.floor(p/a)%n;return u[(Math.floor(o*n)+g)%n]}))}),Vt=de({name:"Pinwheel Party",description:"Create a pinwheel of party colors",params:[xe({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Ge({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),xe({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),be({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),be({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:X((function(e){var t=Object(d.a)(e.dimensions,2),a=t[0],n=t[1],r=Object(d.a)(e.parameters,5);r[0],r[1],r[2];return{center:[a/2+r[3],n/2-r[4]]}}),(function(e){var t=e.computed.center,a=e.coord,n=e.animationProgress,r=e.getSrcPixel,i=Object(d.a)(e.parameters,3),o=i[0],c=i[1],s=i[2],u=r(a),l=N(u);if("foreground"===c?l:!l)return u;var f=(ae(a,t)*o+360*n)%360;return l?ne(f):ee(u,f,s)}))}),Pt=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(T),Ft=de({name:"Radiance",description:"Radiate colors out in rings",params:[xe({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),tt({name:"Colors",newParamText:"New Color",description:"The colors that make up each ring",defaultValue:Pt,createNewParam:function(){return Me({name:"Color",defaultValue:Pt[0]})}}),be({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),be({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:X((function(e){var t=Object(d.a)(e.dimensions,2),a=t[0],n=t[1],r=Object(d.a)(e.parameters,2),i=r[0],o=r[1];return{colorList:Object(B.a)(0,i).flatMap((function(){return o})),centerX:a/2,centerY:n/2}}),(function(e){var t=e.computed,a=t.centerX,n=t.centerY,r=t.colorList,i=Object(d.a)(e.dimensions,2),o=i[0],c=i[1],s=e.coord,u=e.animationProgress,l=Object(d.a)(e.parameters,4),f=(l[0],l[1],l[2]),m=l[3],h=(0,e.getSrcPixel)(s);if(!N(h))return h;var p=Object(d.a)(s,2),g=p[0]-a-f,j=p[1]-n+m,b=Math.sqrt(o/2*(o/2)+c/2*(c/2)),v=Math.sqrt(j*j+g*g),O=Math.floor((1-v/b)*r.length)%r.length;return r[(Math.floor(u*r.length)+O)%r.length]}))}),It=de({name:"Radiance Party",description:"Radiate party colors out in rings",params:[xe({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Ge({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),xe({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),be({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),be({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:X((function(e){var t=Object(d.a)(e.dimensions,2),a=t[0],n=t[1];return{centerX:a/2,centerY:n/2,maxDist:Math.sqrt(a/2*(a/2)+n/2*(n/2))}}),(function(e){var t=e.computed,a=t.centerX,n=t.centerY,r=t.maxDist,i=e.coord,o=e.animationProgress,c=Object(d.a)(e.parameters,5),s=c[0],u=c[1],l=c[2],f=c[3],m=c[4],h=(0,e.getSrcPixel)(i),p=N(h);if("foreground"===u?p:!p)return h;var g=Object(d.a)(i,2),j=g[0]-a-f,b=g[1]-n+m,v=(360*(1-Math.sqrt(b*b+j*j)/r)*s+360*o)%360;return p?ne(v):ee(h,v,l)}))}),Bt=a(438),Et=de({name:"Reduce Color Palette",description:"Reduce the number of unique colors in the gif, to reduce the file size.This can be a slow operation depending on the number of final colors",params:[xe({name:"Percent Reduction",description:"0% will have no effect, 100% will result in just one unique color in the result",defaultValue:70,min:0,max:100,step:5})],fn:X((function(e){var t=e.image,a=Object(d.a)(e.parameters,1)[0],n=new Set;Y(t,(function(e){return L(t.dimensions,(function(a){var r=D(t.dimensions,e,a);return N(r)||n.add(E(r)),H}))}));for(var r=Array.from(n).map(T),i=Math.max(Math.floor(r.length*(100-a)/100),1),o=r.map((function(e){return{color:e,numClosestColors:0}})),c=1;c<r.length;c+=1){for(var s=0,u=ie(r[c],r[s]),l=0;l<r.length;l+=1)if(l!==c){var f=ie(r[l],r[c]);f<u&&(s=l,u=f)}o[s].numClosestColors+=1}return{colorPalette:Object(ue.a)(o,[function(e){return e.numClosestColors},"desc"]).slice(0,i).map((function(e){return e.color}))}}),(function(e){var t=e.coord,a=e.getSrcPixel,n=e.computed.colorPalette,r=a(t);return N(r)?r:Object(Bt.a)(n,(function(e){return ie(e,r)}))}))}),Tt=de({name:"Repeat Animation",description:"Repeats the current animation some number of times",params:[xe({name:"Number of Repeats",defaultValue:1,min:1,max:50})],fn:function(e){var t=e.image,a=Object(d.a)(e.parameters,1)[0];return{dimensions:t.dimensions,frames:Object(B.a)(0,t.frames.length*(a+1)).map((function(e){return t.frames[e%t.frames.length]}))}}}),Nt=de({name:"Resize Image",description:"Change the dimensions of the image. If bigger than original, the extra space will be transparent. If smaller, the image will be cropped. ",params:[be({name:"Width",description:"Set to 0 when height is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0}),be({name:"Height",description:"Set to 0 when width is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0})],fn:function(e){var t=e.image,a=Object(d.a)(e.parameters,2),n=a[0],r=a[1],i=Object(d.a)(t.dimensions,2),o=i[0],c=i[1],s=0===n?Math.ceil(o/c*r):n,u=0===r?Math.ceil(c/o*n):r;return J({image:t,newWidth:s,newHeight:u})}}),Qt=de({name:"Reverse Animation",description:"Reverses the animation",params:[],fn:function(e){var t=e.image;return{dimensions:t.dimensions,frames:Object(Ze.a)(t.frames)}}}),Rt=de({name:"Ripple",description:"Create a ripple effect, like water",params:[xe({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the ripple effect should be"}),xe({name:"Period",defaultValue:1,min:1,max:20,description:"How many ripples you want"})],fn:X((function(e){return{shift:2*e.animationProgress*Math.PI}}),(function(e){var t=e.computed.shift,a=Object(d.a)(e.coord,2),n=a[0],r=a[1],i=Object(d.a)(e.dimensions,2)[1],o=Object(d.a)(e.parameters,2),c=o[0],s=o[1];return(0,e.getSrcPixel)([n+Math.round(c*Math.sin(r/i*s*Math.PI+t)),r])}))}),Wt=de({name:"Rotate",description:"Make the image rotate about the center point",params:[Ge({name:"Direction",defaultValue:"clockwise",options:[{name:"Clockwise",value:"clockwise"},{name:"Counter-Clockwise",value:"counter"}]})],fn:X((function(e){var t=e.animationProgress*("counter"===Object(d.a)(e.parameters,1)[0]?1:-1);return{cos:Math.cos(2*Math.PI*t),sin:Math.sin(2*Math.PI*t)}}),(function(e){var t=Object(d.a)(e.dimensions,2),a=t[0],n=t[1],r=Object(d.a)(e.coord,2),i=r[0],o=r[1],c=e.computed,s=c.cos,u=c.sin,l=a/2,f=n/2,m=i-l,h=o-f;return(0,e.getSrcPixel)([Math.round(l+m*s-h*u),Math.round(f+h*s+m*u)])}))}),Ht=de({name:"Roxbury",description:"Baby, don't hurt me",params:[],fn:X((function(e){var t=Object(d.a)(e.dimensions,2),a=t[0],n=t[1],r=e.animationProgress,i=Math.floor(4*r),o=4*(r-i/4),c=Math.PI/2*.2,s=0===i?0:1===i?o*c:2===i?c:(1-o)*c;return{angle:s,cos:Math.cos(1.35*-s),sin:Math.sin(1.35*-s),rotatePointX:.25*a,rotatePointY:.7*n}}),(function(e){var t=e.computed,a=t.angle,n=t.cos,r=t.sin,i=t.rotatePointX,o=t.rotatePointY,c=Object(d.a)(e.coord,2),s=c[0],u=c[1],l=e.getSrcPixel,f=Math.floor(s-i+8*Math.sin(a)),m=Math.floor(u-o+8*Math.cos(a));return l([Math.round(i+f*n-m*r),Math.round(o+m*n+f*r)])}))}),Dt=de({name:"Shake",description:"Make the image shake back and forth",params:[ct({name:"Amplitude",defaultValue:10,min:0})],fn:X((function(e){var t=e.animationProgress,a=Object(d.a)(e.parameters,1)[0];return{xOffset:Math.round(a*Math.cos(2*t*Math.PI))}}),(function(e){var t=e.computed.xOffset,a=Object(d.a)(e.coord,2),n=a[0],r=a[1];return(0,e.getSrcPixel)([n+t,r])}))}),Ut=de({name:"Slow Animation",description:"Attempts to slow the animation by adding intermediate frames",params:[Ge({name:"Interpolation Type",options:[{name:"Basic",value:"basic"},{name:"Smooth",value:"smooth"}],defaultValue:"basic",description:"With basic interpolation, frames are simply duplicated. With smooth interpolation, intermediate frames are the average of their surrounding frames."})],fn:function(e){var t=e.image,a=Object(d.a)(e.parameters,1)[0];return{dimensions:t.dimensions,frames:Object(B.a)(0,2*t.frames.length-1).map((function(e){if(e%2===0)return t.frames[e/2];var n=(e-1)/2;return"basic"===a?t.frames[n]:L(t.dimensions,(function(e){var a=D(t.dimensions,t.frames[n],e),r=Object(d.a)(a,4),i=r[0],o=r[1],c=r[2],s=r[3],u=D(t.dimensions,t.frames[n+1],e),l=Object(d.a)(u,4);return[(i+l[0])/2,(o+l[1])/2,(c+l[2])/2,(s+l[3])/2]}))}))}}}),Yt=de({disabled:!0,name:"Spin",description:"Make the image spin in a 3D-like way",params:[],fn:G((function(e){var t=e.image,a=Object(d.a)(e.coord,2),n=a[0],r=a[1],i=e.frameCount,o=e.frameIndex,c=e.getSrcPixel,s=t.dimensions[0]/2,u=o/i,l=2*Math.PI*u;return c([Math.round(s+n*Math.cos(l)),r])}))}),Lt=de({name:"Static",description:"Adds random static to the image",params:[Ge({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),xe({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=Object(d.a)(e.parameters,2),r=n[0],i=n[1],o=e.random,c=a(t),s=N(c);if("foreground"===r?s:!s)return c;if(s&&"background"===r){var u=Math.ceil(100*o())<i,l=Math.ceil(255*o());return u?[l,l,l,255]:c}var f=Math.ceil(100*o())<i,m=Math.ceil(255*o());return f?[m,m,m,c[3]]:c}))}),Gt=a(447),Xt=function(e){var t=e.name,a=e.value,n=e.description,r=e.onChange;return Object(w.jsx)(m.a,{spacing:1,children:Object(w.jsxs)(m.a,{direction:"row",spacing:1,children:[Object(w.jsx)(p.a,{variant:"body2",paddingTop:"0.5rem",children:t}),Object(w.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(w.jsx)(ge,{description:n})}),Object(w.jsx)(Gt.a,{"aria-label":t,checked:a,onChange:function(e,t){return r(t)}})]})})};var qt=de({name:"Transparency",description:"Set certain pixels to be transparent",params:[function(e){return{name:e.name,defaultValue:e.defaultValue,fn:function(t){return Object(w.jsx)(Xt,{name:e.name,value:t.value,onChange:t.onChange,description:e.description})}}}({name:"Matches are Transparent",description:"If checked, then pixels matching this color will be made transparent. If not checked, non-matching pixels are transparent.",defaultValue:!0}),Me({name:"Color",defaultValue:T("#000000")}),xe({name:"Tolerance",description:'A higher number will mean colors that are "close" to the chosen color will be transparent. (0 - 100)',defaultValue:10,min:0,max:100,step:2})],fn:G((function(e){var t=e.coord,a=e.getSrcPixel,n=Object(d.a)(e.parameters,3),r=n[0],i=n[1],o=n[2],c=a(t),s=100*ie(c,i)<=o;return(r?s:!s)?[c[0],c[1],c[2],0]:c}))}),zt=de({name:"Transpose",description:"Move the image left or right, up or down",params:[be({name:"X",defaultValue:0}),be({name:"Y",defaultValue:0})],fn:G((function(e){var t=Object(d.a)(e.coord,2),a=t[0],n=t[1],r=e.getSrcPixel,i=Object(d.a)(e.parameters,2);return r([a+i[0],n+i[1]])}))}),Jt=Object(se.a)([Ae,ke,Xe,qe,Ke,_e,nt,it,st,ut,lt,dt,ft,jt,bt,vt,Ot,wt,Ct,yt,Mt,St,Vt,Ft,It,Et,Tt,Nt,Qt,Rt,Wt,Ht,Dt,Ut,Yt,Lt,qt,zt],Object(ue.a)((function(e){return e.name})),Object(le.a)((function(e){return e.disabled}))),Zt=function(e){var t=Jt.find((function(t){return t.name===e}));return U(t,"Could not find matching effect: ".concat(e)),t},Kt=a(442),_t=a(465),$t=a(466),ea=a(467),ta=a(468),aa=function(e){var t=e.selectedEffect,a=e.possibleEffect,n=e.index,i=e.onSelect,o=e.onRemove,c=e.onMoveBefore,s=e.onMoveAfter,l=r.a.useState(!1),f=Object(d.a)(l,2),v=f[0],O=f[1],x=r.a.useState(Object(V.a)(t.paramValues)),A=Object(d.a)(x,2),C=A[0],y=A[1],M=r.a.useState(!1),k=Object(d.a)(M,2),S=k[0],P=k[1],F=function(e){var a=e.save;O(!1),a&&S?i(Object(u.a)(Object(u.a)({},t),{},{paramValues:C})):y(Object(V.a)(t.paramValues)),P(!1)};return Object(w.jsx)(g.a,{style:{padding:8},elevation:3,sx:{width:300},children:Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsxs)(m.a,{direction:"row",spacing:2,children:[Object(w.jsx)(p.a,{variant:"subtitle1",children:n+1}),Object(w.jsx)(pe.a,{title:"Delete effect",children:Object(w.jsx)($e.a,{"aria-label":"delete",onClick:o,children:Object(w.jsx)(b.a,{children:"delete"})})}),Object(w.jsx)(pe.a,{title:"Move effect earlier",children:Object(w.jsx)($e.a,{"aria-label":"move-before",onClick:c,disabled:!c,children:Object(w.jsx)(b.a,{children:"arrow_upward"})})}),Object(w.jsx)(pe.a,{title:"Move effect later",children:Object(w.jsx)($e.a,{"aria-label":"move-after",onClick:s,disabled:!s,children:Object(w.jsx)(b.a,{children:"arrow_downward"})})})]}),Object(w.jsx)(m.a,{direction:"row",spacing:4,children:Object(w.jsx)(fe.a,{fullWidth:!0,children:Object(w.jsx)(Kt.a,{disableClearable:!0,value:t.effect.name,options:a.map((function(e){return e.name})),onChange:function(e,t){var n=a.find((function(e){return e.name===t}));i({effect:n,paramValues:n.params.map((function(e){return e.defaultValue}))})},renderInput:function(e){return Object(w.jsx)(me.a,Object(u.a)(Object(u.a)({},e),{},{label:"Effect"}))}})})}),t.effect.params.length>0?Object(w.jsx)(j.a,{variant:"contained",startIcon:Object(w.jsx)(b.a,{children:"edit"}),onClick:function(){return O(!v)},children:"Edit Parameters"}):Object(w.jsx)(j.a,{variant:"contained",disabled:!0,children:"(No Parameters Available)"}),Object(w.jsxs)(_t.a,{fullWidth:!0,maxWidth:"sm",open:v,children:[Object(w.jsxs)($t.a,{children:[t.effect.name," Parameters"]}),Object(w.jsx)(ea.a,{children:Object(w.jsxs)(m.a,{divider:Object(w.jsx)(h.a,{}),spacing:2,children:[t.effect.description&&Object(w.jsx)(p.a,{variant:"caption",children:t.effect.description}),t.effect.params.map((function(e,a){var n=e.fn({value:C[a],onChange:function(e){P(!0),y(C.map((function(t,n){return n===a?e:t})))}});return Object(w.jsx)(r.a.Fragment,{children:n},"".concat(t.effect.name,"-").concat(e.name))}))]})}),Object(w.jsxs)(ta.a,{children:[Object(w.jsx)(j.a,{variant:"outlined",autoFocus:!0,onClick:function(){F({save:!1})},children:"Cancel"}),Object(w.jsx)(j.a,{variant:"contained",autoFocus:!0,disabled:!S,onClick:function(){F({save:!0})},children:"Save and Close"})]})]})]})})},na=function(e){var t=e.currentEffect,a=e.possibleEffects,n=e.onEffectsChange;return Object(w.jsxs)(m.a,{spacing:4,children:[Object(w.jsx)(p.a,{variant:"h5",children:"Image Effects"}),t.map((function(e,r){return Object(w.jsxs)(m.a,{direction:"row",spacing:4,children:[Object(w.jsx)(aa,{index:r,possibleEffect:a,selectedEffect:{effect:Zt(e.effectName),paramValues:e.paramsValues},onRemove:function(){return n(t.filter((function(e,t){return t!==r})))},onMoveBefore:r>0?function(){return n(t.map((function(e,a){return a===r-1?t[a+1]:r===a?t[r-1]:e})))}:void 0,onMoveAfter:r<t.length-1?function(){return n(t.map((function(e,a){return a===r+1?t[a-1]:r===a?t[r+1]:e})))}:void 0,onSelect:function(e){return n(ce(t,r,(function(t){return Object(u.a)(Object(u.a)({},t),{},{effectName:e.effect.name,paramsValues:e.paramValues})})))}}),"done"===e.state.status&&Object(w.jsx)(m.a,{sx:{width:200},children:Object(w.jsx)("img",{src:e.state.image.gif,alt:"gif-".concat(e.effectName,"-").concat(r),style:{maxWidth:"300px",maxHeight:"auto"}})}),"computing"===e.state.status&&Object(w.jsx)(P.a,{size:100})]},function(e,t){return"".concat(e.effectName,"-").concat(t,"-").concat("done"===e.state.status?e.state.image.gif.substring(0,10):"pending")}(e,r))})),Object(w.jsx)(j.a,{fullWidth:!1,variant:"contained",startIcon:Object(w.jsx)(b.a,{children:"add"}),size:"large",onClick:function(){return n([].concat(Object(V.a)(t),[{effectName:a[0].name,paramsValues:a[0].params.map((function(e){return e.defaultValue})),state:{status:"init"}}]))},children:"New Effect"})]})},ra=a(444),ia=a(141),oa=function(e){var t=e.state,a=e.onImport,n=r.a.useState(),i=Object(d.a)(n,2),o=i[0],c=i[1],u=r.a.useState(!1),f=Object(d.a)(u,2),h=f[0],g=f[1],v=function(){g(!0),setTimeout((function(){return g(!1)}),3e3)};return Object(w.jsxs)(m.a,{spacing:3,children:[Object(w.jsx)(p.a,{variant:"h5",children:"Import/Export"}),Object(w.jsx)(j.a,{startIcon:Object(w.jsx)(b.a,{children:"file_upload"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){var e=ia.compressToBase64(JSON.stringify(t));navigator.clipboard.writeText(e),c("Copied to clipboard"),setTimeout((function(){return c(void 0)}),3e3)},children:"Export to clipboard"}),Object(w.jsx)(j.a,{startIcon:Object(w.jsx)(b.a,{children:"file_download"}),sx:{maxWidth:"300px"},variant:"contained",onClick:Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:if(t=e.sent){e.next=7;break}return v(),e.abrupt("return");case 7:if(n=JSON.parse(ia.decompressFromBase64(t)),Array.isArray(n.effects)){e.next=11;break}return v(),e.abrupt("return");case 11:a(n),g(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),v();case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),children:"Import from clipboard"}),o&&Object(w.jsx)(ra.a,{severity:"info",sx:{maxWidth:"300px"},children:o}),h&&Object(w.jsx)(ra.a,{severity:"error",sx:{maxWidth:"300px"},children:"Error importing from clipboard"})]})};function ca(){return new Worker(a.p+"static/js/effect.worker.03c6b417.worker.js")}var sa=function(e){return new Promise((function(t,a){var n=new ca;n.addEventListener("error",a),n.addEventListener("messageerror",a),n.onmessage=function(e){var a=e.data;"complete"===a.status&&t(a.result)},n.postMessage(e)}))},ua=window.ENV,la=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var n,r,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.effects.map((function(e){return{effectName:e.effectName,params:e.paramsValues}})),U(t.baseImage,"No source image, this button should be disabled!"),e.next=4,Qe(t.baseImage);case 4:r=e.sent,i="DEV"===ua?Ee:sa,o=0;case 7:if(!(o<n.length)){e.next=18;break}return c=Date.now(),e.next=11,i({randomSeed:t.baseImage,image:r,effectInput:n[o],fps:t.fps});case 11:u=e.sent,ga("send",{hitType:"timing",timingCategory:"computeStep",timingVar:n[o].effectName,timingValue:Math.ceil((Date.now()-c)/1e3)}),r=u.image,a(u,o);case 15:o+=1,e.next=7;break;case 18:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),da="partymoji-state",fa=function(){try{window.localStorage.removeItem(da)}catch(e){console.error("Error clearing state from local storage",e.stack||e)}},ma=function(e){var t=Object(u.a)(Object(u.a)({},e),{},{effects:e.effects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{state:{status:"init"}})}))});return JSON.stringify(t)},ha=xe({name:"Final Gif Frames per Second",defaultValue:20,min:1,max:60}),pa={version:2,effects:[],baseImage:void 0,fps:20},ja=function(){var e=r.a.useState(pa),t=Object(d.a)(e,2),a=t[0],n=t[1],i=r.a.useState(!1),o=Object(d.a)(i,2),c=o[0],O=o[1],x=r.a.useState(null),A=Object(d.a)(x,2),C=A[0],y=A[1];r.a.useEffect((function(){var e=function(){try{var e=window.localStorage.getItem(da);if(e){var t=JSON.parse(e);if(Array.isArray(t.effects))return t}}catch(a){console.error("Error loading state from local storage",a.stack||a)}}();e&&(2===e.version?(n(e),O(!0)):fa())}),[]);var S=r.a.useCallback((function(e,t){var a=t.compute;n((function(t){var n=e(t);return function(e){try{window.localStorage.setItem(da,ma(e))}catch(t){console.error("Error saving state to local storage",t.stack||t)}}(n),"no"!==a&&(C&&(clearTimeout(C),y(null)),"now"===a?O(!0):(O(!1),y(setTimeout((function(){y(null),O(!0)}),1e3)))),n}))}),[]);return r.a.useEffect((function(){c&&(O(!1),Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S((function(e){return Object(u.a)(Object(u.a)({},e),{},{effects:e.effects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{state:{status:"computing"}})}))})}),{compute:"no"}),e.next=3,la(a,(function(e,t){S((function(a){return Object(u.a)(Object(u.a)({},a),{},{effects:ce(a.effects,t,(function(t){return Object(u.a)(Object(u.a)({},t),{},{state:{status:"done",image:e}})}))})}),{compute:"no"})}));case 3:case"end":return e.stop()}}),e)})))())}),[c]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(v.a,{}),Object(w.jsx)(f.a,{maxWidth:"md",children:Object(w.jsxs)(m.a,{spacing:4,justifyContent:"space-evenly",divider:Object(w.jsx)(h.a,{}),children:[Object(w.jsx)(p.a,{variant:"h2",pt:4,children:"Partymoji"}),Object(w.jsxs)(m.a,{spacing:4,divider:Object(w.jsx)(h.a,{}),children:[Object(w.jsx)(g.a,{style:{padding:16},children:Object(w.jsx)(M,{})}),Object(w.jsx)(g.a,{style:{padding:16},children:Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsx)(p.a,{variant:"h5",children:"Source Image"}),Object(w.jsx)(k,{name:"Choose a source image",currentImageUrl:a.baseImage,onChange:function(e){S((function(t){return Object(u.a)(Object(u.a)({},t),{},{baseImage:e})}),{compute:"now"})}}),Object(w.jsx)("div",{style:{maxWidth:"300px"},children:ha.fn({value:a.fps,onChange:function(e){return S((function(t){return Object(u.a)(Object(u.a)({},t),{},{fps:e})}),{compute:"later"})}})})]})}),Object(w.jsx)(g.a,{style:{padding:16},children:Object(w.jsx)(na,{currentEffect:a.effects,possibleEffects:Jt,onEffectsChange:function(e){return S((function(t){return Object(u.a)(Object(u.a)({},t),{},{effects:e})}),{compute:"now"})}})}),Object(w.jsx)(g.a,{style:{padding:16},children:Object(w.jsx)(oa,{state:a,onImport:function(e){return S((function(){return e}),{compute:"now"})}})}),Object(w.jsx)(g.a,{style:{padding:16},children:Object(w.jsxs)(m.a,{spacing:3,children:[Object(w.jsx)(p.a,{variant:"h5",children:"Clear State"}),Object(w.jsx)(p.a,{variant:"body1",children:"Clicking this button will clear the source image and all effects"}),Object(w.jsx)(j.a,{startIcon:Object(w.jsx)(b.a,{children:"clear"}),sx:{maxWidth:"300px"},variant:"contained",color:"warning",onClick:function(){fa(),n(pa)},children:"Clear State"})]})}),Object(w.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(w.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:64,height:64,alt:"Github Link"})})]})]})})]})},ba=a(97),va=a(98),Oa=a(193),xa=a(192),Aa=function(e){Object(Oa.a)(a,e);var t=Object(xa.a)(a);function a(){var e;Object(ba.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(va.a)(a,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t)}},{key:"render",value:function(){return this.state.hasError?Object(w.jsxs)(m.a,{spacing:1,children:[Object(w.jsx)(p.a,{variant:"h2",children:"Oh no!"}),Object(w.jsx)(p.a,{variant:"body1",children:"There seems to have been an issue"}),Object(w.jsx)(p.a,{variant:"body2",children:"If refreshing the page doesn't fix things, click the below button to clear local storage"}),Object(w.jsx)(j.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:Object(w.jsx)(b.a,{children:"priority_high"}),startIcon:Object(w.jsx)(b.a,{children:"priority_high"}),onClick:this.props.onClearLocalStorage,children:"Clear storage and reload"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),a}(r.a.Component);o.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Aa,{onClearLocalStorage:function(){fa(),window.location.reload()},children:Object(w.jsx)(ja,{})})}),document.getElementById("root"))}},[[382,1,2]]]);
//# sourceMappingURL=main.5ce4099a.chunk.js.map