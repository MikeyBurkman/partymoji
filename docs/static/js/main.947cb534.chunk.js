(this.webpackJsonppartymoji=this.webpackJsonppartymoji||[]).push([[0],{233:function(e,a){},235:function(e,a){},250:function(e,a){},261:function(e,a){},382:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),i=n(54),o=n.n(i),c=n(17),s=n(3),u=n(471),l=n(426),d=n(466),m=n(455),f=n(456),h=n(459),p=n(454),j=n(450),g=n(25),b=n.n(g),v=n(37),O=n(464),x=n(465),w=n(184),C=n.n(w),y=n(185),V=n.n(y),M=n(92),P=n.n(M),k=n(434),F=n(437),S=n(463),I=n(16),T=n(135),A=n(30),N=n(419),W=function(e){var a=Object(s.a)(e,3),n=a[0],t=a[1],r=a[2],i=function(e){var a=e.toString(16).toUpperCase();return 2===a.length?a:"0"+a};return"#".concat(i(n)).concat(i(t)).concat(i(r))},B=function(e){return[parseInt(e.toUpperCase().substr(1,2),16),parseInt(e.toUpperCase().substr(3,2),16),parseInt(e.toUpperCase().substr(5,2),16),255]},H=function(e){return e[3]<64},E=function(e){return[Math.floor(256*e.int32()),Math.floor(256*e.int32()),Math.floor(256*e.int32()),255]},R=function(e,a,n){return Math.max(Math.min(e,n),a)},D=function(e){var a=Object(s.a)(e,4),n=a[0],t=a[1],r=a[2],i=a[3];return[R(n,0,255),R(t,0,255),R(r,0,255),R(i,0,255)]},L=[0,0,0,0],U=function(e,a,n){var t=Object(s.a)(e,2),r=t[0],i=t[1],o=Object(s.a)(n,2),c=o[0],u=o[1];if(c<0||c>=r||u<0||u>=i)return L;var l=_(e,c,u);return[a[l],a[l+1],a[l+2],a[l+3]]};function X(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected falsy value";if(!e)throw new T.AssertionError({message:a,actual:e})}var Y=function(e,a){return{dimensions:e.dimensions,frames:e.frames.map((function(n,t){return a(n,t,e.frames.length)}))}},q=function(e,a){for(var n=Object(s.a)(e,2),t=n[0],r=n[1],i=new Uint8Array(t*r*4),o=0;o<r;o+=1)for(var c=0;c<t;c+=1){var u=D(a([c,o])),l=_(e,c,o);i[l]=u[0],i[l+1]=u[1],i[l+2]=u[2],i[l+3]=u[3]}return i},z=function(e){return function(a){var n=a.image,t=a.random,r=a.parameters;return Y(n,(function(a,i,o){return q(n.dimensions,(function(c){return e({image:n,dimensions:n.dimensions,random:t,parameters:r,coord:c,frameCount:o,frameIndex:i,animationProgress:i/o,getSrcPixel:function(e){return U(n.dimensions,a,e)}})}))}))}},G=function(e,a){return function(n){var t=n.image,r=n.random,i=n.parameters;return Y(t,(function(n,o,c){var s=o/c,u=e({image:t,dimensions:t.dimensions,random:r,parameters:i,frameCount:c,frameIndex:o,animationProgress:s});return q(t.dimensions,(function(e){return a({computed:u,image:t,dimensions:t.dimensions,random:r,parameters:i,coord:e,frameCount:c,frameIndex:o,animationProgress:s,getSrcPixel:function(e){return U(t.dimensions,n,e)}})}))}))}},_=function(e,a,n){return 4*(a+n*Object(s.a)(e,1)[0])},J=function(e){for(var a=e.image,n=e.newWidth,t=e.newHeight,r=Object(s.a)(a.dimensions,2),i=r[0]/n,o=r[1]/t,c=Q({dimensions:[n,t],frameCount:a.frames.length}),u=0;u<c.frames.length;u+=1)for(var l=0;l<t;l+=1)for(var d=0;d<n;d+=1){var m=Math.floor(d*i),f=Math.floor(l*o),h=Z({image:a,frameIndex:u,coord:[m,f]});$({image:c,frameIndex:u,color:h,coord:[d,l]})}return c},K=function(e){for(var a=e.image,n=e.newWidth,t=e.newHeight,r=Object(s.a)(a.dimensions,2),i=r[0],o=r[1],c=Math.round((n-i)/2),u=Math.round((t-o)/2),l=Q({dimensions:[n,t],frameCount:a.frames.length}),d=0;d<l.frames.length;d+=1)for(var m=0;m<t;m+=1)for(var f=0;f<n;f+=1){var h=f>c&&f<n-c&&m>u&&m<t-u?Z({image:a,frameIndex:d,coord:[f-c,m-u]}):L;$({image:l,frameIndex:d,coord:[f,m],color:h})}return l},Q=function(e){return{dimensions:e.dimensions,frames:Object(N.a)(0,e.frameCount).map((function(){return new Uint8Array(e.dimensions[0]*e.dimensions[1]*4)}))}},Z=function(e){return U(e.image.dimensions,e.image.frames[e.frameIndex],e.coord)},$=function(e){var a=_(e.image.dimensions,e.coord[0],e.coord[1]),n=e.image.frames[e.frameIndex];n[a]=e.color[0],n[a+1]=e.color[1],n[a+2]=e.color[2],n[a+3]=e.color[3]},ee=function(e,a,n){return(1-e/100)*a+e/100*n},ae=function(e,a,n){var t=Object(s.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3],u=A.rgb.hsl([r,i,o]),l=Object(s.a)(u,3),d=l[1],m=l[2],f=A.hsl.rgb([a,ee(n,d,100),m]),h=Object(s.a)(f,3),p=h[0],j=h[1],g=h[2];return[ee(n,r,p),ee(n,i,j),ee(n,o,g),c]},ne=function(e,a){var n=Object(s.a)(e,4),t=n[0],r=n[1],i=n[2],o=n[3],c=A.rgb.hsl([t,r,i]),u=Object(s.a)(c,3),l=u[0],d=u[1],m=u[2],f=A.hsl.rgb([(l+a)%360,d,m]),h=Object(s.a)(f,3);return[h[0],h[1],h[2],o]},te=function(e,a){var n=a[0]-e[0],t=a[1]-e[1];return(360+180*Math.atan2(t,n)/Math.PI)%360},re=function(e){return[].concat(Object(I.a)(A.hsl.rgb([e,100,50])),[255])},ie=function(e,a){var n=Object(s.a)(e,4),t=n[0],r=n[1],i=n[2],o=n[3],c=A.rgb.hsl(t,r,i),u=Object(s.a)(c,3),l=u[0],d=u[1],m=u[2],f=ee(Math.abs(a),d,a>=0?100:0),h=A.hsl.rgb([l,f,m]),p=Object(s.a)(h,3);return[p[0],p[1],p[2],o]},oe=function(e,a){var n=e[0]-a[0],t=e[1]-a[1],r=e[2]-a[2],i=(e[0]+a[0])/2,o=(2+i/256)*n*n,c=(2+(255-i)/256)*t*t,s=4*r*r;return Math.sqrt(o+c+s)/765},ce=function(e,a){var n=e.frames;return{dimensions:e.dimensions,frames:Object(N.a)(0,a).map((function(e){var t=Math.floor(e/a*n.length);return n[t]}))}},se=function(e){var a;return{name:e.name,params:e.params,description:e.description,fn:e.fn,disabled:null!==(a=e.disabled)&&void 0!==a&&a}},ue=n(448),le=n(440),de=n(457),me=n(453),fe=n(1),he=function(e){var a=e.description;return a?Object(fe.jsx)(me.a,{title:a,children:Object(fe.jsx)(p.a,{fontSize:"small",color:"action",children:"help"})}):null},pe=function(e){var a=e.name,n=e.value,t=e.description,i=e.parse,o=e.onChange,c=r.a.useState(void 0===n?void 0:n.toString()),u=Object(s.a)(c,2),d=u[0],f=u[1],h=r.a.useState(""),p=Object(s.a)(h,2),j=p[0],g=p[1];return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:t})]}),Object(fe.jsxs)(ue.a,{children:[Object(fe.jsx)(le.a,{error:!!j,value:d,onBlur:function(){if(void 0!==d&&(!n||d!==n.toString())){var e=i(d);e.valid?g(""):g(e.reason),o(e)}},onChange:function(e){f(e.target.value)}}),j&&Object(fe.jsx)(de.a,{children:j})]})]})},je=function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){var n=e.min,t=e.max;return Object(fe.jsx)(pe,{name:e.name,description:e.description,parse:function(e){var a=parseInt(e,10);return isNaN(a)||a.toString()!==e?{valid:!1,reason:"Must be an integer"}:void 0!==n&&a<n?{valid:!1,reason:"Must be greater than or equal to ".concat(n)}:void 0!==t&&a>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:a}},onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}},ge=n(446),be=function(e){var a=e.name,n=e.value,t=e.min,r=e.max,i=e.step,o=e.description,c=e.onChange;return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:o})]}),Object(fe.jsxs)(l.a,{direction:"row",spacing:2,sx:{paddingLeft:"8px",paddingRight:"8px"},children:[Object(fe.jsx)(ge.a,{"aria-label":a,value:n,step:i,valueLabelDisplay:"off",getAriaValueText:function(e){return e.toString()},min:t,max:r,onChange:function(e,a){return c({valid:!0,value:a})}}),Object(fe.jsx)(m.a,{variant:"body2",children:n})]})]})};function ve(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(fe.jsx)(be,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange,min:e.min,max:e.max,step:e.step,description:e.description})}}}var Oe=se({name:"Adjust Image",description:"Leave a parameter at 0 if you want to not change it",params:[ve({name:"Number of Frames",description:"Set how many frames of animation there will be. Leave at 0 to not change the current frame count.",defaultValue:0,min:0,max:60}),je({name:"Width",description:"Leave at 0 to not change the width. If height is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),je({name:"Height",description:"Leave at 0 to not change the height. If width is changed, the image will keep the same aspect ratio.",defaultValue:0,min:0}),ve({name:"Brightness",min:-100,max:100,step:5,defaultValue:0}),ve({name:"Contrast",min:-100,max:100,step:5,defaultValue:0}),ve({name:"Saturation",min:-100,max:100,step:5,defaultValue:0})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,6),t=n[0],r=n[1],i=n[2],o=n[3],c=n[4],u=n[5],l=0!==t,d=Object(s.a)(a.dimensions,2),m=d[0],f=d[1],h=r>0||i>0,p=h&&0===r?Math.ceil(m/f*i):r,j=h&&0===i?Math.ceil(f/m*r):i,g=p*j>m*f,b=a;return l&&t<a.frames.length&&(b=ce(b,t)),h&&!g&&(b=J({image:b,newWidth:p,newHeight:j})),b=Y(b,(function(e){return q(b.dimensions,(function(a){var n=U(b.dimensions,e,a);return 0!==o&&(n=function(e,a){var n=a/100*128,t=Object(s.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];return D([r+n,i+n,o+n,c])}(n,o)),0!==c&&(n=function(e,a){var n=a/100+1,t=Object(s.a)(e,4),r=t[0],i=t[1],o=t[2],c=t[3];return D([n*(r-128)+128,n*(i-128)+128,n*(o-128)+128,c])}(n,c)),0!==u&&(n=ie(n,u)),n}))})),h&&g&&(b=J({image:b,newWidth:p,newHeight:j})),l&&t>a.frames.length&&(b=ce(b,t)),b}}),xe=n(105),we=n(432),Ce=n(458),ye=n(460),Ve=function(e){var a=e.mainEle,n=e.children,t=r.a.useState(!0),i=Object(s.a)(t,2),o=i[0],c=i[1];return Object(fe.jsx)(we.a,{onClickAway:function(){return c(!0)},children:Object(fe.jsxs)(Ce.a,{children:[Object(fe.jsx)(h.a,{onClick:function(){return c(!o)},style:{textTransform:"none",color:"black"},children:Object(fe.jsxs)(l.a,{direction:"row",spacing:4,children:[Object(fe.jsx)("div",{children:a}),Object(fe.jsx)(p.a,{children:o?"expand_less":"expand_more"})]})}),Object(fe.jsx)(ye.a,{in:!o,children:n})]})})},Me=function(e){var a=e.color;return Object(fe.jsx)("div",{style:{width:"1.5em",height:"1.5em",backgroundColor:W(a)}})},Pe=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange;return Object(fe.jsx)(Ve,{mainEle:Object(fe.jsxs)(l.a,{direction:"row",spacing:4,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:t}),n&&Object(fe.jsx)(Me,{color:n})]}),children:Object(fe.jsx)(xe.b,{disableAlpha:!0,presetColors:[],color:n?W(n):void 0,onChangeComplete:function(e){return r({valid:!0,value:B(e.hex)})}})})};function ke(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(fe.jsx)(Pe,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange,description:e.description})}}}var Fe=se({name:"Background Color",description:"Change all transparent pixles to the given color",params:[ke({name:"Color",defaultValue:B("#000000")})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,1)[0],r=n(a);return H(r)?t:r}))}),Se=function(e){var a=e.currentImageUrl,n=e.name,t=e.onChange;return Object(fe.jsxs)(l.a,{spacing:4,children:[Object(fe.jsxs)(h.a,{startIcon:Object(fe.jsx)(p.a,{children:"image"}),sx:{maxWidth:"300px"},variant:"contained",component:"label",children:[n,Object(fe.jsx)("input",{type:"file",hidden:!0,accept:"image/png,image/jpg,image/jpeg,image/gif",name:"source-png",onChange:function(){var e=Object(v.a)(b.a.mark((function e(a){var n,r,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array.from(null!==(n=a.target.files)&&void 0!==n?n:[]),!(i=r[0])){e.next=7;break}return e.next=5,Ie(i);case 5:o=e.sent,t(o);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]}),a&&Object(fe.jsx)("img",{style:{maxWidth:"300px",maxHeight:"auto"},src:a,alt:"Source"})]})},Ie=function(e){return new Promise((function(a){var n=new FileReader;n.onload=function(){return a(n.result)},n.readAsDataURL(e)}))};var Te=n(452),Ae=n(461),Ne=n(443),We=function(e){var a=e.name,n=e.options,t=e.value,r=e.description,i=e.onChange;return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:r})]}),Object(fe.jsx)(ue.a,{component:"fieldset",children:Object(fe.jsx)(Te.a,{"aria-label":a,defaultValue:t,onChange:function(e){return i({valid:!0,value:e.target.value})},children:n.map((function(e){return Object(fe.jsx)(Ae.a,{value:e.value,control:Object(fe.jsx)(Ne.a,{}),label:e.name})}))})})]})};function Be(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(fe.jsx)(We,{name:e.name,value:a.value.valid?a.value.value:void 0,options:e.options,description:e.description,onChange:a.onChange})}}}var He=se({name:"Background Image",description:"Select another image to be used as a background or foreground",params:[function(e){var a=e.name;return{name:a,defaultValue:{valid:!1},fn:function(e){return Object(fe.jsx)(Se,{currentImageUrl:e.value.valid?e.value.value.dataUrl:void 0,name:a,width:64,height:64,onChange:function(){var a=Object(v.a)(b.a.mark((function a(n){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,za(n);case 2:t=a.sent,e.onChange({valid:!0,value:{dataUrl:n,image:t}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()})}}}({name:"Image"}),Be({name:"Type",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]})],fn:G((function(e){var a=e.image.dimensions,n=Object(s.a)(e.parameters,2),t=n[0],r=n[1];return{otherImage:K({image:t.image,newWidth:a[0],newHeight:a[1]}),type:r}}),(function(e){var a=e.coord,n=e.animationProgress,t=e.computed,r=t.otherImage,i=t.type,o=e.getSrcPixel,c=Math.floor(n*r.frames.length),s=Z({image:r,frameIndex:c,coord:a}),u=o(a);return"background"===i?H(u)?s:u:H(s)?u:s}))}),Ee=se({name:"Bounce",description:"Make the image bounce up and down",params:[je({name:"Bounce Speed",description:"Positive number",defaultValue:5,min:0})],fn:G((function(e){var a=e.animationProgress,n=Object(s.a)(e.parameters,1)[0];return{yOffset:Math.round(n*Math.sin(2*a*Math.PI))}}),(function(e){var a=e.computed.yOffset,n=Object(s.a)(e.coord,2),t=n[0],r=n[1];return(0,e.getSrcPixel)([t,r+a])}))}),Re=n(433),De=n(435),Le=n(436),Ue=se({name:"Bounce Animation",description:"When the animation finishes, it will be replayed in reverse",params:[],fn:function(e){var a=e.image;return{dimensions:a.dimensions,frames:Object(Re.a)(a.frames,Object(k.a)(a.frames,Object(De.a)(1),Object(Le.a)(),Object(De.a)(1)))}}}),Xe=se({name:"Circle",description:"Make the image move in a circular pattern",params:[je({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:G((function(e){var a=e.animationProgress,n=Object(s.a)(e.parameters,1)[0];return{xOffset:Math.round(n*Math.sin(-2*Math.PI*a)),yOffset:Math.round(n*Math.cos(-2*Math.PI*a))}}),(function(e){var a=e.computed,n=a.xOffset,t=a.yOffset,r=Object(s.a)(e.coord,2),i=r[0],o=r[1];return(0,e.getSrcPixel)([i+n,o+t])}))}),Ye=n(462),qe=function(e){var a=e.name,n=e.newParamText,t=e.createNewParam,i=e.value,o=e.description,c=e.onChange,u=r.a.useState(void 0===i?[]:i.map((function(e,a){return{param:t(),pValue:e}}))),d=Object(s.a)(u,2),j=d[0],g=d[1];return Object(fe.jsx)(f.a,{children:Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:o})]}),j.map((function(e,n){var t=e.param,r=e.pValue,i=t.fn({value:{valid:!0,value:r},onChange:function(e){if(e.valid){var a=j.map((function(a,r){return n===r?{param:t,pValue:e.value}:a}));g(a),c({valid:!0,value:a.map((function(e){return e.pValue}))})}}});return Object(fe.jsxs)(l.a,{direction:"row",children:[Object(fe.jsx)(Ye.a,{onClick:function(){var e=j.filter((function(e,a){return a!==n}));g(e),c({valid:!0,value:e.map((function(e){return e.pValue}))})},style:{visibility:0===n?"hidden":void 0},children:Object(fe.jsx)(p.a,{children:"delete"})}),i]},"".concat(a,"-").concat(n))})),Object(fe.jsx)(h.a,{variant:"contained",onClick:function(){var e=t(),a=[].concat(Object(I.a)(j),[{param:e,pValue:e.defaultValue.valid?e.defaultValue.value:void 0}]);g(a),e.defaultValue.valid&&c({valid:!0,value:a.map((function(e){return e.pValue}))})},children:n})]})})};function ze(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(fe.jsx)(qe,{name:e.name,newParamText:e.newParamText,value:a.value.valid?a.value.value:void 0,createNewParam:e.createNewParam,description:e.description,onChange:a.onChange})}}}var Ge=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(B),_e=se({name:"Colors",description:"Make the image flash different colors",params:[ze({name:"Colors",newParamText:"New Color",defaultValue:Ge,createNewParam:function(){return ke({name:"Color",defaultValue:Ge[0]})}})],fn:G((function(e){var a=e.animationProgress,n=Object(s.a)(e.parameters,1)[0];return{chosenColor:n[Math.floor(a*n.length)]}}),(function(e){var a=e.computed.chosenColor,n=e.coord,t=(0,e.getSrcPixel)(n);if(H(t))return[0,0,0,0];var r=function(e){var a=Object(s.a)(e,3),n=a[0],t=a[1],r=a[2];return Math.round((n+t+r)/3)}(t);return[r*a[0]/255,r*a[1]/255,r*a[2]/255,255]}))}),Je=["#FF8D8B","#FED689","#88FF89","#87FFFF","#8BB5FE","#D78CFF","#FF8CFF","#FF68F7","#FE6CB7","#FF6968"].map(B),Ke=se({name:"Colors Background",description:"Transparent pixels will flash different colors",params:[ze({name:"Colors",newParamText:"New Color",defaultValue:Je,createNewParam:function(){return ke({name:"Color",defaultValue:Je[0]})}})],fn:G((function(e){var a=e.animationProgress,n=Object(s.a)(e.parameters,1)[0];return{bgColor:n[Math.floor(a*n.length)]}}),(function(e){var a=e.computed.bgColor,n=e.coord,t=(0,e.getSrcPixel)(n);return H(t)?a:t}))}),Qe=function(e){var a=e.name,n=e.value,t=e.description,i=e.parse,o=e.onChange,c=r.a.useState(void 0===n?void 0:n.toString()),u=Object(s.a)(c,2),d=u[0],f=u[1],h=r.a.useState(""),p=Object(s.a)(h,2),j=p[0],g=p[1];return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:t})]}),Object(fe.jsxs)(ue.a,{children:[Object(fe.jsx)(le.a,{error:!!j,value:d,onBlur:function(){if(void 0!==d&&(!n||d!==n.toString())){var e=i(d);e.valid?g(""):g(e.reason),o(e)}},onChange:function(e){f(e.target.value)}}),j&&Object(fe.jsx)(de.a,{children:j})]})]})},Ze=function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){var n=e.min,t=e.max;return Object(fe.jsx)(Qe,{name:e.name,description:e.description,parse:function(e){var a=parseFloat(e);return isNaN(a)||a.toString()!==e?{valid:!1,reason:"Must be a number"}:void 0!==n&&a<n?{valid:!1,reason:"Must be greater than or equal to ".concat(n)}:void 0!==t&&a>t?{valid:!1,reason:"Must be less than or equal to ".concat(t)}:{valid:!0,value:a}},onChange:a.onChange,value:a.value.valid?a.value.value:void 0})}}},$e=se({name:"Double Vision",description:"See the image in double",params:[Ze({name:"Amplitude",defaultValue:10,min:0})],fn:G((function(e){var a=e.animationProgress;return{xOffset:Object(s.a)(e.parameters,1)[0]*Math.sin(-2*Math.PI*a)}}),(function(e){var a=e.computed.xOffset,n=Object(s.a)(e.coord,2),t=n[0],r=n[1],i=t%2===0?-1:1;return(0,e.getSrcPixel)([t+Math.round(i*a),r])}))}),ea=se({name:"Expand",description:"Make the image grow and shrink",params:[je({name:"Radius",description:"Positive number",defaultValue:10,min:0})],fn:G((function(e){var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1],r=e.animationProgress,i=Object(s.a)(e.parameters,1)[0];return{dist:Math.cos(2*r*Math.PI)*i,centerX:n/2,centerY:t/2}}),(function(e){var a=e.computed,n=a.centerX,t=a.centerY,r=a.dist,i=Object(s.a)(e.dimensions,2),o=i[0],c=i[1],u=Object(s.a)(e.coord,2),l=u[0],d=u[1],m=(l-n)/o,f=(d-t)/c;return(0,e.getSrcPixel)([l-Math.floor(r*m),d-Math.round(r*f)])}))}),aa=se({disabled:!0,name:"Fill Transparent",description:"Makes transparent all pixels of similar color surrounding a point",params:[ve({name:"Tolerance",defaultValue:50,min:0,max:100})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=(Object(s.a)(e.parameters,1)[0],n([0,0]),n(a),Object(s.a)(a,2));t[0],t[1];return[0,0,0,0]}))}),na=se({name:"Fisheye",description:"Make the image grow and shrink in a distorted fashion",params:[je({name:"Radius",description:"Positive Number",defaultValue:10,min:0})],fn:G((function(e){var a=e.animationProgress,n=Object(s.a)(e.dimensions,2),t=n[0],r=n[1];return{dist:(a<.5?a:1-a)*Object(s.a)(e.parameters,1)[0],centerX:t/2,centerY:r/2}}),(function(e){var a=e.computed,n=a.dist,t=a.centerX,r=a.centerY,i=Object(s.a)(e.coord,2),o=i[0],c=i[1],u=e.getSrcPixel,l=Math.atan2(r-c,t-o);return u([o+Math.round(n*Math.cos(l)),c+Math.round(n*Math.sin(l))])}))}),ta=se({name:"Grid",description:"Removes the color from all pixels not aligned with a grid",params:[ve({name:"Grid Size",description:"The length of each square in the grid",defaultValue:24,min:2,max:64,step:2}),ve({name:"Grid Angle",defaultValue:45,min:0,max:90})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,2),r=t[0],i=t[1],o=n(a),c=Object(s.a)(a,2),u=c[0],l=c[1],d=!1;if(i%90===0)d=u%r===0||l%r===0;else{var m=(64-r)/64*.1+.03,f=function(e){var a=1/r*(l-Math.tan(ra(e))*u);return Math.abs(Math.round(a)-a)<m};d=f(i)||f(i+90)}return d?o:ie(o,-100)}))}),ra=function(e){return e*Math.PI/180},ia=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange,i=void 0===n?void 0:W([].concat(Object(I.a)(A.hsl.rgb([n,255,255])),[255]));return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:t})]}),Object(fe.jsx)(xe.a,{color:i,onChangeComplete:function(e){var a=e.hsl;return r({valid:!0,value:a.h})}})]})};function oa(e){return{name:e.name,defaultValue:e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(fe.jsx)(ia,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange})}}}var ca,sa=se({name:"Hue Change",description:"Change the hue of the image to some other color",params:[oa({name:"Hue",defaultValue:180}),ve({name:"Amount",description:"How strong the effect is.",min:0,max:100,step:5,defaultValue:75})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,2),r=t[0],i=t[1];return ae(n(a),r,i)}))}),ua=se({name:"Hue Shift",description:"Shift the hue of each pixel in the image by some amount",params:[ve({name:"Amount",description:"How much to shift the hue of each pixel",min:0,max:100,step:5,defaultValue:50})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,1)[0];return ne(n(a),t/100*360)}))}),la=se({name:"Hue Shift Pulse",description:"Shift the hue to the given value in a pulsating manner",params:[oa({name:"Hue",defaultValue:180})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=e.frameCount,r=e.frameIndex,i=Object(s.a)(e.parameters,1)[0],o=n(a);if(H(o))return o;var c=Math.abs(Math.sin(Math.PI*(r/t)));return ae(o,i,360*c)}))}),da=se({name:"Hue Wave",description:"Shifts the hue of pixels in the image in a wave motion",params:[ve({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the hue shift effect should be"}),ve({name:"Period",defaultValue:1,min:1,max:20,description:"How many waves you want"})],fn:G((function(e){return{shift:-1*e.animationProgress*2*Math.PI}}),(function(e){var a=e.computed.shift,n=e.coord,t=Object(s.a)(e.dimensions,2)[1],r=Object(s.a)(e.parameters,2),i=r[0],o=r[1],c=e.getSrcPixel,u=Object(s.a)(n,2),l=(u[0],u[1]),d=Math.round(i*Math.sin(l/t*o*Math.PI+a));return ne(c(n),d/100*360)}))}),ma=function(e){var a=e.name,n=e.value,t=e.description,i=e.onChange,o=r.a.useState(n),c=Object(s.a)(o,2),u=c[0],d=c[1];return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",children:a}),Object(fe.jsx)(he,{description:t})]}),Object(fe.jsx)(ue.a,{children:Object(fe.jsx)(le.a,{value:u,onChange:function(e){return d(e.target.value)},onBlur:function(){return i(u?{valid:!0,value:u}:{valid:!1})}})})]})},fa=[[0,15,40,255],[150,150,175,255],[180,180,205,255],[210,210,235,255]],ha=se({name:"Lightning",description:"Make the background look like a thunderstorm",params:[(ca={name:"Random Seed",description:"Can be anything. Will determine the randomness of the lightning.",defaultValue:"lightning"},{name:ca.name,defaultValue:void 0!==ca.defaultValue?{valid:!0,value:ca.defaultValue}:{valid:!1},fn:function(e){return Object(fe.jsx)(ma,{name:ca.name,description:ca.description,onChange:e.onChange,value:e.value.valid?e.value.value:void 0})}})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,1)[0],t=P()(n);return Y(a,(function(e){var n=t(),r=n<.9?0:n<.95?1:n<.98?2:3;return q(a.dimensions,(function(n){var t=U(a.dimensions,e,n);if(H(t))return fa[r];if(r>0){var i=1.02*r;return[t[0]*i,t[1]*i,t[2]*i,t[3]]}return t}))}))}}),pa=se({name:"Nuke",description:"Oh no...",params:[],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=255*e.animationProgress,r=n(a),i=Object(s.a)(r,4),o=i[0],c=i[1],u=i[2],l=i[3],d=A.rgb.hsl(o,c,u),m=Object(s.a)(d,3),f=m[0],h=m[1],p=m[2],j=A.hsl.rgb([f,h,p>t?p:0]),g=Object(s.a)(j,3);return[g[0],g[1],g[2],p>t?l:0]}))}),ja=se({name:"Party",description:"Shift the hue of the image over the course of the animation",params:[Be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Amount",description:"How strong the effect is",min:0,max:100,step:5,defaultValue:50}),ve({name:"Shift Speed",description:"Controls how quickly it shifts through the various colors",min:1,max:12,defaultValue:1})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=e.animationProgress,r=Object(s.a)(e.parameters,3),i=r[0],o=r[1],c=r[2],u=n(a),l=H(u),d=t*c*360%360;return l&&"background"===i?re(d):l||"foreground"!==i?u:ae(u,d,o)}))}),ba=se({name:"Party Two",description:"Shift the hue of each individual pixel over the course of the animation",params:[],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=e.animationProgress,r=n(a);return H(r)?r:ne(r,360*t)}))}),va=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(B),Oa=se({name:"Pinwheel",description:"Create a pinwheel of colors",params:[ve({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),ze({name:"Colors",newParamText:"New Color",description:"Colors for the pinwheel",defaultValue:va,createNewParam:function(){return ke({name:"Color",defaultValue:va[0]})}}),je({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),je({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:G((function(e){for(var a=Object(s.a)(e.parameters,4),n=a[0],t=a[1],r=(a[2],a[3],t.length*n),i=Math.round(360/r),o=t.length;"00"!==(r/o).toFixed(2).slice(-2);)o-=1;return{colorsLength:o,ribbonArcDegrees:i}}),(function(e){var a=e.computed,n=a.ribbonArcDegrees,t=a.colorsLength,r=e.coord,i=e.dimensions,o=e.animationProgress,c=e.getSrcPixel,u=Object(s.a)(e.parameters,4),l=(u[0],u[1]),d=u[2],m=u[3],f=c(r);if(!H(f))return f;var h=[i[0]/2+d,i[1]/2-m],p=te(r,h),j=Math.floor(p/n)%t;return l[(Math.floor(o*t)+j)%t]}))}),xa=se({name:"Pinwheel Party",description:"Create a pinwheel of party colors",params:[ve({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),je({name:"Offset X",description:"Change the horizontal center of the pinwheel",defaultValue:0}),je({name:"Offset Y",description:"Change the vertical center of the pinwheel",defaultValue:0})],fn:G((function(e){var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1],r=Object(s.a)(e.parameters,5);r[0],r[1],r[2];return{center:[n/2+r[3],t/2-r[4]]}}),(function(e){var a=e.computed.center,n=e.coord,t=e.animationProgress,r=e.getSrcPixel,i=Object(s.a)(e.parameters,3),o=i[0],c=i[1],u=i[2],l=r(n),d=H(l);if("foreground"===c?d:!d)return l;var m=(te(n,a)*o+360*t)%360;return d?re(m):ae(l,m,u)}))}),wa=["#FF0000","#FF9600","#FFFF00","#00FF00","#00FF96","#00FFFF","#0000FF","#B400FF"].map(B),Ca=se({name:"Radiance",description:"Radiate colors out in rings",params:[ve({name:"Group Count",description:"How many times each color is repeated",defaultValue:1,min:1,max:24}),ze({name:"Colors",newParamText:"New Color",description:"The colors that make up each ring",defaultValue:wa,createNewParam:function(){return ke({name:"Color",defaultValue:wa[0]})}}),je({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),je({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:G((function(e){var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1],r=Object(s.a)(e.parameters,2),i=r[0],o=r[1];return{colorList:Object(N.a)(0,i).flatMap((function(){return o})),centerX:n/2,centerY:t/2}}),(function(e){var a=e.computed,n=a.centerX,t=a.centerY,r=a.colorList,i=Object(s.a)(e.dimensions,2),o=i[0],c=i[1],u=e.coord,l=e.animationProgress,d=Object(s.a)(e.parameters,4),m=(d[0],d[1],d[2]),f=d[3],h=(0,e.getSrcPixel)(u);if(!H(h))return h;var p=Object(s.a)(u,2),j=p[0]-n-m,g=p[1]-t+f,b=Math.sqrt(o/2*(o/2)+c/2*(c/2)),v=Math.sqrt(g*g+j*j),O=Math.floor((1-v/b)*r.length)%r.length;return r[(Math.floor(l*r.length)+O)%r.length]}))}),ya=se({name:"Radiance Party",description:"Radiate party colors out in rings",params:[ve({name:"Group Count",description:"How many times each rainbow is repeated",defaultValue:1,min:1,max:24}),Be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Amount",description:"How strong the effect is. Only applies when type = foreground.",min:0,max:100,step:5,defaultValue:75}),je({name:"Offset X",description:"Change the horizontal center of the radiance",defaultValue:0}),je({name:"Offset Y",description:"Change the vertical center of the radiance",defaultValue:0})],fn:G((function(e){var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1];return{centerX:n/2,centerY:t/2,maxDist:Math.sqrt(n/2*(n/2)+t/2*(t/2))}}),(function(e){var a=e.computed,n=a.centerX,t=a.centerY,r=a.maxDist,i=e.coord,o=e.animationProgress,c=Object(s.a)(e.parameters,5),u=c[0],l=c[1],d=c[2],m=c[3],f=c[4],h=(0,e.getSrcPixel)(i),p=H(h);if("foreground"===l?p:!p)return h;var j=Object(s.a)(i,2),g=j[0]-n-m,b=j[1]-t+f,v=(360*(1-Math.sqrt(b*b+g*g)/r)*u+360*o)%360;return p?re(v):ae(h,v,d)}))}),Va=n(438),Ma=se({name:"Reduce Color Palette",description:"Reduce the number of unique colors in the gif, to reduce the file size.This can be a slow operation depending on the number of final colors",params:[ve({name:"Percent Reduction",description:"0% will have no effect, 100% will result in just one unique color in the result",defaultValue:70,min:0,max:100,step:5})],fn:G((function(e){var a=e.image,n=Object(s.a)(e.parameters,1)[0],t=new Set;Y(a,(function(e){return q(a.dimensions,(function(n){var r=U(a.dimensions,e,n);return H(r)||t.add(W(r)),L}))}));for(var r=Array.from(t).map(B),i=Math.max(Math.floor(r.length*(100-n)/100),1),o=r.map((function(e){return{color:e,numClosestColors:0}})),c=1;c<r.length;c+=1){for(var u=0,l=oe(r[c],r[u]),d=0;d<r.length;d+=1)if(d!==c){var m=oe(r[d],r[c]);m<l&&(u=d,l=m)}o[u].numClosestColors+=1}return{colorPalette:Object(F.a)(o,[function(e){return e.numClosestColors},"desc"]).slice(0,i).map((function(e){return e.color}))}}),(function(e){var a=e.coord,n=e.getSrcPixel,t=e.computed.colorPalette,r=n(a);return H(r)?r:Object(Va.a)(t,(function(e){return oe(e,r)}))}))}),Pa=se({name:"Repeat Animation",description:"Repeats the current animation some number of times",params:[ve({name:"Number of Repeats",defaultValue:1,min:1,max:50})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,1)[0];return{dimensions:a.dimensions,frames:Object(N.a)(0,a.frames.length*(n+1)).map((function(e){return a.frames[e%a.frames.length]}))}}}),ka=se({name:"Resize Image",description:"Change the dimensions of the image. If bigger than original, the extra space will be transparent. If smaller, the image will be cropped. ",params:[je({name:"Width",description:"Set to 0 when height is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0}),je({name:"Height",description:"Set to 0 when width is set to non-zero to keep the same aspect ratio",defaultValue:128,min:0})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,2),t=n[0],r=n[1],i=Object(s.a)(a.dimensions,2),o=i[0],c=i[1],u=0===t?Math.ceil(o/c*r):t,l=0===r?Math.ceil(c/o*t):r;return K({image:a,newWidth:u,newHeight:l})}}),Fa=se({name:"Reverse Animation",description:"Reverses the animation",params:[],fn:function(e){var a=e.image;return{dimensions:a.dimensions,frames:Object(Le.a)(a.frames)}}}),Sa=se({name:"Ripple",description:"Create a ripple effect, like water",params:[ve({name:"Amplitude",defaultValue:20,min:0,max:100,step:5,description:"How strong the ripple effect should be"}),ve({name:"Period",defaultValue:1,min:1,max:20,description:"How many ripples you want"})],fn:G((function(e){return{shift:2*e.animationProgress*Math.PI}}),(function(e){var a=e.computed.shift,n=Object(s.a)(e.coord,2),t=n[0],r=n[1],i=Object(s.a)(e.dimensions,2)[1],o=Object(s.a)(e.parameters,2),c=o[0],u=o[1];return(0,e.getSrcPixel)([t+Math.round(c*Math.sin(r/i*u*Math.PI+a)),r])}))}),Ia=se({name:"Rotate",description:"Make the image rotate about the center point",params:[Be({name:"Direction",defaultValue:"clockwise",options:[{name:"Clockwise",value:"clockwise"},{name:"Counter-Clockwise",value:"counter"}]})],fn:G((function(e){var a=e.animationProgress*("counter"===Object(s.a)(e.parameters,1)[0]?1:-1);return{cos:Math.cos(2*Math.PI*a),sin:Math.sin(2*Math.PI*a)}}),(function(e){var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1],r=Object(s.a)(e.coord,2),i=r[0],o=r[1],c=e.computed,u=c.cos,l=c.sin,d=n/2,m=t/2,f=i-d,h=o-m;return(0,e.getSrcPixel)([Math.round(d+f*u-h*l),Math.round(m+h*u+f*l)])}))}),Ta=se({name:"Roxbury",description:"Baby, don't hurt me",params:[],fn:G((function(e){var a=Object(s.a)(e.dimensions,2),n=a[0],t=a[1],r=e.animationProgress,i=Math.floor(4*r),o=4*(r-i/4),c=Math.PI/2*.2,u=0===i?0:1===i?o*c:2===i?c:(1-o)*c;return{angle:u,cos:Math.cos(1.35*-u),sin:Math.sin(1.35*-u),rotatePointX:.25*n,rotatePointY:.7*t}}),(function(e){var a=e.computed,n=a.angle,t=a.cos,r=a.sin,i=a.rotatePointX,o=a.rotatePointY,c=Object(s.a)(e.coord,2),u=c[0],l=c[1],d=e.getSrcPixel,m=Math.floor(u-i+8*Math.sin(n)),f=Math.floor(l-o+8*Math.cos(n));return d([Math.round(i+m*t-f*r),Math.round(o+f*t+m*r)])}))}),Aa=se({name:"Shake",description:"Make the image shake back and forth",params:[Ze({name:"Amplitude",defaultValue:10,min:0})],fn:G((function(e){var a=e.animationProgress,n=Object(s.a)(e.parameters,1)[0];return{xOffset:Math.round(n*Math.cos(2*a*Math.PI))}}),(function(e){var a=e.computed.xOffset,n=Object(s.a)(e.coord,2),t=n[0],r=n[1];return(0,e.getSrcPixel)([t+a,r])}))}),Na=se({name:"Slow Animation",description:"Attempts to slow the animation by adding intermediate frames",params:[Be({name:"Interpolation Type",options:[{name:"Basic",value:"basic"},{name:"Smooth",value:"smooth"}],defaultValue:"basic",description:"With basic interpolation, frames are simply duplicated. With smooth interpolation, intermediate frames are the average of their surrounding frames."})],fn:function(e){var a=e.image,n=Object(s.a)(e.parameters,1)[0];return{dimensions:a.dimensions,frames:Object(N.a)(0,2*a.frames.length-1).map((function(e){if(e%2===0)return a.frames[e/2];var t=(e-1)/2;return"basic"===n?a.frames[t]:q(a.dimensions,(function(e){var n=U(a.dimensions,a.frames[t],e),r=Object(s.a)(n,4),i=r[0],o=r[1],c=r[2],u=r[3],l=U(a.dimensions,a.frames[t+1],e),d=Object(s.a)(l,4);return[(i+d[0])/2,(o+d[1])/2,(c+d[2])/2,(u+d[3])/2]}))}))}}}),Wa=se({disabled:!0,name:"Spin",description:"Make the image spin in a 3D-like way",params:[],fn:z((function(e){var a=e.image,n=Object(s.a)(e.coord,2),t=n[0],r=n[1],i=e.frameCount,o=e.frameIndex,c=e.getSrcPixel,u=a.dimensions[0]/2,l=o/i,d=2*Math.PI*l;return c([Math.round(u+t*Math.cos(d)),r])}))}),Ba=se({name:"Static",description:"Adds random static to the image",params:[Be({name:"Type",description:"Whether to apply the party to the foreground or background",defaultValue:"background",options:[{name:"Background",value:"background"},{name:"Foreground",value:"foreground"}]}),ve({name:"Strength",description:"Higher number increases the amount of static pixels",defaultValue:25,min:5,max:100,step:5})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,2),r=t[0],i=t[1],o=e.random,c=n(a),u=H(c);if("foreground"===r?u:!u)return c;if(u&&"background"===r){var l=Math.ceil(100*o())<i,d=Math.ceil(255*o());return l?[d,d,d,255]:c}var m=Math.ceil(100*o())<i,f=Math.ceil(255*o());return m?[f,f,f,c[3]]:c}))}),Ha=n(447),Ea=function(e){var a=e.name,n=e.value,t=e.description,r=e.onChange;return Object(fe.jsx)(l.a,{spacing:1,children:Object(fe.jsxs)(l.a,{direction:"row",spacing:1,children:[Object(fe.jsx)(m.a,{variant:"body2",paddingTop:"0.5rem",children:a}),Object(fe.jsx)("span",{style:{paddingTop:"0.5rem"},children:Object(fe.jsx)(he,{description:t})}),Object(fe.jsx)(Ha.a,{"aria-label":a,checked:n,onChange:function(e,a){return r({valid:!0,value:a})}})]})})};var Ra=se({name:"Transparency",description:"Set certain pixels to be transparent",params:[function(e){return{name:e.name,defaultValue:void 0!==e.defaultValue?{valid:!0,value:e.defaultValue}:{valid:!1},fn:function(a){return Object(fe.jsx)(Ea,{name:e.name,value:a.value.valid?a.value.value:void 0,onChange:a.onChange,description:e.description})}}}({name:"Matches are Transparent",description:"If checked, then pixels matching this color will be made transparent. If not checked, non-matching pixels are transparent.",defaultValue:!0}),ke({name:"Color",defaultValue:B("#000000")}),ve({name:"Tolerance",description:'A higher number will mean colors that are "close" to the chosen color will be transparent. (0 - 100)',defaultValue:10,min:0,max:100,step:2})],fn:z((function(e){var a=e.coord,n=e.getSrcPixel,t=Object(s.a)(e.parameters,3),r=t[0],i=t[1],o=t[2],c=n(a),u=100*oe(c,i)<=o;return(r?u:!u)?[c[0],c[1],c[2],0]:c}))}),Da=se({name:"Transpose",description:"Move the image left or right, up or down",params:[je({name:"X",defaultValue:0}),je({name:"Y",defaultValue:0})],fn:z((function(e){var a=Object(s.a)(e.coord,2),n=a[0],t=a[1],r=e.getSrcPixel,i=Object(s.a)(e.parameters,2);return r([n+i[0],t+i[1]])}))}),La=Object(k.a)([Oe,Fe,He,Ee,Ue,Xe,_e,Ke,$e,ea,aa,na,ta,sa,ua,la,da,ha,pa,ja,ba,Oa,xa,Ca,ya,Ma,Pa,ka,Fa,Sa,Ia,Ta,Aa,Na,Wa,Ba,Ra,Da],Object(F.a)((function(e){return e.name})),Object(S.a)((function(e){return e.disabled}))),Ua=function(e){var a=La.find((function(a){return a.name===e}));return X(a,"Could not find matching transform: ".concat(e)),a},Xa=function(){var e=Object(v.a)(b.a.mark((function e(a){var n,t,r,i,o,c,s,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.image,t=a.transformInput,r=a.randomSeed,i=a.fps,o=P()(r),c=Ua(t.transformName),s=c.fn({image:n,parameters:t.params,random:o}),u=Ga(s,o),e.next=7,qa({image:Ya(s,u),transparentColor:u,fps:i});case 7:return l=e.sent,e.abrupt("return",{gif:l,image:s});case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ya=function(e,a){var n=e.frames.map((function(e){for(var n=new Uint8Array(e.length),t=0;t<e.length;t+=4)a&&e[t+3]<128?(n[t]=a[0],n[t+1]=a[1],n[t+2]=a[2],n[t+3]=0):(n[t]=e[t],n[t+1]=e[t+1],n[t+2]=e[t+2],n[t+3]=0);return n}));return{dimensions:e.dimensions,frames:n}},qa=function(){var e=Object(v.a)(b.a.mark((function e(a){var n,t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.image,t=a.transparentColor,r=a.fps,e.abrupt("return",new Promise((function(e){var a=Object(s.a)(n.dimensions,2),i=a[0],o=a[1],c=new V.a(i,o);if(c.setFrameRate(r),c.setRepeat(0),c.writeHeader(),t){var u=W(t).slice(1);c.setTransparent("0x".concat(u))}var l=[];c.on("data",(function(e){l.push(e)})),c.on("end",(function(){var a=URL.createObjectURL(new Blob(l,{type:"image/gif"}));e(a)})),n.frames.forEach((function(e){c.addFrame(e)})),c.finish()})));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),za=function(e){return new Promise((function(a,n){return C()(e,(function(e,t){if(e)return n(e);if(3===t.shape.length){var r=Object(s.a)(t.shape,2),i=r[0],o=r[1];return a({frames:[Uint8Array.from(t.data)],dimensions:[i,o]})}for(var c=Object(s.a)(t.shape,3),u=c[0],l=c[1],d=c[2],m=l*d*4,f=[],h=0;h<u;h+=1)f.push(t.data.subarray(h*m,(h+1)*m));return a({frames:f,dimensions:[l,d]})}))}))},Ga=function(e,a){var n=!1,t=new Set,r=Object(s.a)(e.dimensions,2),i=r[0],o=r[1],c=W([0,255,0,255]);return e.frames.forEach((function(r){for(var s=0;s<o;s+=1)for(var u=0;u<i;u+=1){var l=U(e.dimensions,r,[u,s]);if(H(l))n=!0;else{var d=W(l);t.add(d),d===c&&(c=_a(a,t))}}})),n?B(c):void 0},_a=function e(a,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=W(E(a));return t>2e3?r:n.has(r)?e(a,n,t+1):r};function Ja(){return new Worker(n.p+"static/js/transform.worker.6a1e27d9.worker.js")}var Ka=function(e){return new Promise((function(a,n){var t=new Ja;t.addEventListener("error",n),t.addEventListener("messageerror",n),t.onmessage=function(e){var n=e.data;"complete"===n.status&&a(n.result)},t.postMessage(e)}))},Qa=window.ENV,Za=ve({name:"Frames per Second",defaultValue:20,min:1,max:60}),$a=function(e){var a=e.computeDisabled,n=e.appState,t=e.onFpsChange,i=e.onComputed,o=r.a.useState({loading:!1,computeTime:void 0}),c=Object(s.a)(o,2),u=c[0],f=c[1],j=r.a.useState(),g=Object(s.a)(j,2),w=g[0],C=g[1];return Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsx)(m.a,{variant:"h5",children:"Create Gif"}),Object(fe.jsx)("div",{style:{maxWidth:"300px"},children:Za.fn({value:{valid:!0,value:n.fps},onChange:function(e){e.valid&&t(e.value)}})}),Object(fe.jsx)(h.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:!u.loading&&n.dirty?Object(fe.jsx)(p.a,{children:"priority_high"}):void 0,disabled:a,onClick:Object(v.a)(b.a.mark((function e(){var a,t,r,o,c,s,u,l,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.transforms.map((function(e){return{transformName:e.transformName,params:e.paramsValues.map((function(e){return X(e.valid,"Got non-valid when compute box was clicked"),e.value}))}})),f({loading:!0}),e.prev=2,X(n.baseImage,"No source image, this button should be disabled!"),t=Date.now(),r=[],C(0),e.next=9,za(n.baseImage);case 9:o=e.sent,c=[],s="DEV"===Qa?Xa:Ka,u=0;case 13:if(!(u<a.length)){e.next=23;break}return e.next=16,s({randomSeed:n.baseImage,image:o,transformInput:a[u],fps:n.fps});case 16:l=e.sent,o=l.image,c.push(l),C(c.length/a.length*100);case 20:u+=1,e.next=13;break;case 23:d=Math.ceil((Date.now()-t)/1e3),f({loading:!1,computeTime:d}),r.forEach((function(e,a){ga("send",{hitType:"timing",timingCategory:"computeStep",timingVar:n.transforms[a].transformName,timingValue:e})})),ga("send",{hitType:"timing",timingCategory:"computeTotal",timingVar:n.transforms.length,timingValue:d}),C(void 0),i(c),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(2),console.error(e.t0),console.error(e.t0.stack);case 35:case"end":return e.stop()}}),e,null,[[2,31]])}))),children:u.loading?Object(fe.jsx)(O.a,{color:"inherit"}):"Compute"}),void 0!==w&&Object(fe.jsx)(x.a,{variant:"determinate",value:w}),!u.loading&&void 0!==u.computeTime&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(d.a,{}),Object(fe.jsxs)(m.a,{variant:"caption",children:["Compute Time: ",u.computeTime," second(s)"]})]})]})},en=n(442),an=n(467),nn=n(468),tn=n(469),rn=n(470),on=function(e){var a=e.selectedTransform,n=e.possibleTransforms,t=e.index,i=e.onSelect,o=e.onRemove,u=e.onMoveBefore,j=e.onMoveAfter,g=r.a.useState(!1),b=Object(s.a)(g,2),v=b[0],O=b[1];return Object(fe.jsx)(f.a,{style:{padding:8},elevation:3,sx:{width:300},children:Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsxs)(l.a,{direction:"row",spacing:2,children:[Object(fe.jsx)(m.a,{variant:"subtitle1",children:t+1}),Object(fe.jsx)(me.a,{title:"Delete transform",children:Object(fe.jsx)(Ye.a,{"aria-label":"delete",onClick:o,children:Object(fe.jsx)(p.a,{children:"delete"})})}),Object(fe.jsx)(me.a,{title:"Move transform earlier",children:Object(fe.jsx)(Ye.a,{"aria-label":"move-before",onClick:u,disabled:!u,children:Object(fe.jsx)(p.a,{children:"arrow_upward"})})}),Object(fe.jsx)(me.a,{title:"Move transform later",children:Object(fe.jsx)(Ye.a,{"aria-label":"move-after",onClick:j,disabled:!j,children:Object(fe.jsx)(p.a,{children:"arrow_downward"})})})]}),Object(fe.jsx)(l.a,{direction:"row",spacing:4,children:Object(fe.jsx)(ue.a,{fullWidth:!0,children:Object(fe.jsx)(en.a,{disableClearable:!0,value:a.transform.name,options:n.map((function(e){return e.name})),onChange:function(e,a){var t=n.find((function(e){return e.name===a}));i({transform:t,paramValues:t.params.map((function(e){return e.defaultValue}))})},renderInput:function(e){return Object(fe.jsx)(le.a,Object(c.a)(Object(c.a)({},e),{},{label:"Transform"}))}})})}),a.transform.params.length>0?Object(fe.jsx)(h.a,{variant:"contained",startIcon:Object(fe.jsx)(p.a,{children:"edit"}),onClick:function(){return O(!v)},children:"Edit Parameters"}):Object(fe.jsx)(h.a,{variant:"contained",disabled:!0,children:"(No Parameters Available)"}),Object(fe.jsxs)(an.a,{fullWidth:!0,maxWidth:"sm",open:v,onClose:function(){return O(!1)},children:[Object(fe.jsxs)(nn.a,{children:[a.transform.name," Parameters"]}),Object(fe.jsx)(tn.a,{children:Object(fe.jsxs)(l.a,{divider:Object(fe.jsx)(d.a,{}),spacing:2,children:[a.transform.description&&Object(fe.jsx)(m.a,{variant:"caption",children:a.transform.description}),a.transform.params.map((function(e,n){var t=e.fn({value:a.paramValues[n],onChange:function(e){i(Object(c.a)(Object(c.a)({},a),{},{paramValues:a.paramValues.map((function(a,t){return t===n?e:a}))}))}});return Object(fe.jsx)(r.a.Fragment,{children:t},"".concat(a.transform.name,"-").concat(e.name))}))]})}),Object(fe.jsx)(rn.a,{children:Object(fe.jsx)(h.a,{variant:"contained",autoFocus:!0,onClick:function(){return O(!1)},children:"Close"})})]})]})})},cn=function(e){var a=e.currentTransforms,n=e.possibleTransforms,t=e.onTransformsChange;return Object(fe.jsxs)(l.a,{spacing:4,children:[Object(fe.jsx)(m.a,{variant:"h5",children:"Image Transforms"}),a.map((function(e,r){return Object(fe.jsxs)(l.a,{direction:"row",spacing:4,children:[Object(fe.jsx)(on,{index:r,possibleTransforms:n,selectedTransform:{transform:Ua(e.transformName),paramValues:e.paramsValues},onRemove:function(){return t(a.filter((function(e,a){return a!==r})))},onMoveBefore:r>0?function(){return t(a.map((function(e,n){return n===r-1?a[n+1]:r===n?a[r-1]:e})))}:void 0,onMoveAfter:r<a.length-1?function(){return t(a.map((function(e,n){return n===r+1?a[n-1]:r===n?a[r+1]:e})))}:void 0,onSelect:function(e){return t(a.map((function(a,n){return r===n?{transformName:e.transform.name,paramsValues:e.paramValues,computedImage:void 0}:{transformName:a.transformName,paramsValues:a.paramsValues,computedImage:void 0}})))}}),e.computedImage&&Object(fe.jsx)(l.a,{sx:{width:200},children:Object(fe.jsx)("img",{src:e.computedImage.gif,alt:"gif-".concat(e.transformName,"-").concat(r),style:{maxWidth:"300px",maxHeight:"auto"}})})]},function(e,a){return"".concat(e.transformName,"-").concat(a,"-").concat(e.computedImage?e.computedImage.gif.substring(0,10):"computing")}(e,r))})),Object(fe.jsx)(h.a,{fullWidth:!1,variant:"contained",startIcon:Object(fe.jsx)(p.a,{children:"add"}),size:"large",onClick:function(){return t([].concat(Object(I.a)(a),[{transformName:n[0].name,paramsValues:n[0].params.map((function(e){return e.defaultValue})),computedImage:void 0}]))},children:"New Transform"})]})},sn=n(444),un=n(141),ln=function(e){var a=e.state,n=e.onImport,t=r.a.useState(),i=Object(s.a)(t,2),o=i[0],c=i[1],u=r.a.useState(!1),d=Object(s.a)(u,2),f=d[0],j=d[1],g=function(){j(!0),setTimeout((function(){return j(!1)}),2e3)};return Object(fe.jsxs)(l.a,{spacing:3,children:[Object(fe.jsx)(m.a,{variant:"h5",children:"Import/Export"}),Object(fe.jsxs)(h.a,{startIcon:Object(fe.jsx)(p.a,{children:"file_upload"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){var e=un.compressToBase64(JSON.stringify(a));navigator.clipboard.writeText(e),c("Copied to clipboard"),setTimeout((function(){return c(void 0)}),2e3)},children:["Export to clipboard ",Object(fe.jsx)("br",{}),"(With Source Image)"]}),Object(fe.jsx)(h.a,{startIcon:Object(fe.jsx)(p.a,{children:"file_download"}),sx:{maxWidth:"300px"},variant:"contained",onClick:Object(v.a)(b.a.mark((function e(){var a,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:if(a=e.sent){e.next=7;break}return g(),e.abrupt("return");case 7:if(t=JSON.parse(un.decompressFromBase64(a)),Array.isArray(t.transforms)){e.next=11;break}return g(),e.abrupt("return");case 11:n(t),j(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),g();case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),children:"Import from clipboard"}),o&&Object(fe.jsx)(sn.a,{severity:"info",sx:{maxWidth:"300px"},children:o}),f&&Object(fe.jsx)(sn.a,{severity:"error",sx:{maxWidth:"300px"},children:"Error importing from clipboard"})]})},dn="partymoji-state",mn=function(){try{window.localStorage.removeItem(dn)}catch(e){console.error("Error clearing state from local storage",e.stack||e)}},fn=function(e){var a=Object(c.a)(Object(c.a)({},e),{},{transforms:e.transforms.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{computedImage:void 0})}))});return JSON.stringify(a)},hn=!1,pn={dirty:!1,transforms:[],baseImage:void 0,fps:20},jn=function(){var e=r.a.useState(pn),a=Object(s.a)(e,2),n=a[0],t=a[1];r.a.useEffect((function(){var e=function(){try{var e=window.localStorage.getItem(dn);if(e){var a=JSON.parse(e);if(Array.isArray(a.transforms))return a}}catch(n){console.error("Error loading state from local storage",n.stack||n)}}();e&&t(Object(c.a)(Object(c.a)({},e),{},{dirty:!0}))}),[]);var i=function(e){!function(e){try{window.localStorage.setItem(dn,fn(e))}catch(a){console.error("Error saving state to local storage",a.stack||a)}}(e),t(e)};var o=!n.baseImage||0===n.transforms.length||!n.dirty||n.transforms.some((function(e){return Ua(e.transformName).params.length>0&&e.paramsValues.every((function(e){return!1===e.valid}))}));return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(j.a,{}),Object(fe.jsx)(u.a,{maxWidth:"md",children:Object(fe.jsxs)(l.a,{spacing:4,justifyContent:"space-evenly",divider:Object(fe.jsx)(d.a,{}),children:[Object(fe.jsx)(m.a,{variant:"h2",pt:4,children:"Partymoji"}),Object(fe.jsxs)(l.a,{spacing:4,divider:Object(fe.jsx)(d.a,{}),children:[hn,Object(fe.jsx)(f.a,{style:{padding:16},children:Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsx)(m.a,{variant:"h5",children:"Source Image"}),Object(fe.jsx)(Se,{name:"Choose a source image",currentImageUrl:n.baseImage,onChange:function(e){i(Object(c.a)(Object(c.a)({},n),{},{baseImage:e,dirty:!0}))}})]})}),Object(fe.jsx)(f.a,{style:{padding:16},children:Object(fe.jsx)(cn,{currentTransforms:n.transforms,possibleTransforms:La,onTransformsChange:function(e){return i(Object(c.a)(Object(c.a)({},n),{},{dirty:!0,transforms:e}))}})}),Object(fe.jsx)(f.a,{style:{padding:16},children:Object(fe.jsx)($a,{computeDisabled:o,appState:n,onFpsChange:function(e){return i(Object(c.a)(Object(c.a)({},n),{},{fps:e,dirty:!0}))},onComputed:function(e){return i(Object(c.a)(Object(c.a)({},n),{},{dirty:!1,transforms:n.transforms.map((function(a,n){return Object(c.a)(Object(c.a)({},a),{},{computedImage:e[n]})}))}))}})}),Object(fe.jsx)(f.a,{style:{padding:16},children:Object(fe.jsx)(ln,{state:n,onImport:function(e){return i(Object(c.a)(Object(c.a)({},e),{},{dirty:!0}))}})}),Object(fe.jsx)(f.a,{style:{padding:16},children:Object(fe.jsxs)(l.a,{spacing:3,children:[Object(fe.jsx)(m.a,{variant:"h5",children:"Clear State"}),Object(fe.jsx)(m.a,{variant:"body1",children:"Clicking this button will clear the source image and all transforms"}),Object(fe.jsx)(h.a,{startIcon:Object(fe.jsx)(p.a,{children:"clear"}),sx:{maxWidth:"300px"},variant:"contained",onClick:function(){mn(),t(pn)},children:"Clear State"})]})}),hn,Object(fe.jsx)("a",{href:"https://github.com/MikeyBurkman/partymoji",target:"_blank",rel:"noreferrer",children:Object(fe.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:64,height:64,alt:"Github Link"})})]})]})})]})},gn=n(98),bn=n(99),vn=n(193),On=n(192),xn=function(e){Object(vn.a)(n,e);var a=Object(On.a)(n);function n(){var e;Object(gn.a)(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={hasError:!1},e}return Object(bn.a)(n,[{key:"componentDidCatch",value:function(e,a){console.error("Uncaught error:",e,a)}},{key:"render",value:function(){return this.state.hasError?Object(fe.jsxs)(l.a,{spacing:1,children:[Object(fe.jsx)(m.a,{variant:"h2",children:"Oh no!"}),Object(fe.jsx)(m.a,{variant:"body1",children:"There seems to have been an issue"}),Object(fe.jsx)(m.a,{variant:"body2",children:"If refreshing the page doesn't fix things, click the below button to clear local storage"}),Object(fe.jsx)(h.a,{variant:"contained",sx:{maxWidth:"300px"},endIcon:Object(fe.jsx)(p.a,{children:"priority_high"}),startIcon:Object(fe.jsx)(p.a,{children:"priority_high"}),onClick:this.props.onClearLocalStorage,children:"Clear storage and reload"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),n}(r.a.Component);o.a.render(Object(fe.jsx)(r.a.StrictMode,{children:Object(fe.jsx)(xn,{onClearLocalStorage:function(){mn(),window.location.reload()},children:Object(fe.jsx)(jn,{})})}),document.getElementById("root"))}},[[382,1,2]]]);
//# sourceMappingURL=main.947cb534.chunk.js.map